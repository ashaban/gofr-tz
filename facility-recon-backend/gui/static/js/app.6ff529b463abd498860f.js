webpackJsonp([1],{"6k/U":function(e,t){},"7zck":function(e,t){},"HJ5/":function(e,t){},"J/Fn":function(e,t){e.exports={BACKEND_HOST:".",BACKEND_PORT:"3000",BACKEND_PROTOCOL:"http"}},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("mvHQ"),s=r.n(a),i=r("7+uW"),o=r("pFYg"),n=r.n(o),l=r("BO1k"),c=r.n(l),u=r("Dd8w"),d=r.n(u),v=r("fZjL"),p=r.n(v),h=r("mtWM"),g=r.n(h),f=r("//Fk"),m=r.n(f),_=r("NYxO"),y=r("/ocq"),x=r("+cKO"),b=r("ppUw"),$=r.n(b),S=r("fzx2"),w={validations:{username:{required:x.required},password:{required:x.required}},data:function(){return{username:"",password:"",authStatus:!1,signupEnabled:!1}},methods:{authenticate:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),g.a.post("http://41.59.227.79:8083/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.auth.token=t.data.token,e.$store.state.auth.username=e.username,e.$store.state.auth.userID=t.data.userID,e.$store.state.auth.role=t.data.role,e.$store.state.auth.tasks=t.data.tasks,$.a.config("30d"),$.a.set("token",e.$store.state.auth.token,"infinity"),$.a.set("userID",e.$store.state.auth.userID,"infinity"),$.a.set("role",e.$store.state.auth.role,"infinity"),$.a.set("tasks",s()(e.$store.state.auth.tasks),"infinity"),$.a.set("username",e.$store.state.auth.username,"infinity"),e.$store.state.auth.role=t.data.role,t.data.token?(e.$store.state.clientId=S.a.v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,yr.$emit("getConfig"),yr.$emit("getFacilityTypes")):e.authStatus=!0}).catch(function(e){e.hasOwnProperty("response")&&console.log(e.response.data.error)})},displaySignup:function(){this.$router.push({name:"Signup"})}},computed:{usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e}},created:function(){var e=this;g.a.get("http://41.59.227.79:8083/getSignupConf").then(function(t){t.data&&(e.signupEnabled=!0,e.$store.state.signupFields=t.data.allSignupFields,e.$store.state.customSignupFields=t.data.customSignupFields,$.a.set("signupFields",t.data.allSignupFields,"infinity"),$.a.set("customSignupFields",t.data.customSignupFields,"infinity"))})},beforeCreate:function(){this.$store.state.config.generalConfig.authDisabled&&(this.$store.state.clientId=S.a.v4(),this.$store.state.initializingApp=!0,this.$store.state.denyAccess=!1,this.$router.push({name:"DHIS2Auth"}))}},C={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("center",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs3:""}}),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-alert",{attrs:{type:"error",value:e.authStatus}},[e._v("\n          Authentication Failed\n        ")])],1)],1),e._v(" "),r("v-card",{attrs:{width:"430px",hover:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-toolbar",{staticStyle:{color:"white"},attrs:{color:"primary"}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs2:"","text-xs-left":""}},[r("v-icon",{attrs:{"x-large":"",color:"white"}},[e._v("lock")])],1),e._v(" "),r("v-flex",{attrs:{xs9:"","text-xs-right":""}},[r("b",[e._v("Login")])])],1)],1)],1),e._v(" "),r("v-card-text",[r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,box:"",color:"deep-purple",label:"Username"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.username.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,box:"",type:"password",color:"deep-purple",label:"Password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),r("v-card-actions",[r("v-toolbar",[e.$store.state.config.generalConfig.selfRegistration.enabled?r("v-btn",{attrs:{color:"primary"},on:{click:e.displaySignup}},[e._v("Signup")]):e._e(),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"primary",depressed:""},on:{click:function(t){return e.authenticate()}}},[e._v("Login")])],1)],1)],1)],1)],1)},staticRenderFns:[]},D=r("VU/8")(w,C,!1,null,null,null).exports,k={validations:{username:{required:x.required},retype_password:{required:x.required},password:{required:x.required},firstname:{required:x.required},surname:{required:x.required},phone:{required:x.required},email:{required:x.required}},data:function(){return{firstname:"",othername:"",surname:"",phone:"",email:"",username:"",password:"",retype_password:"",customFields:[],phoneErrors:[],emailErrors:[],alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");return/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},signup:function(){var e=this;this.password!==this.retype_password&&(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorDescription="Password mismatch"),this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Account";var t=new FormData;for(var r in t.append("firstName",this.firstname),t.append("otherName",this.othername),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("password",this.password),t.append("userName",this.username),this.$store.state.config.generalConfig.selfRegistration.requiresApproval&&t.append("status","Pending"),this.customFields)t.append(r,this.customFields[r]);g.a.post("http://41.59.227.79:8083/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){var t=p()(e.$v.$params),r=!0,a=!1,s=void 0;try{for(var i,o=c()(t);!(r=(i=o.next()).done);r=!0){var n=i.value;e.$v[n].$reset()}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.$store.state.config.generalConfig.selfRegistration.requiresApproval?e.alertMsg="Account created and waiting for approval, you will receive an email once approved":e.alertMsg="Account created successfully"}).catch(function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This account was not added, try different username",console.log(t.response.data.error)})},displayLogin:function(){this.$router.push({name:"Login"})}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstname.$dirty?(!this.$v.firstname.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}},created:function(){this.$store.state.signupFields=$.a.get("signupFields"),this.$store.state.customSignupFields=$.a.get("customSignupFields")}},P={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-alert",{staticStyle:{width:"900px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),e._v(" "),r("v-alert",{staticStyle:{width:"900px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),e._v(" "),r("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"1500px"}},[r("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),e._v(" "),r("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[r("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Create Account")])],1),e._v(" "),r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name"},on:{blur:function(t){return e.$v.firstname.$touch()},change:function(t){return e.$v.firstname.$touch()}},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.othername,callback:function(t){e.othername=t},expression:"othername"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,box:"",color:"deep-purple",label:"Phone"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,box:"",color:"deep-purple",label:"Email*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,box:"",color:"deep-purple",label:"Username"},on:{blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",box:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",box:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1)],1)],1)],1),e._v(" "),e._l(e.$store.state.customSignupFields,function(t,a){return r("label",{key:a},[(t.required,r("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:t.display},model:{value:e.customFields[a],callback:function(t){e.$set(e.customFields,a,t)},expression:"customFields[name]"}}))],1)})],2),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[r("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{flat:""},on:{click:e.displayLogin}},[r("v-icon",[e._v("lock")]),e._v("Back To Login\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.signup()}}},[r("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add\n          ")],1)],1)],1)],1),e._v(" "),r("v-spacer")],1)],1)},staticRenderFns:[]},T=r("VU/8")(k,P,!1,null,null,null).exports,F=r("Gu7T"),R=r.n(F),A={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.syncProgrIndeter,callback:function(t){e.syncProgrIndeter=t},expression:"syncProgrIndeter"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v("\n        "+e._s(e.syncStatus)+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"270"},model:{value:e.syncProgrPercent,callback:function(t){e.syncProgrPercent=t},expression:"syncProgrPercent"}},[r("v-card",{attrs:{color:"white",dark:""}},[r("v-card-text",[r("center",[r("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.syncStatus))]),r("br"),e._v(" "),r("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.syncPercent,color:"primary"}},[r("v-avatar",{attrs:{color:"indigo",size:"50px"}},[r("span",{staticClass:"white--text"},[r("b",[e._v(e._s(e.syncPercent)+"%")])])])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},I={props:["syncType","serverName","userID","sourceOwner","mode"],data:function(){return{syncProgrIndeter:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgrPercent:!1,syncProgressTimer:"",syncRunning:!1}},methods:{sync:function(){var e=this,t=this.mode;t||(t="full");var r=new FormData,a=this.$store.state.clientId;r.append("name",this.serverName),r.append("userID",this.userID),r.append("sourceOwner",this.sourceOwner),r.append("clientId",a),r.append("mode",t),this.syncRunning=!0,this.syncProgrIndeter=!0,g.a.post("http://41.59.227.79:8083/"+this.syncType+"/",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.syncProgressTimer=setInterval(e.checkSyncProgress,1e3)}).catch(function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". cross check host,user and password",clearInterval(e.syncProgressTimer),console.log(t.response.data.error)})},checkSyncProgress:function(){var e=this,t=this.$store.state.clientId,r=void 0;"dhisSync"===this.syncType?r="dhisSyncRequest":"fhirSync"===this.syncType&&(r="fhirSyncRequest"),g.a.get("http://41.59.227.79:8083/progress/"+r+"/"+t).then(function(t){return null===t.data||void 0===t.data||!1===t.data?(e.$store.state.uploadRunning=!1,e.syncProgrIndeter=!1,e.syncProgrPercent=!1,void clearInterval(e.syncProgressTimer)):null!==t.data.error?(e.$store.state.uploadRunning=!1,e.syncProgrIndeter=!1,e.syncProgrPercent=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.data.error,clearInterval(e.syncProgressTimer),void console.log(t.data.error)):null===t.data.status?(e.$store.state.uploadRunning=!1,e.syncProgrIndeter=!1,e.syncProgrPercent=!1,void clearInterval(e.syncProgressTimer)):(e.syncStatus=t.data.status,t.data.percent&&(e.syncProgrPercent||(e.syncProgrIndeter=!1,e.syncProgrPercent=!0),e.syncPercent=t.data.percent),void("Done"===t.data.status&&(e.syncStatus="Waiting for sync status",clearInterval(e.syncProgressTimer),e.syncProgrPercent=!1,e.$store.state.uploadRunning=!1,yr.$emit("getDataSources"))))}).catch(function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",console.log(t.response.data.error+". cross check host,user and password"),e.$store.state.errorDescription=t.response.data.error+". cross check host,user and password",clearInterval(e.syncProgressTimer)})}},created:function(){yr.$on("runRemoteSync",this.sync)},beforeDestroy:function(){yr.$off("runRemoteSync",this.sync)},components:{appSyncProgress:r("VU/8")({props:["syncProgrIndeter","syncStatus","syncProgrPercent","syncPercent"]},A,!1,null,null,null).exports}},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",[t("app-syncProgress",{attrs:{syncProgrIndeter:this.syncProgrIndeter,syncStatus:this.syncStatus,syncProgrPercent:this.syncProgrPercent,syncPercent:this.syncPercent}})],1)},staticRenderFns:[]},q=r("VU/8")(I,U,!1,null,null,null).exports,M={data:function(){return{roles:[],tasks:[]}},computed:{canAddDataset:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t=0,r=function(r){if(r._id===e.$store.state.config.generalConfig.reconciliation.fixSource2To)return"continue";var a=e.$store.state.auth.userID,s=e.$store.state.dhis.user.orgId,i=r.shared.users.find(function(e){return e._id===a}),o=r.owner.id===a,n=!0===r.shareToAll.activated,l=!1;if(r.owner.orgId&&r.owner.orgId===s&&(l=!0),!(o||i||n||l))return"continue";t++},a=!0,s=!1,i=void 0;try{for(var o,n=c()(this.$store.state.dataSources);!(a=(o=n.next()).done);a=!0)r(o.value)}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}return!(t>=1)||(this.datasetLimitWarn=!0,!1)}return!0}},methods:{getCodeSystem:function(e,t){g.a.get("/FR/getCodeSystem",{params:{codeSystemType:e}}).then(function(e){return t(null,e.data)}).catch(function(e){return console.log(e),t(e,null)})},getTree:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2];g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:e,recursive:t}}).then(function(e){if(e.data){return r(!1,e.data)}}).catch(function(e){return r(e,[])})},clearProgress:function(e){g.a.get("http://41.59.227.79:8083/clearProgress/"+e+"/"+this.$store.state.clientId)},getGeneralConfig:function(e){var t=this;g()({url:"/getGeneralConfig",method:"post",data:this.$store.state.config.generalConfig}).then(function(r){return r&&(t.$store.state.config.generalConfig=r.data),e()}).catch(function(){return e()})},toTitleCase:function(e){return e.toLowerCase().split(" ").map(function(e){return e.replace(e[0],e[0].toUpperCase())}).join("").toLowerCase()},translateDataHeader:function(e,t){var r=this.$store.state.config.userConfig.reconciliation.useCSVHeader,a=this.$store.state.levelMapping;if(!r||r&&a[e]["level"+t]==="level"+t)return"Level "+t;if(p()(this.$store.state.levelMapping[e]).length>0){var s=this.$store.state.levelMapping[e],i=1;for(var o in s)0===o.indexOf("level")&&i++;var n=void 0;"source1"===e&&(n=this.$store.state.totalSource1Levels),"source2"===e&&(n=this.$store.state.totalSource2Levels),t+=i- --n;var l=this.$store.state.levelMapping[e]["level"+t];return l&&"null"!==l&&"undefined"!==l&&"false"!==l?l:this.$store.state.levelMapping[e].facility}return"Level "+t},getActiveDataSourcePair:function(){var e=this,t=void 0,r={};return this.$store.state.dataSourcePairs.forEach(function(a){a.userID._id===e.$store.state.auth.userID&&"active"===a.status&&(r=a),p()(r).length>0?t=void 0:a.userID._id!==e.$store.state.auth.userID&&-1!==a.shared.activeUsers.indexOf(e.$store.state.auth.userID)&&(t=a)}),t&&(r=t),r},getDatasourceOwner:function(){var e={source1Owner:"",source2Owner:""};return this.$store.state.activePair.source1.hasOwnProperty("userID")&&(e.source1Owner=this.$store.state.activePair.source1.userID),this.$store.state.activePair.source2.hasOwnProperty("userID")&&(e.source2Owner=this.$store.state.activePair.source2.userID),e},getLimitOrgIdOnActivePair:function(){var e=this,t={source1LimitOrgId:"",source2LimitOrgId:""},r=this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source1.id}),a=this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source2.id});if(r&&r.hasOwnProperty("userID")&&r.userID._id!==this.$store.state.auth.userID){var s=r.sharedLocation.find(function(t){return t.user===e.$store.state.auth.userID});s?t.source1LimitOrgId=s.location:r.shareToAll.activated&&r.shareToAll.limitByUserLocation&&(t.source1LimitOrgId=this.$store.state.dhis.user.orgId,t.source1LimitOrgId||(t.source1LimitOrgId="undefined"))}if(a&&a.hasOwnProperty("userID")&&a.userID._id!==this.$store.state.auth.userID){var i=a.sharedLocation.find(function(t){return t.user===e.$store.state.auth.userID});i?t.source2LimitOrgId=i.location:a.shareToAll.activated&&a.shareToAll.limitByUserLocation&&(t.source2LimitOrgId=this.$store.state.dhis.user.orgId,t.source2LimitOrgId||(t.source2LimitOrgId="undefined"))}return t},getLimitOrgIdOnDataSource:function(e){var t=this,r=void 0;if(e&&e.hasOwnProperty("userID")&&e.userID._id!==this.$store.state.auth.userID){var a=e.sharedLocation.find(function(e){return e.user===t.$store.state.auth.userID});a?r=a.location:e.shareToAll.activated&&e.shareToAll.limitByUserLocation&&((r=this.$store.state.dhis.user.orgId)||(r="undefined"))}return r},getRoles:function(){var e=this;g.a.get("http://41.59.227.79:8083/getRoles").then(function(t){var r=!0,a=!1,s=void 0;try{for(var i,o=c()(t.data);!(r=(i=o.next()).done);r=!0){var n=i.value;e.roles.push({text:n.name,value:n._id,tasks:n.tasks})}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}}).catch(function(e){console.log(e.response)})},getTasks:function(){var e=this;g.a.get("http://41.59.227.79:8083/getTasks").then(function(t){e.tasks=t.data}).catch(function(e){console.log(e.response)})},saveConfiguration:function(e,t){var r=this,a=this.$store.state.auth.userID,i=new FormData;i.append("config",s()(this.$store.state.config)),i.append("userID",a);var o=void 0;o="generalConfig"===e?"/updateGeneralConfig":"/updateUserConfig",g.a.post("http://41.59.227.79:8083"+o,i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){"useCSVHeader"===t&&yr.$emit("changeCSVHeaderNames"),"authDisabled"===t&&r.$router.push({name:"Logout"})})},setDHIS2Credentials:function(){return this.$store.state.auth.token="",!(location.href.split("api").length<2)&&(this.$store.state.dhis.host=location.href.split("api").shift(),g.a.defaults.params={authDisabled:!0},!0)}}},E={mixins:[M],validations:{facility:{required:x.required},code:{required:x.required},uploadName:{required:x.required}},data:function(){return{smtp:{host:"",port:"",username:"",password:"",secured:!0},autoDisableSingleDatasourceDialog:!1,selectDatasourceDialog:!1,fixSource2To:"",searchDatasource:"",dataSourceHeaders:[{sortable:!1},{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Created Time",value:"createdTime"}],cronDataSourceHeaders:[{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Created Time",value:"createdTime"},{text:"Enabled",value:"enabled"}],datasetsAutosyncState:{},useCSVHeader:!1,moreFields:!1,fieldLabel:"",fieldName:"",required:"No",requiredText:["Yes","No"],signupFields:[],notification_endpoint:"",notification_username:"",notification_password:"",dhis2Roles:[],loadingDhis2Roles:!1,datasetNameErrors:[],defineSuperuserRole:!1}},methods:{controlDatasetsCronjobs:function(e){var t=new FormData;t.append("id",e._id),t.append("enabled",this.datasetsAutosyncState[e._id]),g.a.post("http://41.59.227.79:8083/updateDatasetAutosync",t)},checkDatasetsAdditionWays:function(e){if(0===this.$store.state.config.generalConfig.datasetsAdditionWays.length){this.$store.state.errorTitle="Cant disable both ways",this.$store.state.errorDescription="There must be atleast one way of adding a dataset",this.$store.state.dialogError=!0;var t=void 0;"remote"===e?t="Remote Servers Sync":"upload"===e&&(t="CSV Upload"),this.$store.state.config.generalConfig.datasetsAdditionWays.push(t)}else this.saveConfiguration("generalConfig","datasetsAdditionWays")},autoDisableSingleDatasource:function(e){"ok"===e?(this.$store.state.config.generalConfig.reconciliation.singleDataSource=!1,this.saveConfiguration("generalConfig","fixSource2"),this.saveConfiguration("generalConfig","singleDataSource")):"cancel"===e&&(this.$store.state.config.generalConfig.reconciliation.fixSource2=!0),this.autoDisableSingleDatasourceDialog=!1},singleDatasource:function(){var e=this;this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.$store.state.config.generalConfig.reconciliation.fixSource2To&&this.$store.state.config.generalConfig.reconciliation.fixSource2?this.saveConfiguration("generalConfig","singleDataSource"):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="This feature can only be enabled if there is a defined datasource to serve as Source 2 for all reconciliation",setTimeout(function(){e.$store.state.config.generalConfig.reconciliation.singleDataSource=!1})):this.saveConfiguration("generalConfig","singleDataSource")},displayDatasourceDialog:function(){!0===this.$store.state.config.generalConfig.reconciliation.fixSource2?(this.fixSource2To=this.$store.state.config.generalConfig.reconciliation.fixSource2To,this.selectDatasourceDialog=!0,this.saveConfiguration("generalConfig","fixSource2")):this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.autoDisableSingleDatasourceDialog=!0:this.saveConfiguration("generalConfig","fixSource2")},closeDatasourceDialog:function(){this.selectDatasourceDialog=!1,this.$store.state.config.generalConfig.reconciliation.fixSource2To||(this.$store.state.config.generalConfig.reconciliation.fixSource2=!1,this.saveConfiguration("generalConfig","fixSource2"))},savefixSource2To:function(){this.$store.state.config.generalConfig.reconciliation.fixSource2To=this.fixSource2To,this.saveConfiguration("generalConfig","fixSource2To"),this.selectDatasourceDialog=!1},disableGOFRAuth:function(){var e=this;if(this.$store.state.config.generalConfig.authDisabled){if(this.$store.state.config.generalConfig.authDisabled){if(!this.setDHIS2Credentials())return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="App doesnt appear to be running inside DHIS2, cant disable authentication",void setTimeout(function(){e.$store.state.config.generalConfig.authDisabled=!1});this.loadingDhis2Roles=!0,this.getDHIS2Roles(function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=[].concat(R()(t.data.userRoles))}),this.defineSuperuserRole=!0}}else this.saveConfiguration("generalConfig","authDisabled")},recoProgressNotificationChanged:function(){this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")||(this.$store.state.config.generalConfig.recoProgressNotification={}),this.$store.state.config.generalConfig.recoProgressNotification.url=this.notification_endpoint,this.$store.state.config.generalConfig.recoProgressNotification.username=this.notification_username,this.$store.state.config.generalConfig.recoProgressNotification.password=this.notification_password,this.saveConfiguration("generalConfig")},saveSMTP:function(){var e=this,t=new FormData;this.$store.state.progressTitle="Saving SMTP",this.$store.state.dynamicProgress=!0,t.append("host",this.smtp.host),t.append("port",this.smtp.port),t.append("username",this.smtp.username),t.append("password",this.smtp.password),t.append("secured",this.smtp.secured),g.a.post("http://41.59.227.79:8083/saveSMTP",t,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorColor="primary",e.$store.state.errorTitle="Info",e.$store.state.errorDescription="SMTP saved successfully"}).catch(function(t){console.log(t),e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorColor="error",e.$store.state.errorTitle="Error",e.$store.state.errorDescription="SMTP failed to be saved"})},addMoreFields:function(){var e=this;if(this.$store.state.progressTitle="Saving field",this.$store.state.dynamicProgress=!0,this.signupFields[0].children.find(function(t){return t.id===e.fieldName}))this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorDescription="Field name must be unique";else{var t=new FormData,r=void 0;r="Yes"===this.required,t.append("fieldName",this.fieldName),t.append("fieldLabel",this.fieldLabel),t.append("fieldRequired",r),t.append("form","signup"),g.a.post("http://41.59.227.79:8083/addFormField",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Info",e.$store.state.errorDescription="Field added successfully",e.$store.state.signupFields[e.fieldName]={type:"String",display:e.fieldLabel},e.$store.state.customSignupFields[e.fieldName]={type:"String",display:e.fieldLabel},$.a.set("signupFields",e.$store.state.signupFields,"infinity"),$.a.set("customSignupFields",e.$store.state.customSignupFields,"infinity"),e.signupFields[0].children.push({id:e.fieldName,name:e.fieldLabel}),e.fieldName="",e.fieldLabel="",e.required="No"})}},pullOrgUnits:function(){this.saveConfiguration("generalConfig","externalAuth");var e=new FormData;e.append("host",this.$store.state.dhis.host),e.append("sourceType","DHIS2"),e.append("source","syncServer"),e.append("shareToAll",this.$store.state.config.generalConfig.externalAuth.shareOrgUnits),e.append("limitByUserLocation",this.$store.state.config.generalConfig.externalAuth.shareByOrgId),e.append("username",this.$store.state.config.generalConfig.externalAuth.userName),e.append("password",this.$store.state.config.generalConfig.externalAuth.password),e.append("name",this.$store.state.config.generalConfig.externalAuth.datasetName),e.append("userID",this.$store.state.auth.userID),g.a.post("http://41.59.227.79:8083/addDataSource",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){yr.$emit("runRemoteSync")})},getDHIS2Roles:function(e){var t=this.$store.state.dhis.dev.auth;""===t.username&&(t=""),g.a.get(this.$store.state.dhis.host+"api/userRoles",{auth:t}).then(function(t){e(t)})},ensureNameUnique:function(){if(this.datasetNameErrors=[],""===this.$store.state.config.generalConfig.externalAuth.datasetName)return this.datasetNameErrors.push("Dataset name is required");var e=!0,t=!1,r=void 0;try{for(var a,s=c()(this.$store.state.dataSources);!(e=(a=s.next()).done);e=!0){if(a.value.name===this.uploadName)return this.datasetNameErrors.push("This Name Exists"),!1}}catch(e){t=!0,r=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw r}}}},created:function(){var e=this;for(var t in g.a.get("http://41.59.227.79:8083/getSMTP").then(function(t){t&&t.data&&(e.smtp.host=t.data.host,e.smtp.port=t.data.port,e.smtp.username=t.data.username,e.smtp.password=t.data.password,e.smtp.secured=t.data.secured)}).catch(function(t){console.log(t),e.$store.state.dialogError=!0,e.$store.state.errorColor="error",e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting SMTP config"}),this.$store.state.config.generalConfig.authDisabled&&"dhis2"===this.$store.state.config.generalConfig.authMethod&&(this.loadingDhis2Roles=!0,this.getDHIS2Roles(function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=[].concat(R()(t.data.userRoles))})),this.signupFields.push({id:"signupFields",name:"Self Registration Fields",children:[]}),this.$store.state.signupFields)this.signupFields[0].children.push({id:t,name:t});this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")&&(this.notification_endpoint=this.$store.state.config.generalConfig.recoProgressNotification.url,this.notification_username=this.$store.state.config.generalConfig.recoProgressNotification.username,this.notification_password=this.$store.state.config.generalConfig.recoProgressNotification.password)},computed:{fixedSource2To:function(){var e="",t=!0,r=!1,a=void 0;try{for(var s,i=c()(this.$store.state.dataSources);!(t=(s=i.next()).done);t=!0){var o=s.value;o._id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(e=o)}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}return e.name},sharedToAllDatasets:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var s,i=c()(this.$store.state.dataSources);!(t=(s=i.next()).done);t=!0){var o=s.value;o.shareToAll.activated,e.push(o)}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}return e},remoteDatasets:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var s,i=c()(this.$store.state.dataSources);!(t=(s=i.next()).done);t=!0){var o=s.value;"syncServer"===o.source&&(o.enableAutosync?this.datasetsAutosyncState[o._id]=!0:this.datasetsAutosyncState[o._id]=!1,e.push(o))}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}return e}},beforeCreate:function(){if(this.$store.state.config.generalConfig.hasOwnProperty("authMethod")||this.$set(this.$store.state.config.generalConfig,"authMethod","dhis2"),!this.$store.state.config.generalConfig.hasOwnProperty("externalAuth")){this.$set(this.$store.state.config.generalConfig,"externalAuth",{pullOrgUnits:!0,shareOrgUnits:!1,shareByOrgId:!1,datasetName:"",adminRole:""})}},components:{appRemoteSync:q}},L={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.autoDisableSingleDatasourceDialog,callback:function(t){e.autoDisableSingleDatasourceDialog=t},expression:"autoDisableSingleDatasourceDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n          Disabling Single Data Source Limit\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n        Disabling limiting reconciliation to be done against one choosen data source will also disable the single data source limit, click OK to proceed\n      ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("ok")}}},[e._v("Ok")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.defineSuperuserRole,callback:function(t){e.defineSuperuserRole=t},expression:"defineSuperuserRole"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n          DHIS2 superuser role that can be an administrator of GOFR\n        ")])],1),e._v(" "),r("v-card-text",[r("v-select",{attrs:{label:"Superuser Role Name","item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary",disabled:!e.$store.state.config.generalConfig.externalAuth.adminRole||0===e.dhis2Roles.length},on:{click:function(t){return e.saveConfiguration("generalConfig","authDisabled")}}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("\n          Save\n        ")],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"800px"},model:{value:e.selectDatasourceDialog,callback:function(t){e.selectDatasourceDialog=t},expression:"selectDatasourceDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n          Select datasource to fix source 2\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchDatasource,callback:function(t){e.searchDatasource=t},expression:"searchDatasource"}}),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDatasourceDialog(t)}}},[r("v-icon",[e._v("close")])],1)],1),e._v("\n      This lists only those datasets that have been shared to all users\n      "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.dataSourceHeaders,items:e.sharedToAllDatasets,dark:"",search:e.searchDatasource},scopedSlots:e._u([{key:"items",fn:function(t){return[r("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.fixSource2To,callback:function(t){e.fixSource2To=t},expression:"fixSource2To"}},[r("td",[r("v-radio",{attrs:{value:t.item._id,color:"blue"}})],1)]),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),r("td",[e._v("\n              "+e._s(t.item.createdTime)+"\n            ")])]}}])},[r("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},on:{click:e.closeDatasourceDialog}},[r("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v("\n          Cancel\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",disabled:!e.fixSource2To||0===e.sharedToAllDatasets.length},on:{click:e.savefixSource2To}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("\n          Save\n        ")],1)],1)],1)],1),e._v(" "),r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[r("b",[e._v("System Configurations")])]),e._v(" "),r("v-card-text",[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n          User Configurations\n        ")]),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-switch",{attrs:{color:"primary",label:"Apply user defined headers when reconciling"},on:{change:function(t){return e.saveConfiguration("userConfig","useCSVHeader")}},model:{value:e.$store.state.config.userConfig.reconciliation.useCSVHeader,callback:function(t){e.$set(e.$store.state.config.userConfig.reconciliation,"useCSVHeader",t)},expression:"$store.state.config.userConfig.reconciliation.useCSVHeader"}})],1)],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-divider"),e._v(" "),r("v-divider"),e._v(" "),"Admin"==e.$store.state.auth.role?r("v-card",[r("v-card-title",[e._v("\n          Admin Configurations\n        ")]),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-switch",{attrs:{color:"primary",label:"Perform match based on parent constraint"},on:{change:function(t){return e.saveConfiguration("generalConfig","parentConstraint")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"enabled",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.enabled"}}),e._v(" "),e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled?e._e():r("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[r("v-checkbox",{attrs:{color:"primary",label:"Automatch By ID",disabled:""},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrIdAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"idAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch"}}),e._v(" "),r("v-checkbox",{attrs:{color:"primary",label:"Automatch By Name (when parents differ)"},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrNameAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"nameAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch"}})],1),e._v(" "),r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Choose ways datasets can be added\n                ")]),e._v(" "),r("v-card-text",[r("v-checkbox",{attrs:{label:"CSV Upload",value:"CSV Upload"},on:{change:function(t){return e.checkDatasetsAdditionWays("upload")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}}),e._v(" "),r("v-checkbox",{attrs:{label:"Remote Servers Sync",value:"Remote Servers Sync"},on:{change:function(t){return e.checkDatasetsAdditionWays("remote")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}})],1)],1),e._v(" "),r("v-switch",{attrs:{color:"primary",label:"Allow non admin users to share datasets will all users"},on:{change:function(t){return e.saveConfiguration("generalConfig","allowShareToAllForNonAdmin")}},model:{value:e.$store.state.config.generalConfig.allowShareToAllForNonAdmin,callback:function(t){e.$set(e.$store.state.config.generalConfig,"allowShareToAllForNonAdmin",t)},expression:"$store.state.config.generalConfig.allowShareToAllForNonAdmin"}}),e._v(" "),r("v-tooltip",{attrs:{top:""}},[r("v-switch",{attrs:{slot:"activator",color:"primary",label:"Select a data source to serve as Source 2 for all reconciliation"},on:{change:e.displayDatasourceDialog},slot:"activator",model:{value:e.$store.state.config.generalConfig.reconciliation.fixSource2,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"fixSource2",t)},expression:"$store.state.config.generalConfig.reconciliation.fixSource2"}}),e._v(" "),r("span",[e._v("This will limit users to perform reconciliations against the chosen data source")])],1),e._v(" "),e.$store.state.config.generalConfig.reconciliation.fixSource2?[e._v("\n                Source2 Limited To: "),r("v-chip",[e._v(e._s(e.fixedSource2To))]),e._v(" "),r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",fab:"",dark:"",color:"primary",small:""},on:{click:e.displayDatasourceDialog},slot:"activator"},[r("v-icon",{attrs:{dark:""}},[e._v("list")])],1),e._v(" "),r("span",[e._v("Change dataset")])],1)]:e._e(),e._v(" "),r("v-switch",{attrs:{color:"primary",label:"Single data source per user"},on:{change:e.singleDatasource},model:{value:e.$store.state.config.generalConfig.reconciliation.singleDataSource,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singleDataSource",t)},expression:"$store.state.config.generalConfig.reconciliation.singleDataSource"}}),e._v(" "),e.$store.state.dhis.user.orgId?r("v-switch",{attrs:{color:"primary",label:"Single data source pair per org unit"},on:{change:function(t){return e.saveConfiguration("generalConfig","singlePair")}},model:{value:e.$store.state.config.generalConfig.reconciliation.singlePair,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singlePair",t)},expression:"$store.state.config.generalConfig.reconciliation.singlePair"}}):e._e()],2),e._v(" "),r("v-flex",[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  GOFR Authentication\n                ")]),e._v(" "),r("v-card-text",[r("v-switch",{attrs:{color:"primary",label:"Disable Authentication"},on:{change:e.disableGOFRAuth},model:{value:e.$store.state.config.generalConfig.authDisabled,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authDisabled",t)},expression:"$store.state.config.generalConfig.authDisabled"}}),e._v(" "),e.$store.state.config.generalConfig.authDisabled?r("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[e._v("\n                    External Authentication Method\n                    "),r("v-radio-group",{on:{change:function(t){return e.saveConfiguration("generalConfig","useDhis2Auth")}},model:{value:e.$store.state.config.generalConfig.authMethod,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authMethod",t)},expression:"$store.state.config.generalConfig.authMethod"}},[r("v-radio",{attrs:{label:"dhis2",value:"dhis2",disabled:""}}),e._v(" "),r("v-radio",{attrs:{label:"iHRIS",value:"iHRIS",disabled:""}})],1),e._v(" "),r("v-select",{staticStyle:{width:"350px"},attrs:{label:"Superuser Role Name","item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}}),e._v(" "),e.$store.state.config.generalConfig.authMethod?r("v-checkbox",{attrs:{label:"Pull org units"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.pullOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"pullOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.pullOrgUnits"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?r("v-checkbox",{attrs:{label:"Share orgs with other users"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.shareOrgUnits"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.shareOrgUnits&&e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?r("v-checkbox",{attrs:{label:"Limit orgs sharing by user orgid"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareByOrgId,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareByOrgId",t)},expression:"$store.state.config.generalConfig.externalAuth.shareByOrgId"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?r("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Dataset Name","error-messages":e.datasetNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.$store.state.config.generalConfig.externalAuth.datasetName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"datasetName",t)},expression:"$store.state.config.generalConfig.externalAuth.datasetName"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?r("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Username",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.userName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"userName",t)},expression:"$store.state.config.generalConfig.externalAuth.userName"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?r("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Password",type:"password",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.password,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"password",t)},expression:"$store.state.config.generalConfig.externalAuth.password"}}):e._e(),e._v(" "),r("v-flex",{attrs:{xs3:""}},[e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?r("v-btn",{attrs:{color:"primary",disabled:e.datasetNameErrors.length>0||!e.$store.state.config.generalConfig.externalAuth.datasetName,small:"",round:""},on:{click:e.pullOrgUnits}},[e._v("start pulling")]):e._e()],1)],1):e._e()],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-flex",[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Self Registration\n                ")]),e._v(" "),r("v-card-text",[r("v-switch",{attrs:{color:"primary",label:"Enable self registration"},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"enabled",t)},expression:"$store.state.config.generalConfig.selfRegistration.enabled"}}),e._v(" "),e.$store.state.config.generalConfig.selfRegistration.enabled?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs3:""}},[r("v-treeview",{attrs:{items:e.signupFields}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs8:""}},[r("v-btn",{attrs:{small:"",round:"",color:"primary"},on:{click:function(t){e.moreFields=!e.moreFields}}},[e._v("Add More Fields")]),e._v(" "),e.moreFields?r("v-text-field",{attrs:{label:"Field Label"},model:{value:e.fieldLabel,callback:function(t){e.fieldLabel=t},expression:"fieldLabel"}}):e._e(),e._v(" "),e.moreFields?r("v-text-field",{attrs:{label:"Unique Name"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}}):e._e(),e._v(" "),e.moreFields?r("v-select",{attrs:{items:e.requiredText,label:"Required"},model:{value:e.required,callback:function(t){e.required=t},expression:"required"}}):e._e(),e._v(" "),e.moreFields?r("v-btn",{attrs:{color:"info",small:""},on:{click:e.addMoreFields}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" Save\n                      ")],1):e._e(),e._v(" "),e.moreFields?r("v-btn",{attrs:{color:"error",small:""},on:{click:function(t){e.moreFields=!1}}},[r("v-icon",{attrs:{left:""}},[e._v("close")]),e._v(" Cancel\n                      ")],1):e._e()],1)],1):e._e(),e._v(" "),r("v-switch",{attrs:{color:"primary",label:"Requires Admin Approval Of Self Registration"},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.requiresApproval,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"requiresApproval",t)},expression:"$store.state.config.generalConfig.selfRegistration.requiresApproval"}})],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Cron Jobs\n                ")]),e._v(" "),r("v-card-text",[e._v("\n                  Autosync Below Remote Datasets\n                  "),r("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",name:"cron_time",label:"Cron Time"},on:{blur:function(t){return e.saveConfiguration("generalConfig","datasetsAutosyncTime")}},model:{value:e.$store.state.config.generalConfig.datasetsAutosyncTime,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAutosyncTime",t)},expression:"$store.state.config.generalConfig.datasetsAutosyncTime"}}),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.cronDataSourceHeaders,items:e.remoteDatasets,"hide-actions":"","pagination.sync":"pagination"},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),r("td",[e._v("\n                        "+e._s(t.item.createdTime)+"\n                      ")]),e._v(" "),r("td",[r("v-switch",{attrs:{color:"primary"},on:{change:function(r){return e.controlDatasetsCronjobs(t.item)}},model:{value:e.datasetsAutosyncState[t.item._id],callback:function(r){e.$set(e.datasetsAutosyncState,t.item._id,r)},expression:"datasetsAutosyncState[props.item._id]"}})],1)]}}],null,!1,1143142968)})],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-card",{attrs:{color:"grey lighten-3"}},[r("v-card-text",[e._v("\n                  SMTP Configuration For Email Notifications\n                ")]),e._v(" "),r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-text-field",{attrs:{label:"SMTP Host",box:""},model:{value:e.smtp.host,callback:function(t){e.$set(e.smtp,"host",t)},expression:"smtp.host"}})],1),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{label:"SMTP Port",box:""},model:{value:e.smtp.port,callback:function(t){e.$set(e.smtp,"port",t)},expression:"smtp.port"}})],1),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{label:"SMTP Username",box:""},model:{value:e.smtp.username,callback:function(t){e.$set(e.smtp,"username",t)},expression:"smtp.username"}})],1),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{type:"password",label:"SMTP Password","browser-autocomplete":"new-password",box:""},model:{value:e.smtp.password,callback:function(t){e.$set(e.smtp,"password",t)},expression:"smtp.password"}})],1),e._v(" "),r("v-flex",[r("v-switch",{attrs:{color:"primary",label:"SMTP Secured"},model:{value:e.smtp.secured,callback:function(t){e.$set(e.smtp,"secured",t)},expression:"smtp.secured"}})],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-btn",{attrs:{color:"primary"},on:{click:e.saveSMTP}},[r("v-icon",[e._v("save")]),e._v("Save\n                          ")],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-switch",{attrs:{color:"primary",label:"Enable Endpoint Notification when reconciliation is done"},on:{change:function(t){return e.saveConfiguration("generalConfig","recoProgressNotification")}},model:{value:e.$store.state.config.generalConfig.recoProgressNotification.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.recoProgressNotification,"enabled",t)},expression:"$store.state.config.generalConfig.recoProgressNotification.enabled"}}),e._v(" "),e.$store.state.config.generalConfig.recoProgressNotification.enabled?r("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[r("v-card-text",[e._v("\n                  End point to send notification when reconciliation is done\n                ")]),e._v(" "),r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-text-field",{attrs:{label:"End point URL",box:""},model:{value:e.notification_endpoint,callback:function(t){e.notification_endpoint=t},expression:"notification_endpoint"}})],1),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{label:"End point Username",box:""},model:{value:e.notification_username,callback:function(t){e.notification_username=t},expression:"notification_username"}})],1),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{label:"End point Password",box:""},model:{value:e.notification_password,callback:function(t){e.notification_password=t},expression:"notification_password"}})],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-btn",{attrs:{color:"primary"},on:{click:e.recoProgressNotificationChanged}},[r("v-icon",[e._v("save")]),e._v("Save\n                          ")],1)],1)],1)],1)],1)],1)],1):e._e()],1)],1)],1)],1):e._e()],1)],1),e._v(" "),r("appRemoteSync",{attrs:{syncType:"dhisSync",serverName:e.$store.state.config.generalConfig.externalAuth.datasetName,userID:e.$store.state.auth.userID,sourceOwner:e.$store.state.auth.userID,mode:"full"}})],1)},staticRenderFns:[]},N=r("VU/8")(E,L,!1,null,null,null).exports,O={mounted:function(){this.$store.state.auth.token="",$.a.remove("token"),$.a.remove("userID"),$.a.remove("role"),$.a.remove("username"),this.$router.push("login")}},H={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},j=r("VU/8")(O,H,!1,null,null,null).exports,V={mixins:[M],validations:{role:{required:x.required}},data:function(){return{usersHeader:[{text:"Firstname",value:"firstName"},{text:"Surname",value:"surname"},{text:"Othername",value:"otherName"},{text:"Phone",value:"phone"},{text:"Email",value:"email"},{text:"User Name",value:"username"},{text:"Role",value:"role"},{text:"Status",value:"status"}],users:[],user:{},role:"",approveUserDialog:!1,loadingUsers:!1,searchUsers:"",alertSuccess:!1,alertFail:!1,alertMsg:""}},methods:{displayApprovalDialog:function(e){this.user=e,this.approveUserDialog=!0},changeStatus:function(e){var t=this,r=new FormData;r.append("role",this.role),r.append("status",e),r.append("id",this.user._id),g.a.post("http://41.59.227.79:8083/processUserAccoutRequest/",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){t.approveUserDialog=!1,t.$store.state.errorTitle="Info",t.$store.state.errorDescription="This request was processed successfully",t.$store.state.dialogError=!0,t.getUsers()}).catch(function(e){t.approveUserDialog=!1,t.$store.state.errorTitle="Error",t.$store.state.errorDescription="An error occured while processing this request, please retry",t.$store.state.dialogError=!0,console.log(e.response.data.error)})},getUsers:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),this.users=[],this.loadingUsers=!0,g.a.get("http://41.59.227.79:8083/getUsers/").then(function(t){e.loadingUsers=!1,e.users=t.data}).catch(function(t){e.loadingUsers=!1,t.hasOwnProperty("response")&&console.log(t.response.data.error)})},accountAction:function(e,t){var r=this,a=t._id,i=new FormData;i.append("id",a),"Active"===e||"Inactive"===e?(i.append("status",e),g.a.post("http://41.59.227.79:8083/changeAccountStatus",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){r.alertSuccess=!0,"Active"===e?r.alertMsg="Account activated successfully":"Inactive"===e&&(r.alertMsg="Account deactivated successfully"),r.getUsers()}).catch(function(e){console.log(s()(e)),r.alertFail=!0,r.alertMsg="Action failed"})):"reset"===e&&(i.append("surname",t.surname),g.a.post("http://41.59.227.79:8083/resetPassword",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){r.alertSuccess=!0,r.alertMsg="Password reseted successfully",r.getUsers()}).catch(function(e){console.log(s()(e)),r.alertFail=!0,r.alertMsg="Action failed"}))}},computed:{roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getUsers(),this.getRoles()}},J={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),e._v(" "),r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),e._v(" "),r("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:e.approveUserDialog,callback:function(t){e.approveUserDialog=t},expression:"approveUserDialog"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-spacer"),e._v(" "),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.approveUserDialog=!1}}},[e._v("close")])],1),e._v(" "),r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n        User "+e._s(e.user.userName)+"\n      ")]),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{x5:""}},[e._v("\n                "+e._s(e.user.firstName)+"\n              ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[e._v("\n                "+e._s(e.user.surname)+"\n              ")])],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{x5:""}},[e._v("\n                "+e._s(e.user.phone)+"\n              ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[e._v("\n                "+e._s(e.user.email)+"\n              ")])],1)],1),e._v(" "),r("v-flex",[r("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,box:"",label:"Role"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.changeStatus("Rejected")}}},[r("v-icon",[e._v("clear")]),e._v("Reject\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.changeStatus("Active")}}},[r("v-icon",{attrs:{left:""}},[e._v("language")]),e._v("Approve\n        ")],1)],1)],1)],1),e._v(" "),r("v-card",{staticClass:"mx-auto",attrs:{color:"cyan lighten-5",width:"1500px"}},[r("v-card-title",{attrs:{"primary-title":"",width:"1000"}},[r("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n        Users List\n        "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}})],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,dark:"",loading:e.$store.state.loadingusers},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.firstName))]),e._v(" "),r("td",[e._v(e._s(t.item.surname))]),e._v(" "),r("td",[e._v(e._s(t.item.otherName))]),e._v(" "),r("td",[e._v(e._s(t.item.phone))]),e._v(" "),r("td",[e._v(e._s(t.item.email))]),e._v(" "),r("td",[e._v(e._s(t.item.userName))]),e._v(" "),t.item.role?r("td",[e._v(e._s(t.item.role.name))]):r("td"),e._v(" "),r("td",[e._v(e._s(t.item.status))]),e._v(" "),"Pending"===t.item.status||"Rejected"===t.item.status?r("td",[r("v-btn",{attrs:{color:"success",small:""},on:{click:function(r){return e.displayApprovalDialog(t.item)}}},[e._v("Approve/Reject")])],1):r("td",["Active"===t.item.status?r("v-btn",{attrs:{small:"",color:"error"},on:{click:function(r){return e.accountAction("Inactive",t.item)}}},[e._v("Deactivate")]):r("v-btn",{attrs:{small:"",color:"success"},on:{click:function(r){return e.accountAction("Active",t.item)}}},[e._v("Activate")]),e._v(" "),r("v-btn",{attrs:{small:"",color:"error"},on:{click:function(r){return e.accountAction("reset",t.item)}}},[r("v-icon",{attrs:{left:""}},[e._v("refresh")]),e._v(" Reset Password\n            ")],1)],1)]}}])},[r("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1)},staticRenderFns:[]},B=r("VU/8")(V,J,!1,null,null,null).exports,W={mixins:[M],validations:{userName:{required:x.required},retype_password:{required:x.required},password:{required:x.required},role:{required:x.required},firstName:{required:x.required},surname:{required:x.required},phone:{required:x.required},email:{required:x.required}},data:function(){return{firstName:"",otherName:"",surname:"",phone:"",email:"",userName:"",password:"",retype_password:"",role:"",customFields:[],phoneErrors:[],emailErrors:[]}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");return/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},addUser:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving User";var t=new FormData;for(var r in t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("password",this.password),t.append("userName",this.userName),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("role",this.role),this.customFields)t.append(r,this.customFields[r]);g.a.post("http://41.59.227.79:8083/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="User added successfully",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="This user was not added, ensure userName is not used",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)})}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.userName.$dirty?(!this.$v.userName.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getRoles()}},G={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[r("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),e._v(" "),r("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[r("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New User")])],1),e._v(" "),r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),e._v(" "),r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,box:"",color:"deep-purple",label:"Phone*"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,box:"",color:"deep-purple",label:"Email*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,box:"",color:"deep-purple",label:"Username*"},on:{blur:function(t){return e.$v.userName.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e._v(" "),e._l(e.$store.state.customSignupFields,function(t,a){return r("label",{key:a},[(t.required,r("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:t.display},model:{value:e.customFields[a],callback:function(t){e.$set(e.customFields,a,t)},expression:"customFields[name]"}}))],1)}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",box:"",color:"deep-purple",label:"Password*"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",box:"",color:"deep-purple",label:"Re-type Password*"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}}),e._v(" "),r("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,box:"",label:"Role*"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],2),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[r("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addUser()}}},[r("v-icon",{attrs:{left:""}},[e._v("language")]),e._v("Add\n          ")],1)],1)],1)],1),e._v(" "),r("v-spacer")],1)],1)},staticRenderFns:[]},z=r("VU/8")(W,G,!1,null,null,null).exports,Y={mixins:[M],data:function(){return{role:{},task:""}},methods:{roleSelected:function(e){this.role=this.roles.find(function(t){return t.value===e})},saveRole:function(){var e=this;this.$store.state.progressTitle="Updating role",this.$store.state.dynamicProgress=!0;var t=new FormData;t.append("role",s()(this.role)),g.a.post("http://41.59.227.79:8083/updateRole",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Info",e.$store.state.errorColor="primary",e.$store.state.errorDescription="Role "+e.role.text+" updated successfully",e.getRoles()}).catch(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorColor="error",e.$store.state.errorDescription="An error has occured while updating role "+e.role.text,console.log(t)})}},created:function(){this.getRoles(),this.getTasks()}},K={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[e._v("\n  Select role to edit tasks\n  "),r("v-select",{attrs:{required:"",items:e.roles,"single-line":"",box:"",label:"Select Role"},on:{change:e.roleSelected}}),e._v(" "),e.role.value?r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n      Tasks assigned to role "+e._s(e.role.text)+"\n    ")]),e._v(" "),r("v-card-text",[r("v-data-table",{attrs:{items:e.tasks,height:"10px","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[r("tr",[r("td",[r("v-checkbox",{attrs:{value:t.item._id},model:{value:e.role.tasks,callback:function(t){e.$set(e.role,"tasks",t)},expression:"role.tasks"}})],1),e._v(" "),r("td",[e._v(e._s(t.item.display))])])]}}],null,!1,1275383574)})],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.saveRole}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" Save\n      ")],1)],1)],1):e._e()],1)},staticRenderFns:[]},X=r("VU/8")(Y,K,!1,null,null,null).exports,Z={validations:{retype_password:{required:x.required},password:{required:x.required},oldPassword:{required:x.required}},data:function(){return{oldPassword:"",password:"",retype_password:""}},methods:{changePassword:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Changing Password";var t=new FormData;t.append("password",this.password),t.append("id",this.$store.state.auth.userID),g.a.post("http://41.59.227.79:8083/changePassword/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password changed successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password change failed!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)})},verifyPassword:function(){var e=this,t=new FormData;t.append("username",this.$store.state.auth.username),t.append("password",this.oldPassword),g.a.post("http://41.59.227.79:8083/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t.data.token?e.changePassword():(e.alertFail=!0,e.alertMsg="Wrong Old Password")}).catch(function(e){console.log(s()(e))})}},computed:{oldPasswordErrors:function(){var e=[];return this.$v.oldPassword.$dirty?(!this.$v.oldPassword.required&&e.push("Old Password is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}}},Q={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[r("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),e._v(" "),r("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[r("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Change Password")])],1),e._v(" "),r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"","error-messages":e.oldPasswordErrors,type:"password",box:"",color:"deep-purple",label:"Old Password"},on:{blur:function(t){return e.$v.oldPassword.$touch()},change:function(t){return e.$v.oldPassword.$touch()}},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",box:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",box:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[r("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.verifyPassword()}}},[r("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Change\n          ")],1)],1)],1)],1),e._v(" "),r("v-spacer")],1)],1)},staticRenderFns:[]},ee=r("VU/8")(Z,Q,!1,null,null,null).exports,te=r("woOf"),re=r.n(te),ae=r("ZIfW"),se=g.a.CancelToken,ie={mixins:[M],data:function(){return{loadingSource2Unmatched:!1,loadingSource1Unmatched:!1,topTree:"",source1ParentNames:[]}},methods:{scoreProgressCheckTimeout:function(){this.$store.state.scoresProgressData.scoreProgressTitle="Server is busy with automatching, please be patient",clearInterval(this.$store.state.scoresProgressData.progressReqTimer);var e=parseInt(this.$store.state.scoresProgressData.scoreProgressPercent);100!==e||100===e&&"final"!==this.$store.state.scoresProgressData.stage?(this.$store.state.scoresProgressData.requestCancelled=!0,this.$store.state.scoresProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreProgress()):this.$store.state.scoresProgressData.scoreProgressTitle="Please be patient, waiting for server response"},scoreSavingProgressCheckTimeout:function(){clearInterval(this.$store.state.scoreSavingProgressData.progressReqTimer),this.$store.state.scoreSavingProgressData.requestCancelled=!0,this.$store.state.scoreSavingProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreSavingStatus()},checkScoreProgress:function(){var e=this;this.$store.state.scoresProgressData.cancelTokenSource=se.source(),this.$store.state.scoresProgressData.progressReqTimer=setInterval(this.scoreProgressCheckTimeout,1e4);var t=this.$store.state.clientId;g.a.get("http://41.59.227.79:8083/progress/scoreResults/"+t,{cancelToken:this.$store.state.scoresProgressData.cancelTokenSource.token,onDownloadProgress:function(){clearInterval(e.$store.state.scoresProgressData.progressReqTimer)}}).then(function(t){if(clearInterval(e.$store.state.scoresProgressData.progressReqTimer),!t.data||!(t.data.status||t.data.percent||t.data.error||0!==e.$store.state.scoreResults.length))return e.$store.state.scoresProgressData.scoreDialog=!1,e.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="An error has occured while reaching out to server, please click recalculate scores to restart automatch",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,void e.clearProgress("scoreResults");if(null===t.data.status&&null===t.data.percent&&null===t.data.error&&e.$store.state.scoreResults.length>0)return e.$store.state.scoresProgressData.scoreDialog=!1,e.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",void e.clearProgress("scoreResults");if(e.$store.state.scoresProgressData.scoreProgressTitle=t.data.status,t.data.percent&&("percent"!==e.$store.state.scoresProgressData.progressType&&(e.$store.state.scoresProgressData.progressType="percent"),e.$store.state.scoresProgressData.scoreProgressPercent=t.data.percent,e.$store.state.scoresProgressData.stage=t.data.stage),"Done"===t.data.status&&0===e.$store.state.scoreResults.length){e.clearProgress("scoreResults"),e.loadingSource1Unmatched=!1,e.loadingSource2Unmatched=!1;var r=t.data.responseData;e.$store.state.source2UnMatched=r.source2Unmatched,e.$store.state.source1UnMatched=[],e.$store.state.matchedContent=[],e.$store.state.noMatchContent=[],e.$store.state.ignoreContent=[],e.$store.state.flagged=[],e.$store.state.scoreResults=r.scoreResults,e.$store.state.source2TotalRecords=r.source2TotalRecords,e.$store.state.source2TotalAllRecords=r.source2TotalAllRecords,e.$store.state.totalAllMapped=r.totalAllMapped,e.$store.state.totalAllFlagged=r.totalAllFlagged,e.$store.state.totalAllNoMatch=r.totalAllNoMatch,e.$store.state.totalAllIgnore=r.totalAllIgnore,e.$store.state.source1TotalAllNotMapped=r.source1TotalAllNotMapped,e.$store.state.source1TotalAllRecords=r.source1TotalAllRecords;var a=function(t){var r=e.$store.state.scoreResults[t];if(!e.source1ParentNames.find(function(e){return e===r.source1.parents})&&r.source1.parents[0]&&e.source1ParentNames.push({text:r.source1.parents[0]}),r.source1.hasOwnProperty("tag")&&"flagged"===r.source1.tag)e.$store.state.flagged.push({source1Name:r.source1.name,source1Id:r.source1.id,source1Code:r.source1.code,source1UUID:r.source1.uuid,source1IdHierarchy:r.source1.source1IdHierarchy,source1Parents:r.source1.parents,source2Name:r.exactMatch.name,source2Id:r.exactMatch.id,source2Code:r.exactMatch.code,source2UUID:r.exactMatch.uuid,source2IdHierarchy:r.exactMatch.source2IdHierarchy,mappedParentName:r.exactMatch.mappedParentName,source2Parents:r.exactMatch.parents,flagComment:r.source1.flagComment});else if(r.source1.hasOwnProperty("tag")&&"noMatch"===r.source1.tag){var a=r.source1.parents;e.$store.state.noMatchContent.push({source1Name:r.source1.name,source1Id:r.source1.id,source1Code:r.source1.code,source1UUID:r.source1.uuid,source2UUID:r.exactMatch.uuid,parents:a})}else if(r.source1.hasOwnProperty("tag")&&"ignore"===r.source1.tag){var s=r.source1.parents;e.$store.state.ignoreContent.push({source1Name:r.source1.name,source1Id:r.source1.id,source1Code:r.source1.code,source1UUID:r.source1.uuid,source2UUID:r.exactMatch.uuid,parents:s})}else if(p()(r.exactMatch).length>0)e.$store.state.matchedContent.push({source1Name:r.source1.name,source1Id:r.source1.id,source1Code:r.source1.code,source1UUID:r.source1.uuid,source1Parents:r.source1.parents,source2Name:r.exactMatch.name,source2Id:r.exactMatch.id,source2Code:r.exactMatch.code,source2UUID:r.exactMatch.uuid,source2IdHierarchy:r.exactMatch.source2IdHierarchy,mappedParentName:r.exactMatch.mappedParentName,source2Parents:r.exactMatch.parents,matchComments:r.exactMatch.matchComments});else if(r.multipleMatch.length>0){var i=!0,o=!1,n=void 0;try{for(var l,u=c()(r.multipleMatch);!(i=(l=u.next()).done);i=!0){var d=l.value;e.$store.state.multipleMatch.push({source1Name:r.source1.name,source1Id:r.source1.id,source1Code:r.source1.code,source1UUID:r.source1.uuid,source1Parents:r.source1.parents,source2Name:d.name,source2Id:d.id,source2Code:d.code,source2UUID:d.uuid,source2Parents:d.parents,canBreak:d.canBreak})}}catch(e){o=!0,n=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw n}}}else{for(var v=e.topTree,h=r.source1.parents.length-1;h>=0;h--)v[r.source1.parents[h]]||(v[r.source1.parents[h]]={}),v=v[r.source1.parents[h]];e.$store.state.source1UnMatched.push({name:r.source1.name,id:r.source1.id,code:r.source1.code,uuid:r.source1.uuid,parents:r.source1.parents})}};for(var s in e.$store.state.scoreResults)a(s);e.$store.state.source1Parents=e.topTree,e.$store.state.scoresProgressData.scoreDialog=!1,e.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status"}else e.checkScoreProgress()}).catch(function(t){e.$store.state.scoresProgressData.requestCancelled?e.$store.state.scoresProgressData.requestCancelled=!1:(clearInterval(e.$store.state.scoresProgressData.progressReqTimer),e.checkScoreProgress())})},checkScoreSavingStatus:function(){var e=this;this.$store.state.scoreSavingProgressData.cancelTokenSource=se.source(),this.$store.state.scoreSavingProgressData.progressReqTimer=setInterval(this.scoreSavingProgressCheckTimeout,1e4);var t=this.$store.state.clientId;g.a.get("http://41.59.227.79:8083/progress/scoreSavingStatus/"+t,{cancelToken:this.$store.state.scoreSavingProgressData.cancelTokenSource.token}).then(function(t){return clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),t.data&&(t.data.status||t.data.percent||t.data.error||!e.$store.state.scoreSavingProgressData.savingMatches)?t.data.status||t.data.percent||t.data.error||e.$store.state.scoreSavingProgressData.savingMatches?(t.data.percent&&(e.$store.state.scoreSavingProgressData.percent=t.data.percent),void(100===t.data.percent?(console.log("100"),e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,e.clearProgress("scoreSavingStatus")):e.checkScoreSavingStatus())):(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus")):(e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="An error has occured while checking saving status",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus"))}).catch(function(t){console.log("error"),e.$store.state.scoreSavingProgressData.requestCancelled?e.$store.state.scoreSavingProgressData.requestCancelled=!1:(clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),e.checkScoreSavingStatus())})},getScores:function(){var e=this,t=this.getSource1(),r=this.getSource2(),a=this.getDatasourceOwner();if(this.$store.state.source1UnMatched=[],this.$store.state.source2UnMatched=[],this.$store.state.matchedContent=[],this.$store.state.multipleMatch=[],this.$store.state.noMatchContent=[],this.$store.state.ignoreContent=[],this.$store.state.flagged=[],this.$store.state.source1TotalAllRecords=0,this.$store.state.totalAllMapped=0,this.$store.state.totalAllFlagged=0,this.$store.state.totalAllNoMatch=0,this.$store.state.totalAllIgnore=0,this.$store.state.source2TotalRecords=0,this.$store.state.scoreResults=[],t&&r){this.loadingSource1Unmatched=!0,this.loadingSource2Unmatched=!0,this.$store.state.scoresProgressData.scoreDialog=!0,this.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",this.$store.state.scoresProgressData.progressType="indeterminate";var i=this.$store.state.recoLevel,o=this.$store.state.totalSource1Levels,n=this.$store.state.totalSource2Levels,l=this.$store.state.clientId;this.topTree=this.$store.state.source1Parents.slice(0,this.$store.state.source1Parents.length),this.$store.state.levelArray=[];for(var c=1;c<this.$store.state.totalSource1Levels;c++){var u;c+1>this.$store.state.recoLevel||(u=this.translateDataHeader("source1",c),this.$store.state.levelArray.push({text:u,value:c+1}))}var d=this.$store.state.activePair.userID._id,v="source1="+t+"&source2="+r+"&source1Owner="+a.source1Owner+"&source2Owner="+a.source2Owner+"&source1LimitOrgId="+this.getLimitOrgIdOnActivePair().source1LimitOrgId+"&source2LimitOrgId="+this.getLimitOrgIdOnActivePair().source2LimitOrgId+"&totalSource1Levels="+o+"&totalSource2Levels="+n;v+="&recoLevel="+i+"&clientId="+l+"&userID="+d+"&parentConstraint="+s()(this.$store.state.config.generalConfig.reconciliation.parentConstraint),console.log("/esreconcile/?"+v),g.a.get("http://41.59.227.79:8083/esreconcile/?"+v).then(function(){e.checkScoreProgress()})}},getSource1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},getSource2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},getSource1Name:function(){return this.$store.state.activePair.source1.name},getSource2Name:function(){return this.$store.state.activePair.source2.name}},created:function(){var e=this;yr.$on("changeCSVHeaderNames",function(){e.$store.state.levelArray=[];for(var t=1;t<e.$store.state.totalSource1Levels;t++){var r;t+1>e.$store.state.recoLevel||(r=e.translateDataHeader("source1",t),e.$store.state.levelArray.push({text:r,value:t+1}))}})}},oe={validations:{editLocationName:{required:x.required}},mixins:[ie,M],data:function(){return{confirmDelete:!1,deleteLocationData:"",deleteSource:{name:"",value:""},editDialog:!1,editLocationName:"",editLocationId:"",editParents:[],editLocationParent:"",editSource:"",helpDialog:!1,lastLevel:[],headerText:{level2:"Level 1",level3:"Level 2",level4:"Level 3",level5:"Level 4",level6:"Level 5",level7:"Level 6",level8:"Level 7",level9:"Level 8",level10:"Level 9",facility:"Facility",latitude:"Latitude",longitude:"Longitude"},headers:[{text:"Level 1",value:"level1"},{text:"Level 2",value:"level2"},{text:"Level 3",value:"level3"},{text:"Level 4",value:"level4"},{text:"Facility",value:"facility"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],searchSource1:"",searchSource2:"",filterSource1:{text:"",level:""},filterSource2:{text:"",level:""},source2Pagination:{rowsPerPage:20},source1Pagination:{rowsPerPage:20},loadingSource1:!1,loadingSource2:!1,totalSource1Records:0,totalSource2Records:0,source2Grid:[],source1Grid:[],source1Tree:[],source2Tree:[],source1Start:1,source2Start:1,source1Count:10,source2Count:10,loadingSource1Tree:!1,loadingSource2Tree:!1,loadingSource1Grid:!1,loadingSource2Grid:!1,currentSource2Pagination:{},currentSource1Pagination:{},source1SelNodeId:!1,source2SelNodeId:!1,sourceOwner:""}},methods:{edit:function(e,t){var r=this.getDatasourceOwner();"source1"===t?(this.sourceOwner=r.source1Owner,this.editSource=this.source1):"source2"===t&&(this.sourceOwner=r.source1Owner,this.editSource=this.source2),this.editLocationName=e.facility,this.editLocationId=e.id,this.editDialog=!0;var a=p()(this.source2GridHeader).length,s=this.source2GridHeader[a-1].value;this.editLocationParent=e[s+"id"];var i=s.replace("level","");this.getLevelData(i)},saveEdit:function(){var e=this,t=new FormData;t.append("sourceOwner",this.sourceOwner),t.append("source",this.editSource),t.append("locationId",this.editLocationId),t.append("locationName",this.editLocationName),t.append("locationParent",this.editLocationParent),g.a.post("http://41.59.227.79:8083/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.editDialog=!1,e.getSource1Grid(!1),e.getSource2Grid(!1),e.getTree()}).catch(function(e){console.log(s()(e))})},deleteLocation:function(e,t,r){var a=this;if("requestConfirmation"===r){var s=this.getDatasourceOwner();"source1"===t?(this.sourceOwner=s.source1Owner,this.deleteSource={name:"source1",sourceId:this.$store.state.activePair.source1.id,sourceName:this.source1}):"source2"===t&&(this.sourceOwner=s.source2Owner,this.deleteSource={name:"source2",sourceId:this.$store.state.activePair.source2.id,sourceName:this.source2}),this.deleteLocationData=e,this.confirmDelete=!0}else{this.confirmDelete=!1;var i=this.$store.state.activePair.userID._id,o="id="+this.deleteLocationData.id+"&sourceId="+this.deleteSource.sourceId+"&sourceName="+this.deleteSource.sourceName+"&userID="+i+"&sourceOwner="+this.sourceOwner;g.a.delete("http://41.59.227.79:8083/deleteLocation?"+o).then(function(e){"source1"===a.deleteSource.name?a.getSource1Grid(!1):a.getSource2Grid(!1)})}},getLevelData:function(e){var t=this;g.a.get("http://41.59.227.79:8083/getLevelData/"+this.editSource+"/"+this.sourceOwner+"/"+e).then(function(e){t.editParents=e.data})},getSource1Grid:function(e){var t=this;if(this.source1){this.loadingSource1=!0,e||(e=""),this.loadingSource1Grid=!0;var r=this.getDatasourceOwner().source1Owner,a=this.getLimitOrgIdOnActivePair().source1LimitOrgId,s=this.$store.state.activePair.userID._id,i="/hierarchy?source="+this.source1+"&start="+this.source1Start+"&count="+this.source1Count+"&id="+e+"&userID="+s+"&sourceOwner="+r+"&sourceLimitOrgId="+a;g.a.get("http://41.59.227.79:8083"+i).then(function(e){if(t.loadingSource1Grid=!1,e.data){var r=t.source1Pagination,a=r.sortBy,s=r.descending;t.source1Pagination.sortBy&&(e.data.tree=e.data.grid.sort(function(e,t){var r=e[a],i=t[a];return s?r<i?1:r>i?-1:0:r<i?-1:r>i?1:0})),t.source1Grid=e.data.grid,t.totalSource1Records=e.data.total,t.source1Pagination.totalItems=e.data.total,t.currentSource1Pagination=re()({},t.source1Pagination),t.currentSource1Pagination.hasOwnProperty("descending")||(t.currentSource1Pagination.descending=!1),t.currentSource1Pagination.hasOwnProperty("page")||(t.currentSource1Pagination.page=1),t.currentSource1Pagination.hasOwnProperty("sortBy")||(t.currentSource1Pagination.sortBy="facility"),t.currentSource1Pagination.hasOwnProperty("totalItems")||(t.currentSource1Pagination.totalItems=e.data.total)}t.loadingSource1=!1})}},getSource2Grid:function(e){var t=this;if(this.source2){e||(e=""),this.loadingSource2=!0,this.loadingSource2Grid=!0;var r=this.getDatasourceOwner().source2Owner,a=this.getLimitOrgIdOnActivePair().source2LimitOrgId,s=this.$store.state.activePair.userID._id,i="/hierarchy?source="+this.source2+"&start="+this.source2Start+"&count="+this.source2Count+"&id="+e+"&userID="+s+"&sourceOwner="+r+"&sourceLimitOrgId="+a;g.a.get("http://41.59.227.79:8083"+i).then(function(e){if(t.loadingSource2Grid=!1,e.data){var r=t.source2Pagination,a=r.sortBy,s=r.descending;t.source2Pagination.sortBy&&(e.data.tree=e.data.grid.sort(function(e,t){var r=e[a],i=t[a];return s?r<i?1:r>i?-1:0:r<i?-1:r>i?1:0})),t.source2Grid=e.data.grid,t.totalSource2Records=e.data.total,t.source2Pagination.totalItems=e.data.total,t.currentSource2Pagination=re()({},t.source2Pagination),t.currentSource2Pagination.hasOwnProperty("descending")||(t.currentSource2Pagination.descending=!1),t.currentSource2Pagination.hasOwnProperty("page")||(t.currentSource2Pagination.page=1),t.currentSource2Pagination.hasOwnProperty("sortBy")||(t.currentSource2Pagination.sortBy="facility"),t.currentSource2Pagination.hasOwnProperty("totalItems")||(t.currentSource2Pagination.totalItems=e.data.total)}t.loadingSource2=!1})}},getTree:function(){var e=this;if(this.source1&&this.source2){var t=this.getDatasourceOwner().source2Owner,r=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.loadingSource2Tree=!0,g.a.get("http://41.59.227.79:8083/getTree/"+this.source2+"/"+t+"/"+r).then(function(t){e.loadingSource2Tree=!1,t.data&&(e.source2Tree=t.data)});var a=this.getDatasourceOwner().source1Owner,s=this.getLimitOrgIdOnActivePair().source1LimitOrgId;this.loadingSource1Tree=!0,g.a.get("http://41.59.227.79:8083/getTree/"+this.source1+"/"+a+"/"+s).then(function(t){e.loadingSource1Tree=!1,t.data&&(e.source1Tree=t.data)})}},source1NodeSelected:function(e){this.source1SelNodeId=e.id,this.getSource1Grid(e.id)},source2NodeSelected:function(e){this.source2SelNodeId=e.id,this.getSource2Grid(e.id)}},computed:{isDataset1Owner:function(){return this.getDatasourceOwner().source1Owner===this.$store.state.auth.userID},isDataset2Owner:function(){return this.getDatasourceOwner().source2Owner===this.$store.state.auth.userID},source2GridHeader:function(){var e=[];this.isDataset2Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source2Grid&&this.source2Grid.length>0)for(var r in this.source2Grid)t.length>0&&this.source2Grid[r].length>p()(t).length?t=this.source2Grid[r]:0===p()(t).length&&(t=this.source2Grid[r]);for(var a in t)this.headerText[a]&&e.push({text:this.headerText[a],value:a});return e},source1GridHeader:function(){var e=[];this.isDataset1Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source1Grid&&this.source1Grid.length>0)for(var r in this.source1Grid)t.length>0&&this.source1Grid[r].length>p()(t).length?t=this.source1Grid[r]:0===p()(t).length&&(t=this.source1Grid[r]);if(this.source1Grid&&this.source1Grid.length>0)for(var a in this.source1Grid[0])this.headerText[a]&&e.push({text:this.headerText[a],value:a});return e},source2Pages:function(){return null==this.source2Pagination.rowsPerPage||null==this.source2Pagination.totalItems?0:Math.ceil(this.source2Pagination.totalItems/this.source2Count)},source1Pages:function(){return null==this.source1Pagination.rowsPerPage||null==this.source1Pagination.totalItems?0:Math.ceil(this.source1Pagination.totalItems/this.source1Count)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},editLocationNameErrors:function(){var e=[];return this.$v.editLocationName.$dirty?(!this.$v.editLocationName.required&&e.push("Facility Name is required"),e):e}},watch:{source1Pagination:{handler:function(){if(this.currentSource1Pagination.sortBy!==this.source1Pagination.sortBy||this.currentSource1Pagination.descending!==this.source1Pagination.descending||this.currentSource1Pagination.page!==this.source1Pagination.page){var e=this.source1Pagination.page-1;this.source1Start=e*this.source1Count+1,this.getSource1Grid(this.source1SelNodeId)}},deep:!0},source2Pagination:{handler:function(){if(this.currentSource2Pagination.sortBy!==this.source2Pagination.sortBy||this.currentSource2Pagination.descending!==this.source2Pagination.descending||this.currentSource2Pagination.page!==this.source2Pagination.page){var e=this.source2Pagination.page-1;this.source2Start=e*this.source2Count+1,this.getSource2Grid(this.source2SelNodeId)}},deep:!0}},mounted:function(){this.getSource1Grid(!1),this.getSource2Grid(!1),this.getTree()},components:{"liquor-tree":ae.a}},ne={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[r("br"),r("br"),r("br"),e._v(" "),r("v-alert",{attrs:{type:"info",value:!0}},[r("b",[e._v("Wait for upload to finish ...")]),e._v(" "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),e._v(" "),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:"","text-xs-right":""}},[r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" About this page\n              ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n              This page let you view dat you have uploaded or synchronized from a remote server\n              "),r("v-list",[e._v("1. Use the tree to filter grid data")])],1)],1)],1),e._v(" "),r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[r("v-icon",[e._v("help")])],1),e._v(" "),r("span",[e._v("Help")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n            Warning\n          ")])],1),e._v(" "),r("v-card-text",[e._v("\n          Are you sure that you want to delete "+e._s(e.deleteLocationData.facility)+"\n        ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirmDelete=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.deleteLocation()}}},[e._v("Proceed")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[r("v-card",{attrs:{height:"500px"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n            Edit Location\n          ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("close")])],1),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-text-field",{attrs:{"error-messages":e.editLocationNameErrors,required:"",label:"Facility"},on:{blur:function(t){return e.$v.editLocationName.$touch()},change:function(t){return e.$v.editLocationName.$touch()}},model:{value:e.editLocationName,callback:function(t){e.editLocationName=t},expression:"editLocationName"}})],1),e._v(" "),r("v-flex",[r("v-select",{attrs:{items:e.editParents,box:"",label:"Parent"},model:{value:e.editLocationParent,callback:function(t){e.editLocationParent=t},expression:"editLocationParent"}})],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-toolbar",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:"","text-sm-left":""}},[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[r("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel\n                ")],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:"","text-sm-right":""}},[r("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n                ")],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[r("h3",{staticClass:"headline mb-0"},[e._v("Source 1 Data Tree")])]),e._v(" "),e.loadingSource1Tree?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:[r("v-card-text",[r("p",[r("liquor-tree",{ref:"source1Tree",attrs:{data:e.source1Tree,options:{}},on:{"node:selected":e.source1NodeSelected}})],1)])]],2)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[r("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Tree")])]),e._v(" "),e.loadingSource2Tree?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:[r("v-card-text",[r("p",[r("liquor-tree",{ref:"source2Tree",attrs:{data:e.source2Tree,options:{}},on:{"node:selected":e.source2NodeSelected}})],1)])]],2)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[r("h3",{staticClass:"headline mb-0"},[e._v("Source 1 Data Grid")])]),e._v(" "),e.loadingSource1Grid?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:[r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeader,items:e.source1Grid,search:e.searchSource1,pagination:e.source1Pagination,"total-items":e.totalSource1Records,loading:e.loadingSource1,"hide-actions":""},on:{"update:pagination":function(t){e.source1Pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.source1GridHeader,function(a,s){return r("td",{key:a.value+1,staticStyle:{"white-space":"nowrap",overflow:"hidden"}},[0===s&&e.isDataset1Owner?[r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.edit(t.item,"source1")}}},[e._v("edit")]),e._v(" |\n                      "),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.deleteLocation(t.item,"source1","requestConfirmation")}}},[e._v("delete")])]:[e._v("\n                      "+e._s(t.item[a.value])+"\n                    ")]],2)})}}],null,!1,2360727723)})],1),e._v(" "),r("div",{staticClass:"text-xs-center pt-2"},[r("v-pagination",{attrs:{length:e.source1Pages},model:{value:e.source1Pagination.page,callback:function(t){e.$set(e.source1Pagination,"page",t)},expression:"source1Pagination.page"}})],1)]],2)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[r("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Grid")])]),e._v(" "),e.loadingSource2Grid?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:[r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source2GridHeader,items:e.source2Grid,search:e.searchSource2,pagination:e.source2Pagination,"total-items":e.totalSource2Records,loading:e.loadingSource2,"hide-actions":""},on:{"update:pagination":function(t){e.source2Pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.source2GridHeader,function(a,s){return r("td",{key:a.value+2,staticStyle:{"white-space":"nowrap",overflow:"hidden"}},[0===s&&e.isDataset2Owner?[r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.edit(t.item,"source2")}}},[e._v("edit")]),e._v(" |\n                      "),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.deleteLocation(t.item,"source2","requestConfirmation")}}},[e._v("delete")])]:[e._v("\n                      "+e._s(t.item[a.value])+"\n                    ")]],2)})}}],null,!1,3193632648)})],1),e._v(" "),r("div",{staticClass:"text-xs-center pt-2"},[r("v-pagination",{attrs:{length:e.source2Pages},model:{value:e.source2Pagination.page,callback:function(t){e.$set(e.source2Pagination,"page",t)},expression:"source2Pagination.page"}})],1)]],2)],1)],1),e._v(" "),r("br"),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs1:"",xl10:""}},[r("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"FacilityReconScores"})}}},[r("v-icon",[e._v("find_in_page")]),e._v("\n          Reconcile\n        ")],1)],1)],1)]:e._e()],2)},staticRenderFns:[]};var le=r("VU/8")(oe,ne,!1,function(e){r("6k/U")},"data-v-945fc5c2",null).exports,ce={mixins:[ie,M],data:function(){return{loadingCSV:!1,loadingFHIR:!1,downloadDialog:!1,matchedDownloadData:"",unmatchedSource1DownloadData:"",unmatchedSource2DownloadData:"",downloadType:""}},methods:{closeDownloadDialog:function(){this.downloadDialog=!1,this.matchedDownloadData="",this.unmatchedSource1DownloadData="",this.unmatchedSource2DownloadData=""},matchedLocations:function(e){var t=this.$store.state.activePair.userID._id,r=this.getSource1(),a=this.getSource2(),i=this.getDatasourceOwner(),o=i.source1Owner,n=i.source2Owner,l=s()(this.$store.state.levelMapping.source1),c=s()(this.$store.state.levelMapping.source2),u={source1:r,source2:a,source1Owner:o,source2Owner:n,type:e,userID:t,source1LimitOrgId:this.getLimitOrgIdOnActivePair().source1LimitOrgId,source2LimitOrgId:this.getLimitOrgIdOnActivePair().source2LimitOrgId,levelMapping1:l,levelMapping2:c};return g.a.get("http://41.59.227.79:8083/matchedLocations",{params:u})},unMatchedLocations:function(e){var t=this.$store.state.activePair.userID._id,r=this.getDatasourceOwner(),a=r.source1Owner,s=r.source2Owner,i=this.$store.state.levelMapping.source1,o=this.$store.state.levelMapping.source2,n=this.getLimitOrgIdOnActivePair().source1LimitOrgId,l=this.getLimitOrgIdOnActivePair().source2LimitOrgId,c={source1:this.getSource1(),source2:this.getSource2(),source1Owner:a,source2Owner:s,type:e,userID:t,source1LimitOrgId:n,source2LimitOrgId:l,levelMapping1:i,levelMapping2:o};return g.a.get("http://41.59.227.79:8083/unmatchedLocations",{params:c})},csvExport:function(){this.loadingCSV=!0;var e=this;g.a.all([this.matchedLocations("CSV"),this.unMatchedLocations("CSV")]).then(g.a.spread(function(t,r){e.loadingCSV=!1,e.downloadDialog=!0,e.downloadType="csv",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=r.data.unmatchedSource1CSV,e.unmatchedSource2DownloadData=r.data.unmatchedSource2CSV}))},fhirExport:function(){this.loadingFHIR=!0;var e=this;g.a.all([this.matchedLocations("FHIR"),this.unMatchedLocations("FHIR")]).then(g.a.spread(function(t,r){e.loadingFHIR=!1,e.downloadDialog=!0,e.downloadType="fhir",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=r.data.unmatchedSource1mCSD,e.unmatchedSource2DownloadData=r.data.unmatchedSource2mCSD}))},downloadMatched:function(){var e=void 0,t=void 0;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.matchedDownloadData=s()(this.matchedDownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var r=t+escape(this.matchedDownloadData),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","matched"+this.getSource1()+this.getSource2()+"."+e),a.click()},downloadSource1Unmatched:function(){var e=void 0,t=void 0;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource1DownloadData=s()(this.unmatchedSource1DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var r=t+escape(this.unmatchedSource1DownloadData),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","unmatched"+this.getSource1()+"."+e),a.click()},downloadSource2Unmatched:function(){var e=void 0,t=void 0;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource2DownloadData=s()(this.unmatchedSource2DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var r=t+escape(this.unmatchedSource2DownloadData),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","unmatched"+this.getSource2()+"."+e),a.click()}}},ue={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xs":""}},[r("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.downloadDialog,callback:function(t){e.downloadDialog=t},expression:"downloadDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n          Select file type to download\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-icon",{on:{click:e.closeDownloadDialog}},[e._v("close")])],1),e._v(" "),r("v-card-text"),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{round:"",color:"info"},on:{click:e.downloadMatched}},[r("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("\n          Matched\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{round:"",color:"info"},on:{click:e.downloadSource1Unmatched}},[r("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("\n          Source1 Unmatched\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{round:"",color:"info"},on:{click:e.downloadSource2Unmatched}},[r("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("\n          Source2 Unmatched\n        ")],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-btn",{attrs:{color:"success",round:"",small:""},on:{click:e.csvExport}},[r("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v(" "),e.loadingCSV?r("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v("\n        CSV Export\n      ")],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-btn",{attrs:{color:"success",round:"",small:""},on:{click:e.fhirExport}},[r("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v(" "),e.loadingFHIR?r("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v("\n        FHIR Export\n      ")],1)],1)],1)],1)},staticRenderFns:[]},de=r("VU/8")(ce,ue,!1,null,null,null).exports,ve={mixins:[ie,M],data:function(){return{flagCommentDialog:!1,flagComment:"",helpDialog:!1,type:"",source2Id:"",source2Name:"",sort_arrow:"up",pagination:{sortBy:"score"},recoLevel:0,filtersForSrc1Unmatched:{byParent:"",bySrc1Unmatched:""},filtersForMatched:{byParentSrc1:"",byMatched:""},searchUnmatchedSource2:"",searchUnmatchedSource1:"",searchPotential:"",searchMatched:"",searchNotMatched:"",searchIgnore:"",searchFlagged:"",potentialMatches:[],showAllPotential:!1,alertText:"",alertTitle:"",alert:!1,source1Parents:{},source1Filter:{text:"",level:""},source1TreeUpdate:0,selectedSource1:{},selectedSource1Name:null,selectedSource1Id:null,selectedSource1UUID:null,selectedSource2UUID:null,selectedSource1Lat:null,selectedSource1Long:null,selectedSource1Code:null,selectedSource1Parents:[],dialog:!1,dialogWidth:"",source1UnmatchedHeaders:[{text:"Name",value:"name"},{text:"Code",value:"code"}],noMatchHeaders:[{text:this.$store.state.activePair.source1.name.toUpperCase()+" Location",value:"source1Name"},{text:this.$store.state.activePair.source1.name.toUpperCase()+" Code",value:"source1Code"},{text:"Parents",value:"parents"}],flaggedHeaders:[{text:this.$store.state.activePair.source1.name.toUpperCase()+" Location",value:"source1Name"},{text:this.$store.state.activePair.source1.name.toUpperCase()+" Code",value:"source1Code"},{text:this.$store.state.activePair.source2.name.toUpperCase()+" Location",value:"source2Name"},{text:this.$store.state.activePair.source2.name.toUpperCase()+" Code",value:"source2Code"},{text:"Comment",value:"flagComment"}]}},filters:{removeCountry:function(e){var t=e.slice(0);return t.splice(t.length-1,1),t},joinParents:function(e){return e.join("->")},joinParentsAndReverse:function(e){return[].concat(R()(e)).reverse().join("->")}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1),this.pagination.descending?this.sort_arrow="down":this.sort_arrow="up"},addListener:function(){var e=this;!function t(){e.$refs&&e.$refs.source1Tree?e.$refs.source1Tree.$on("node:selected",function(t){e.source1Filter.text=t.data.text;for(var r=1;t.parent;)t=t.parent,r++;e.source1Filter.level=r}):setTimeout(function(){t()},500)}()},levelChanged:function(e){this.$store.state.recoLevel!==e&&(this.$store.state.recoLevel=e,this.getScores(),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="1440px":this.dialogWidth="1190px")},getPotentialMatch:function(e){var t=this;this.potentialMatches=[],this.showAllPotential=!1;var r=!0,a=!1,s=void 0;try{for(var i,o=c()(this.$store.state.scoreResults);!(r=(i=o.next()).done);r=!0){var n=i.value;if(n.source1.id===e)for(var l in this.selectedSource1=n.source1,this.selectedSource1Name=n.source1.name,this.selectedSource1Parents=n.source1.parents,this.selectedSource1Lat=n.source1.lat,this.selectedSource1Long=n.source1.long,this.selectedSource1Code=n.source1.code,this.selectedSource1Id=n.source1.id,this.selectedSource1UUID=n.source1.uuid,n.potentialMatches){var u=function(e){var r=n.potentialMatches[l][e];return v=t.$store.state.matchedContent.find(function(e){return e.source2Id===r.id}),p=t.$store.state.flagged.find(function(e){return e.source2Id===r.id}),v?"continue":p?"continue":void t.potentialMatches.push({score:l,name:r.name,id:r.id,code:r.code,uuid:r.uuid,lat:r.lat,long:r.long,geoDistance:r.geoDistance,parents:r.parents,mappedParentName:r.mappedParentName})};for(var d in n.potentialMatches[l]){var v,p;u(d)}}}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}this.dialog=!0},potentialMatchComment:function(e){var t="";return this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&e.code!==this.selectedSource1.code&&(t&&(t+=", "),t+="Code differ"),e.name.toLowerCase()!==this.selectedSource1.name.toLowerCase()&&(t&&(t+=", "),t+="Names differ"),t},match:function(e,t,r,a,s){if(this.matchType=e,this.source2Id=t,this.source2Name=r,this.selectedSource2UUID=a,this.mappedParentName=s,null===a)return this.alert=!0,this.alertTitle="Information",void(this.alertText="Select "+this.$store.state.activePair.source2.name.toUpperCase()+" Location to match against "+this.$store.state.activePair.source1.name.toUpperCase()+" Location");"flag"===e?this.flagCommentDialog=!0:this.saveMatch()},flag:function(){var e=this;this.flagCommentDialog=!1,this.$store.state.progressTitle="Saving flag",this.$store.state.dynamicProgress=!0;var t=new FormData;t.append("source1Id",this.selectedSource1UUID),t.append("source2Id",this.source2Id),t.append("flagComment",this.flagComment),t.append("source1DB",this.getSource1()),g.a.post("http://41.59.227.79:8083/flag",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1;var r=null,a=void 0,s=void 0;for(var i in e.$store.state.source2UnMatched)e.$store.state.source2UnMatched[i].id===e.source2Id&&(r=e.$store.state.source2UnMatched[i].parents,a=e.$store.state.source2UnMatched[i].uuid,s=e.$store.state.source2UnMatched[i].code,e.$store.state.source2UnMatched.splice(i,1));for(var o in e.$store.state.source1UnMatched)e.$store.state.source1UnMatched[o].uuid===e.selectedSource1UUID&&(++e.$store.state.totalAllFlagged,e.$store.state.flagged.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1Code:e.$store.state.source1UnMatched[o].code,source1UUID:e.selectedSource1UUID,source1Parents:e.$store.state.source1UnMatched[o].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2Code:s,source2UUID:a,mappedParentName:e.mappedParentName,source2Parents:r,flagComment:e.flagComment}),e.$store.state.source1UnMatched.splice(o,1));e.flagComment="",e.selectedSource1Id=null,e.selectedSource1UUID=null,e.selectedSource1Name=null,e.dialog=!1}).catch(function(t){e.flagComment="",e.$store.state.dynamicProgress=!1,e.alert=!0,e.alertTitle="Error",e.alertText=t.response.data.error,e.selectedSource1Id=null,e.selectedSource1UUID=null,e.selectedSource1Name=null,e.dialog=!1})},saveMatch:function(e){var t=this;this.flagCommentDialog=!1,this.$store.state.progressTitle="Saving match",this.$store.state.dynamicProgress=!0;var r=new FormData;r.append("source1Id",this.selectedSource1UUID),r.append("source2Id",this.selectedSource2UUID),r.append("source1DB",this.getSource1()),g.a.post("http://41.59.227.79:8083/match",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(r){t.$store.state.dynamicProgress=!1;var a=null,s=void 0;for(var i in t.$store.state.source2UnMatched)t.$store.state.source2UnMatched[i].uuid===t.selectedSource2UUID&&(a=t.$store.state.source2UnMatched[i].parents,s=t.$store.state.source2UnMatched[i].code,t.$store.state.source2UnMatched.splice(i,1));for(var o in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[o].uuid===t.selectedSource1UUID&&(++t.$store.state.totalAllMapped,t.$store.state.matchedContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,source1Code:t.$store.state.source1UnMatched[o].code,source1UUID:t.selectedSource1UUID,source1Parents:t.$store.state.source1UnMatched[o].parents,source2Name:t.source2Name,source2Id:t.source2Id,source2Code:s,source2UUID:t.selectedSource2UUID,mappedParentName:t.mappedParentName,source2Parents:a,matchComments:r.data.matchComments}),t.$store.state.source1UnMatched.splice(o,1));if("flag"===e)for(var n in t.$store.state.flagged)t.$store.state.flagged[n].source1UUID===t.selectedSource1UUID&&(t.$store.state.matchedContent.push({source1Name:t.$store.state.flagged[n].source1Name,source1Id:t.$store.state.flagged[n].source1Id,source1Code:t.$store.state.flagged[n].source1Code,source1UUID:t.$store.state.flagged[n].source1UUID,source1Parents:t.$store.state.flagged[n].source1Parents,source2Name:t.$store.state.flagged[n].source2Name,source2Id:t.$store.state.flagged[n].source2Id,source2Code:t.$store.state.flagged[n].source2Code,source2UUID:t.selectedSource2UUID,source2IdHierarchy:t.$store.state.flagged[n].source2IdHierarchy,mappedParentName:t.$store.state.flagged[n].mappedParentName,source2Parents:t.$store.state.flagged[n].source2Parents}),t.$store.state.flagged.splice(n,1),++t.$store.state.totalAllMapped,--t.$store.state.totalAllFlagged);t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource2UUID=null,t.selectedSource1Name=null,t.dialog=!1}).catch(function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource2UUID=null,t.selectedSource1Name=null,t.dialog=!1})},acceptFlag:function(e,t){this.selectedSource1UUID=e,this.selectedSource2UUID=t,this.saveMatch("flag")},breakMatch:function(e,t,r){var a=this;this.$store.state.progressTitle="Breaking match",this.$store.state.dynamicProgress=!0;var s=new FormData;s.append("source1Id",e),s.append("source2Id",t),g.a.post("http://41.59.227.79:8083/breakMatch/"+this.getSource1(),s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(a.$store.state.dynamicProgress=!1,"doubleMatch"===r)return a.getScores();for(var s in a.alert=!0,a.alertTitle="Information",a.alertText="Scores for this Location may not be available unless you recalculate scores",a.$store.state.matchedContent)a.$store.state.matchedContent[s].source1UUID===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.matchedContent[s].source1Name,id:a.$store.state.matchedContent[s].source1Id,code:a.$store.state.matchedContent[s].source1Code,uuid:a.$store.state.matchedContent[s].source1UUID,parents:a.$store.state.matchedContent[s].source1Parents}),a.$store.state.source2UnMatched.push({name:a.$store.state.matchedContent[s].source2Name,id:a.$store.state.matchedContent[s].source2Id,code:a.$store.state.matchedContent[s].source2Code,uuid:a.$store.state.matchedContent[s].source2UUID,mappedParentName:a.$store.state.matchedContent[s].mappedParentName,parents:a.$store.state.matchedContent[s].source2Parents}),a.$store.state.matchedContent.splice(s,1),--a.$store.state.totalAllMapped)}).catch(function(e){a.$store.state.dynamicProgress=!1,a.alert=!0,a.alertTitle="Error",a.alertText=e.response.data.error,a.selectedSource1Id=null,a.selectedSource1UUID=null,a.selectedSource1Name=null,a.dialog=!1,console.log(e)})},unFlag:function(e){var t=this;this.$store.state.progressTitle="Unflagging match",this.$store.state.dynamicProgress=!0;var r=new FormData;r.append("source1Id",e),r.append("source1DB",this.getSource1()),g.a.post("http://41.59.227.79:8083/unflag",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(r){for(var a in t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Information",t.alertText="Scores for this Location may not be available unless you recalculate scores",t.$store.state.flagged)t.$store.state.flagged[a].source1UUID===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.flagged[a].source1Name,id:t.$store.state.flagged[a].source1Id,code:t.$store.state.flagged[a].source1Code,uuid:t.$store.state.flagged[a].source1UUID,parents:t.$store.state.flagged[a].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.flagged[a].source2Name,id:t.$store.state.flagged[a].source2Id,code:t.$store.state.flagged[a].source2Code,uuid:t.$store.state.flagged[a].source2UUID,mappedParentName:t.$store.state.flagged[a].mappedParentName,parents:t.$store.state.flagged[a].source2Parents}),t.$store.state.flagged.splice(a,1),--t.$store.state.totalAllFlagged)}).catch(function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)})},breakNoMatch:function(e,t){var r=this;this.$store.state.progressTitle="Breaking no match",this.$store.state.dynamicProgress=!0;var a=new FormData;a.append("source1Id",e),a.append("recoLevel",this.$store.state.recoLevel),a.append("totalLevels",this.$store.state.totalSource1Levels);var s=this.$store.state.activePair.userID._id;g.a.post("http://41.59.227.79:8083/breakNoMatch/"+t+"/"+this.getSource1()+"/"+this.getSource2()+"/"+s,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){if(r.$store.state.dynamicProgress=!1,r.alert=!0,r.alertTitle="Information",r.alertText="Scores for this Location may not be available unless you recalculate scores","nomatch"===t)for(var s in r.$store.state.noMatchContent)r.$store.state.noMatchContent[s].source1UUID===e&&(r.$store.state.source1UnMatched.push({name:r.$store.state.noMatchContent[s].source1Name,id:r.$store.state.noMatchContent[s].source1Id,code:r.$store.state.noMatchContent[s].source1Code,uuid:r.$store.state.noMatchContent[s].source1UUID,parents:r.$store.state.noMatchContent[s].parents}),r.$store.state.noMatchContent.splice(s,1),--r.$store.state.totalAllNoMatch);else if("ignore"===t)for(var i in r.$store.state.ignoreContent)r.$store.state.ignoreContent[i].source1UUID===e&&(r.$store.state.source1UnMatched.push({name:r.$store.state.ignoreContent[i].source1Name,id:r.$store.state.ignoreContent[i].source1Id,code:r.$store.state.ignoreContent[i].source1Code,uuid:r.$store.state.ignoreContent[i].source1UUID,parents:r.$store.state.ignoreContent[i].parents}),r.$store.state.ignoreContent.splice(i,1),--r.$store.state.totalAllIgnore)}).catch(function(e){r.$store.state.dynamicProgress=!1,r.alert=!0,r.alertTitle="Error",r.alertText=e.response.data.error,r.selectedSource1Id=null,r.selectedSource1UUID=null,r.selectedSource1Name=null,r.dialog=!1,console.log(e)})},noMatch:function(e){var t=this;this.$store.state.progressTitle="Saving as no match",this.$store.state.dynamicProgress=!0;var r=this.$store.state.activePair.userID._id,a=this.getDatasourceOwner(),s=a.source1Owner,i=a.source2Owner,o=new FormData;o.append("source1Id",this.selectedSource1UUID),o.append("recoLevel",this.$store.state.recoLevel),o.append("totalLevels",this.$store.state.totalSource1Levels),g.a.post("http://41.59.227.79:8083/noMatch/"+e+"/"+this.getSource1()+"/"+this.getSource2()+"/"+s+"/"+i+"/"+r,o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){if(t.$store.state.dynamicProgress=!1,"nomatch"===e)for(var r in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[r].id===t.selectedSource1Id&&(t.$store.state.noMatchContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,source1UUID:t.selectedSource1UUID,parents:t.$store.state.source1UnMatched[r].parents}),++t.$store.state.totalAllNoMatch,t.$store.state.source1UnMatched.splice(r,1));else if("ignore"===e)for(var a in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[a].id===t.selectedSource1Id&&(t.$store.state.ignoreContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,source1UUID:t.selectedSource1UUID,parents:t.$store.state.source1UnMatched[a].parents}),++t.$store.state.totalAllIgnore,t.$store.state.source1UnMatched.splice(a,1));t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource1Name=null}).catch(function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource1Name=null})},back:function(){this.searchPotential="",this.dialog=!1},customFilter:function(e,t,r,a){var s=new this.$MultiFilters(e,t,r,a);return s.registerFilter("bySrc1Unmatched",function(e,t){return e?t.filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())},e):t}),s.registerFilter("byMatched",function(e,t){return e?t.filter(function(t){return t.source1Name.toLowerCase().includes(e.toLowerCase())},e):t}),s.registerFilter("byParent",function(e,t){return e?t.filter(function(t){return t.parents&&t.parents[0]&&t.parents[0].toLowerCase()===e.toLowerCase()},e):t}),s.registerFilter("byParentSrc1",function(e,t){return e?t.filter(function(t){return t.source1Parents&&t.source1Parents[0]&&t.source1Parents[0].toLowerCase()===e.toLowerCase()},e):t}),s.runFilters()},filterSrc1Unmatched:function(e){this.filtersForSrc1Unmatched=this.$MultiFilters.updateFilters(this.filtersForSrc1Unmatched,{bySrc1Unmatched:e})},filterMatched:function(e){this.filtersForMatched=this.$MultiFilters.updateFilters(this.filtersForMatched,{byMatched:e})},filterByParent:function(e){this.filtersForSrc1Unmatched=this.$MultiFilters.updateFilters(this.filtersForSrc1Unmatched,{byParent:e}),this.filtersForMatched=this.$MultiFilters.updateFilters(this.filtersForMatched,{byParentSrc1:e})}},computed:{nextLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel)},set:function(e){}},currentLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel-1)},set:function(e){}},matchedHeaders:function(){return[{text:this.$store.state.activePair.source1.name.toUpperCase()+" Location",value:"source1Name"},{text:this.$store.state.activePair.source1.name.toUpperCase()+" Code",value:"source1Code"},{text:this.$store.state.activePair.source2.name.toUpperCase()+" Location",value:"source2Name"},{text:this.$store.state.activePair.source2.name.toUpperCase()+" Code",value:"source2Code"},{text:"Match Comment",value:"matchComments"}]},source1GridHeaders:function(){var e=[{text:"Name",value:"name"}];if(this.$store.state.source1UnMatched.length>0)for(var t=this.$store.state.source1UnMatched[0].parents.length;t>0;t--)e.push({text:"Level "+t,value:"level"+(t+1)});return e.splice(1,1),e.push({text:"Code",value:"code"}),e},potentialHeaders:function(){var e=[];return e.push({sortable:!1},{text:this.$store.state.activePair.source2.name.toUpperCase()+" Location",value:"name",sortable:!1},{text:"Code",value:"code",sortable:!1},{text:"Parent",value:"source2Parent",sortable:!1}),e.push({text:"Score",value:"score"}),e},potentialAvailable:function(){return null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length},allPotentialMatches:function(){var e=this;if(null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length&&this.showAllPotential){var t=[],r=function(r){e.potentialMatches.find(function(e){return e.id===r.id})||(r.score="N/A",t.push(r))},a=!0,s=!1,i=void 0;try{for(var o,n=c()(this.$store.state.source2UnMatched);!(a=(o=n.next()).done);a=!0){r(o.value)}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}return this.potentialMatches.concat(t)}return this.potentialMatches},source1Tree:function(){var e=this;if(this.addListener(),"vims"!==this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source1.id}).source){var t=[];return 1===p()(this.$store.state.source1Parents).length&&"null"===p()(this.$store.state.source1Parents)[0]?t:(function e(t,r){for(var a in t){var s={text:a,children:[]};e(t[a],s.children),0===s.children.length&&delete s.children,r.push(s)}}(this.$store.state.source1Parents,t),this.source1TreeUpdate++,t)}},source1Grid:function(){var e=this;if(this.$store.state.source1UnMatched.length>0&&""!==this.source1Filter.level){var t=this.$store.state.source1UnMatched[0].parents.length-this.source1Filter.level;return this.$store.state.source1UnMatched.filter(function(r){return r.parents[t]===e.source1Filter.text})}return this.$store.state.source1UnMatched},goNextLevel:function(){return this.$store.state.recoLevel<this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length&&null!==this.$store.state.matchedContent&&0!==this.$store.state.matchedContent.length?"yes":"no"},lastLevelDone:function(){return this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length?"yes":"no"},source1TotalRecords:function(){return this.$store.state.scoreResults?this.$store.state.scoreResults.length:0},source1TotalMatched:function(){return this.$store.state.matchedContent?this.$store.state.matchedContent.length:0},source1PercentMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalMatched/this.source1TotalRecords).toFixed(1))},source1TotalUnMatched:function(){return this.source1TotalRecords-this.source1TotalMatched},source1PercentUnMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalUnMatched/this.source1TotalRecords).toFixed(1))},totalFlagged:function(){return this.$store.state.flagged?this.$store.state.flagged.length:0},source1PercentFlagged:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1TotalNoMatch:function(){return this.$store.state.noMatchContent?this.$store.state.noMatchContent.length:0},source1TotalIgnore:function(){return this.$store.state.ignoreContent?this.$store.state.ignoreContent.length:0},source1PercentNoMatch:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.noMatchContent?parseFloat((100*this.$store.state.noMatchContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1PercentIgnore:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.ignoreContent?parseFloat((100*this.$store.state.ignoreContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source2TotalRecords:function(){return this.$store.state.source2TotalRecords?this.$store.state.source2TotalRecords:0},source2TotalUnmatched:function(){return this.source2TotalRecords>0&&this.$store.state.matchedContent?parseInt(this.source2TotalRecords)-parseInt(this.$store.state.matchedContent.length):0},source2PercentUnmatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalUnmatched/this.$store.state.source2TotalRecords).toFixed(1))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalRecords?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.source2TotalRecords).toFixed(1)):0},source2TotalMatched:function(){return this.source1TotalMatched},source2PercentMatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalMatched/this.$store.state.source2TotalRecords).toFixed(1))},source2NotInSource1:function(){var e=this.source2TotalRecords-this.source1TotalRecords;return e<0?0:e},source2PercentNotInSource1:function(){if(0===this.source2NotInSource1)return 0;var e=parseFloat((100*this.source2NotInSource1/this.source2TotalRecords).toFixed(1));return parseFloat(e)}},created:function(){var e=this;this.$store.state.recalculateScores&&(this.$store.state.recalculateScores=!1,this.getScores()),yr.$on("changeCSVHeaderNames",function(){var t=e.translateDataHeader("source1",e.$store.state.recoLevel);e.nextLevelText=t,e.currentLevelText=t}),this.addListener(),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="auto":this.dialogWidth="1190px"},components:{"liquor-tree":ae.a,appRecoExport:de}},pe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[r("br"),r("br"),r("br"),e._v(" "),r("v-alert",{attrs:{type:"info",value:!0}},[r("b",[e._v("Wait for upload to finish ...")]),e._v(" "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),e._v(" "),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?r("v-container",{attrs:{fluid:"","grid-list-lg":""}},[r("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"350"},model:{value:e.$store.state.scoresProgressData.scoreDialog,callback:function(t){e.$set(e.$store.state.scoresProgressData,"scoreDialog",t)},expression:"$store.state.scoresProgressData.scoreDialog"}},[r("v-card",{attrs:{color:"white",dark:""}},[r("v-card-text",[r("center",[r("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressTitle))]),r("br"),e._v(" "),"percent"==e.$store.state.scoresProgressData.progressType?r("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.$store.state.scoresProgressData.scoreProgressPercent,color:"primary"}},[r("v-avatar",{attrs:{color:"indigo",size:"50px"}},[r("span",{staticClass:"white--text"},[r("b",[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressPercent)+"%")])])])],1):e._e(),e._v(" "),"indeterminate"==e.$store.state.scoresProgressData.progressType?r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n            "+e._s(e.alertTitle)+"\n          ")])],1),e._v(" "),r("v-card-text",[e._v("\n          "+e._s(e.alertText)+"\n        ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"success"},on:{click:function(t){e.alert=!1}}},[e._v("OK")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.flagCommentDialog,callback:function(t){e.flagCommentDialog=t},expression:"flagCommentDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n            Add comment for this flag if any\n          ")])],1),e._v(" "),r("v-card-text",[r("v-textarea",{attrs:{"auto-grow":"",box:"",color:"deep-purple",label:"Flag Comment",rows:"1"},model:{value:e.flagComment,callback:function(t){e.flagComment=t},expression:"flagComment"}})],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"success"},on:{click:e.flag}},[e._v("Continue")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",transition:"scale-transition",width:e.dialogWidth},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",{attrs:{width:e.dialogWidth}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n            Matching "+e._s(e.selectedSource1Name)+"\n          ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",color:"yellow"},model:{value:e.searchPotential,callback:function(t){e.searchPotential=t},expression:"searchPotential"}}),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.back(t)}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-title",[e._v("\n          Parents:\n          "),r("b",[e._v(e._s(e._f("joinParentsAndReverse")(e.selectedSource1Parents)))]),e._v(" "),r("v-spacer"),e._v("\n          Code: "),r("b",[e._v(e._s(e.selectedSource1Code))]),e._v(" "),r("v-spacer"),e._v(" "),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?[e._v("\n            Latitude:\n            "),r("b",[e._v(e._s(e.selectedSource1Lat))]),e._v(" "),r("v-spacer"),e._v("\n            Longitude:\n            "),r("b",[e._v(e._s(e.selectedSource1Long))]),e._v(" "),r("v-spacer")]:e._e()],2),e._v(" "),r("v-card-text",[r("b",[e._v("Potential Matches")]),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.potentialHeaders,items:e.allPotentialMatches,search:e.searchPotential,pagination:e.pagination,"sort-desc":[!1]},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"headers",fn:function(t){return[r("tr",[e._l(e.potentialHeaders,function(t){return["Score"==t.text?r("th",{key:t.text,staticClass:"column sortable active",attrs:{align:"left"},on:{click:function(r){return e.changeSort(t.value)}}},["up"==e.sort_arrow?r("v-icon",{attrs:{small:""}},[e._v("arrow_upward")]):r("v-icon",{attrs:{small:""}},[e._v("arrow_downward")]),e._v("\n                    "+e._s(t.text)+"\n                    "),r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[r("v-icon",[e._v("help")])],1),e._v(" "),r("span",[e._v("The higher the score, the better the match")])],1)],1):r("th",{key:t.text,attrs:{align:"left"}},[e._v("\n                    "+e._s(t.text)+"\n                  ")])]})],2)]}},{key:"items",fn:function(t){return[r("tr",[r("td",[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",color:"error",small:""},nativeOn:{click:function(r){return e.match("flag",t.item.id,t.item.name,t.item.uuid,t.item.mappedParentName)}},slot:"activator"},[r("v-icon",{attrs:{dark:"",left:""}},[e._v("notification_important")]),e._v("Flag\n                    ")],1),e._v(" "),r("span",[e._v("Mark the selected item as a match to be reviewed")])],1),e._v(" "),r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",color:"primary",small:"",dark:""},nativeOn:{click:function(r){return e.match("match",t.item.id,t.item.name,t.item.uuid)}},slot:"activator"},[r("v-icon",{attrs:{left:""}},[e._v("thumb_up")]),e._v("Save Match\n                    ")],1),e._v(" "),r("span",[e._v("Save the selected item as a match")])],1)],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.code))]),e._v(" "),r("td",[e._v(e._s(e._f("joinParentsAndReverse")(t.item.parents)))]),e._v(" "),r("td",[e._v(e._s(t.item.score))]),e._v(" "),r("td",[e._v(e._s(e.potentialMatchComment(t.item)))])])]}}],null,!1,121589607)})],1),e._v(" "),r("v-card-actions",{staticStyle:{float:"center"}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[e.potentialAvailable?r("v-btn",{staticStyle:{color:"white"},attrs:{slot:"activator",color:"teal darken-6"},on:{click:function(t){e.showAllPotential=!e.showAllPotential}},slot:"activator"},[e.showAllPotential?[e._v("Show Scored Suggestions")]:[e._v("Show All Suggestions")]],2):e._e(),e._v(" "),e.showAllPotential?r("span",[e._v("Limit to only scored suggestions")]):r("span",[e._v("See all possible choices ignoring the score")])],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs6:"","text-sm-right":""}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{staticStyle:{color:"white"},attrs:{slot:"activator",color:"orange darken-2"},nativeOn:{click:function(t){return e.back(t)}},slot:"activator"},[r("v-icon",{attrs:{dark:"",left:""}},[e._v("arrow_back")]),e._v("Back\n                ")],1),e._v(" "),r("span",[e._v("Return without saving")])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-autocomplete",{attrs:{items:e.source1ParentNames,label:"Filter by District",clearable:""},on:{change:e.filterByParent}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs2:""}},[e.$store.state.scoreSavingProgressData.savingMatches?[e._v("\n          Saving matches for "+e._s(e.translateDataHeader("source1",e.$store.state.recoLevel-2))+"\n          "),r("v-progress-linear",{attrs:{color:"error",width:"20",height:"20",value:e.$store.state.scoreSavingProgressData.percent}},[r("center",[r("span",{staticClass:"green--text"},[r("b",[e._v(e._s(e.$store.state.scoreSavingProgressData.percent)+"%")])])])],1)]:r("v-btn",{attrs:{slot:"activator",color:"primary",dark:"",round:""},on:{click:e.getScores},slot:"activator"},[r("v-icon",[e._v("repeat_one")]),e._v(" Recalculate Scores\n        ")],1)],2),e._v(" "),r("v-flex",{attrs:{xs1:"","text-xs-right":""}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[r("v-icon",[e._v("help")])],1),e._v(" "),r("span",[e._v("Help")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" About this page\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n          This page let you map source 1 data with those in source2\n          "),r("v-list",[e._v("\n            1. Source 1 refer to the data source name selected as source 1 under data source pair section\n          ")]),e._v(" "),r("v-list",[e._v("\n            2. Source 2 refer to the data source name selected as source 2 under data source pair section\n          ")]),e._v(" "),r("v-list",[e._v("\n            3. After breaking a match, you will need to recalculate scores for the app to load potential matches of the broken location\n          ")]),e._v(" "),r("v-list",[e._v("\n            4. FLAGGED Locations are the locations that will need to be reviewed before they are saved as matches\n          ")]),e._v(" "),r("v-list",[e._v("\n            5. NO MATCHES - these are locations that do not matches anything from source 2\n          ")])],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs2:"",right:""}},[r("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[r("b",[e.$store.state.activePair.source1&&Object.keys(e.$store.state.activePair.source1).length>0?[e._v("\n              "+e._s(e.$store.state.activePair.source1.name.toUpperCase())+"\n            ")]:e._e(),e._v(" Reconciliation Status")],2),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("b",[e._v("Matched")])]),e._v(" "),r("v-flex",{attrs:{"align-center":""}},[r("center",[r("b",[e._v(e._s(e.source1TotalMatched)+"/"+e._s(e.source1TotalRecords))])])],1),e._v(" "),r("v-flex",[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMatched,color:"green"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source1PercentMatched)+"%")])])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{"align-center":""}},[r("b",[e._v("Unmatched")])]),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("b",[e._v(e._s(e.source1TotalUnMatched)+"/"+e._s(e.source1TotalRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentUnMatched,color:"red"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source1PercentUnMatched)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{"align-center":""}},[r("b",[e._v("Flagged")])]),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source1TotalRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"orange"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1)],1)]),e._v(" "),r("v-flex",{attrs:{xs4:"","child-flex":""}},[r("v-card",{attrs:{color:"green lighten-2"}},[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n            Unmatched in\n            "),Object.keys(e.$store.state.activePair.source1).length>0?[e._v("\n              "+e._s(e.$store.state.activePair.source1.name.toUpperCase())+"\n            ")]:e._e(),e._v(" "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},on:{input:e.filterSrc1Unmatched}})],2),e._v(" "),e.loadingSource1Unmatched?[r("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[r("liquor-tree",{key:e.source1TreeUpdate,ref:"source1Tree",attrs:{data:e.source1Tree}}),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeaders,items:e.source1Grid,search:e.filtersForSrc1Unmatched,"custom-filter":e.customFilter,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return["Done"===e.$store.state.recoStatus?r("td",{key:t.item.id},[e._v(e._s(t.item.name))]):r("td",{key:t.item.id,staticStyle:{cursor:"pointer"},on:{click:function(r){return e.getPotentialMatch(t.item.id)}}},[e._v("\n                  "+e._s(t.item.name)+" "),r("br"),e._v("  "+e._s(t.item.parents.join("->"))+"\n                ")]),e._v(" "),r("td",[e._v(e._s(t.item.code))]),e._v(" "),e._l(t.item.parents,function(a,s){return s!=t.item.parents.length-1?r("td",{key:t.item.id+s},[e._v("\n                  "+e._s(a)+"\n                ")]):e._e()})]}}],null,!1,1822418174)})]],2)],1),e._v(" "),r("v-flex",{attrs:{xs4:""}},[r("v-card",{attrs:{color:"blue lighten-2",dark:""}},[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n            Unmatched in\n            "),e.$store.state.activePair.source2&&Object.keys(e.$store.state.activePair.source2).length>0?[e._v("\n              "+e._s(e.$store.state.activePair.source2.name.toUpperCase())+"\n            ")]:e._e(),e._v(" "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource2,callback:function(t){e.searchUnmatchedSource2=t},expression:"searchUnmatchedSource2"}})],2),e._v(" "),e.loadingSource2Unmatched?[r("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1UnmatchedHeaders,items:e.$store.state.source2UnMatched,search:e.searchUnmatchedSource2,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.name)+" "),r("br"),e._v("  "+e._s(e._f("joinParentsAndReverse")(t.item.parents)))]),e._v(" "),r("td",[e._v(e._s(t.item.code))])]}}],null,!1,196085968)})]],2)],1),e._v(" "),r("v-flex",{attrs:{xs2:"",right:""}},[r("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[r("b",[Object.keys(e.$store.state.activePair.source2).length>0?[e._v("\n              "+e._s(e.$store.state.activePair.source2.name.toUpperCase())+"\n            ")]:e._e(),e._v("\n             Reconciliation Status\n          ")],2),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{"align-center":""}},[r("b",[e._v("Matched")])]),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("b",[e._v(e._s(e.source2TotalMatched)+"/"+e._s(e.source2TotalRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMatched,color:"green"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source2PercentMatched)+"%")])])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Unmatched")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.source2TotalUnmatched)+"/"+e._s(e.source2TotalRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentUnmatched,color:"red"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source2PercentUnmatched)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{"align-center":""}},[r("b",[e._v("Flagged")])]),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source2TotalRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"orange"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{"align-center":""}},[r("b",[e._v("\n                    Not in\n                    "),Object.keys(e.$store.state.activePair.source1).length>0?[e._v("\n                      "+e._s(e.$store.state.activePair.source1.name.toUpperCase())+"\n                    ")]:e._e()],2)]),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("b",[e._v(e._s(e.source2NotInSource1))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentNotInSource1,color:"red"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source2PercentNotInSource1)+"%")])])],1)],1)],1)],1)],1)],1)],1)])],1),e._v(" "),r("v-layout",{attrs:{column:"",wrap:""}},[r("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"",color:"cyan"}},[r("v-tabs-slider",{attrs:{color:"red"}}),e._v(" "),r("v-tab",{key:"match"},[e._v("\n          MATCHED ("+e._s(e.source1TotalMatched)+")\n          "),r("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_up")])],1),e._v(" "),r("v-tab",{key:"double"},[e._v("\n          DOUBLE MATCHED ("+e._s(e.$store.state.multipleMatch.length)+")\n          "),r("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_up")])],1),e._v(" "),r("v-tab",{key:"flagged"},[e._v("\n          FLAGGED ("+e._s(e.totalFlagged)+")\n          "),r("v-icon",{attrs:{color:"white",right:""}},[e._v("notification_important")])],1),e._v(" "),r("v-tab-item",{key:"match"},[null!=e.$store.state.matchedContent?[r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},on:{input:e.filterMatched}}),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.$store.state.matchedContent,search:e.filtersForMatched,"custom-filter":e.customFilter},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name)+" "),r("br"),e._v("  "+e._s(t.item.source1Parents.join("->")))]),e._v(" "),r("td",[e._v(e._s(t.item.source1Code))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Name)+" "),r("br"),e._v("  "+e._s(e._f("joinParentsAndReverse")(t.item.source2Parents)))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Code))]),e._v(" "),t.item.matchComments?r("td",[e._v(e._s(t.item.matchComments.join(", ")))]):r("td"),e._v(" "),r("td",["Done"==e.$store.state.recoStatus?r("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(r){return e.breakMatch(t.item.source1UUID,t.item.source2UUID)}}},[r("v-icon",[e._v("undo")]),e._v("Break Match\n                  ")],1):r("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(r){return e.breakMatch(t.item.source1UUID,t.item.source2UUID)}}},[r("v-icon",[e._v("undo")]),e._v("Break Match\n                  ")],1)],1)]}}],null,!1,712996746)})]:[r("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),e._v(" "),r("v-tab-item",{key:"double"},[null!=e.$store.state.multipleMatch.length?[r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}}),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.$store.state.multipleMatch,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name)+" "),r("br"),e._v("  "+e._s(t.item.source1Parents.join("->")))]),e._v(" "),r("td",[e._v(e._s(t.item.source1Code))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Name)+" "),r("br"),e._v("  "+e._s(e._f("joinParentsAndReverse")(t.item.source2Parents)))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Code))]),e._v(" "),r("td"),e._v(" "),t.item.canBreak?r("td",["Done"==e.$store.state.recoStatus?r("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(r){return e.breakMatch(t.item.source1UUID,t.item.source2UUID,"doubleMatch")}}},[r("v-icon",[e._v("undo")]),e._v("Break Match\n                  ")],1):r("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(r){return e.breakMatch(t.item.source1UUID,t.item.source2UUID,"doubleMatch")}}},[r("v-icon",[e._v("undo")]),e._v("Break Match\n                  ")],1)],1):r("td")]}}],null,!1,2442865516)})]:[r("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),e._v(" "),r("v-tab-item",{key:"flagged"},[null!=e.$store.state.flagged?[r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchFlagged,callback:function(t){e.searchFlagged=t},expression:"searchFlagged"}}),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.$store.state.flagged,search:e.searchFlagged},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name)+" "),r("br"),e._v("  "+e._s(t.item.source1Parents.join("->")))]),e._v(" "),r("td",[e._v(e._s(t.item.source1Code))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Name)+" "),r("br"),e._v("  "+e._s(e._f("joinParentsAndReverse")(t.item.source2Parents)))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Code))]),e._v(" "),r("td",[e._v(e._s(t.item.flagComment))]),e._v(" "),r("td",["Done"==e.$store.state.recoStatus?r("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"primary",small:""},on:{click:function(r){return e.acceptFlag(t.item.source1UUID,t.item.source2UUID)}}},[r("v-icon",[e._v("thumb_up")]),e._v("Confirm Match\n                  ")],1):r("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"primary",small:""},on:{click:function(r){return e.acceptFlag(t.item.source1UUID,t.item.source2UUID)}}},[r("v-icon",[e._v("thumb_up")]),e._v("Confirm Match\n                  ")],1),e._v(" "),"Done"==e.$store.state.recoStatus?r("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(r){return e.unFlag(t.item.source1UUID)}}},[r("v-icon",[e._v("cached")]),e._v("Release\n                  ")],1):r("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(r){return e.unFlag(t.item.source1UUID)}}},[r("v-icon",[e._v("cached")]),e._v("Release\n                  ")],1)],1)]}}],null,!1,580439535)})]:[r("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2)],1)],1),e._v(" "),r("v-layout",["yes"!=e.goNextLevel||e.$store.state.scoreSavingProgressData.savingMatches?e._e():r("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[r("v-btn",{attrs:{color:"primary",round:""},on:{click:function(t){return e.levelChanged(e.$store.state.recoLevel+1)}}},[r("v-icon",[e._v("forward")]),e._v("Proceed to "+e._s(e.nextLevelText)+"\n        ")],1)],1),e._v(" "),"yes"==e.lastLevelDone?r("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[r("v-btn",{attrs:{color:"primary",round:""},on:{click:function(t){return e.$router.push({name:"FacilityRecoStatus"})}}},[r("v-icon",[e._v("dashboard")]),e._v("Reconciliation Status\n        ")],1)],1):e._e()],1)],1):e._e()],2)},staticRenderFns:[]};var he=r("VU/8")(ve,pe,!1,function(e){r("sds8")},null,null).exports,ge={mixins:[ie],data:function(){return{helpDialog:!1,matchedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"}],noMatchHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"}],notMappedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"}],flaggedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"}],searchMatched:"",mappingData:{},recoLevel:2,mappingStatusDialog:!1,mappingStatusProgressTitle:"Waiting for progress status",mappingStatusProgressPercent:0,locationLevels:[]}},methods:{checkMappingStatusProgress:function(){var e=this,t=this.$store.state.clientId;g.a.get("http://41.59.227.79:8083/progress/mappingStatus/"+t).then(function(t){return null===t.data||void 0===t.data||!1===t.data?(e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status",void clearInterval(e.mappingStatusProgressTimer)):null===t.data.status&&null===t.data.error&&null===t.data.percent?(e.mappingStatusDialog=!1,clearInterval(e.mappingStatusProgressTimer),void(e.mappingStatusProgressTitle="Waiting for progress status")):(e.mappingStatusProgressTitle=t.data.status,t.data.percent&&("percent"!==e.progressType&&(e.progressType="percent"),e.mappingStatusProgressPercent=t.data.percent),void("Done"===t.data.status&&(e.clearProgress("mappingStatus"),clearInterval(e.mappingStatusProgressTimer),e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status")))}).catch(function(e){console.log(e)})},mappingStatus:function(){var e=this;if(this.source1&&this.source2){this.mappingData={};var t=this.$store.state.clientId,r=this.$store.state.totalSource2Levels,a=this.$store.state.totalSource1Levels,s=this.$store.state.activePair.userID._id,i=this.getDatasourceOwner(),o=i.source1Owner,n=i.source2Owner,l=this.getLimitOrgIdOnActivePair().source1LimitOrgId,c=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.mappingStatusDialog=!0,this.progressType="indeterminate";var u="/mappingStatus/"+this.source1+"/"+this.source2+"/"+o+"/"+n+"/"+this.recoLevel+"/"+r+"/"+a+"/"+t+"/"+s+"?source1LimitOrgId="+l+"&source2LimitOrgId="+c;g.a.get("http://41.59.227.79:8083"+u).then(function(t){e.mappingData=t.data}),this.mappingStatusProgressTimer=setInterval(this.checkMappingStatusProgress,500)}},levelChanged:function(e){this.recoLevel=e,this.mappingStatus()},markRecoDone:function(){var e=this;this.$store.state.progressTitle="Marking reconciliation as Done",this.$store.state.dynamicProgress=!0;var t=this.$store.state.activePair.userID._id;g.a.get("http://41.59.227.79:8083/markRecoDone/"+this.source1+"/"+this.source2+"/"+t).then(function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation Done",e.$store.state.errorDescription="Reconciliation is complete, no more changes can be done",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0}).catch(function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)})},markRecoUnDone:function(){var e=this,t=this.$store.state.activePair.userID._id;this.$store.state.progressTitle="Marking reconciliation as Un Done",this.$store.state.dynamicProgress=!0,g.a.get("http://41.59.227.79:8083/markRecoUnDone/"+this.source1+"/"+this.source2+"/"+t).then(function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation on progress",e.$store.state.errorDescription="You may continue doing reconciliation now",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0}).catch(function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)})}},computed:{currentLevelText:function(){return this.translateDataHeader("source1",this.recoLevel-1)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},source1PercentMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalMapped/this.totalRecords).toFixed(2))},source1PercentNoMatch:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllNoMatch/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentIgnore:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllIgnore/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNoMatchLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNoMatch/this.totalRecords).toFixed(2))},source1PercentIgnoreLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalIgnore/this.totalRecords).toFixed(2))},source1PercentFlagged:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentFlaggedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalFlagged/this.totalRecords).toFixed(2))},source1PercentNotMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.source1TotalAllNotMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNotMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNotMapped/this.totalRecords).toFixed(2))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source2TotalAllRecords).toFixed(2))},source2PercentMapped:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source2TotalAllRecords).toFixed(2))},totalMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("mapped")?this.mappingData.mapped.length:0},totalNotMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("notMapped")?this.mappingData.notMapped.length:0},totalNoMatch:function(){return this.mappingData&&this.mappingData.hasOwnProperty("noMatch")?this.mappingData.noMatch.length:0},totalIgnore:function(){return this.mappingData&&this.mappingData.hasOwnProperty("ignore")?this.mappingData.ignore.length:0},totalFlagged:function(){return this.mappingData&&this.mappingData.hasOwnProperty("flagged")?this.mappingData.flagged.length:0},totalRecords:function(){return this.totalMapped+this.totalNotMapped+this.totalNoMatch+this.totalIgnore+this.totalFlagged}},components:{appRecoExport:de},created:function(){this.mappingStatus();for(var e=1;e<this.$store.state.totalSource1Levels;e++){var t=this.translateDataHeader("source1",e);this.locationLevels.push({text:t,value:e+1})}}},fe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{transition:"scale-transition","hide-overlay":"",persistent:"",width:"350"},model:{value:e.mappingStatusDialog,callback:function(t){e.mappingStatusDialog=t},expression:"mappingStatusDialog"}},[r("v-card",{attrs:{color:"white",dark:""}},[r("v-card-text",[r("center",[r("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.mappingStatusProgressTitle))]),r("br"),e._v(" "),"percent"==e.progressType?r("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.mappingStatusProgressPercent,color:"primary"}},[r("v-avatar",{attrs:{color:"indigo",size:"50px"}},[r("span",{staticClass:"white--text"},[r("b",[e._v(e._s(e.mappingStatusProgressPercent)+"%")])])])],1):e._e(),e._v(" "),"indeterminate"==e.progressType?r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{column:""}},[r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" About this page\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n          This page let you visualize the mapping status for various levels\n          "),r("v-list",[e._v("\n            1. Right boxes shows reconciliation status for a selected level\n          ")]),e._v(" "),r("v-list",[e._v("\n            2. Left boxes shows reconciliation status for a all levels\n          ")]),e._v(" "),r("v-list",[e._v("\n            3. The search box let you search locations for a selected level only\n          ")])],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:"","text-xs-right":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs3:""}},[r("appRecoExport")],1),e._v(" "),r("v-flex",{attrs:{xs9:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[r("v-icon",[e._v("help")])],1),e._v(" "),r("span",[e._v("Help")])],1)],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("b",[e._v("All Levels")])]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs3:""}},[r("b",[e._v(e._s(e.currentLevelText)+" Only")])])],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs1:""}},[r("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Source 1 Matched")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMapped,color:"yellow"}},[r("font",{attrs:{color:"white"}},[r("b",[e._v(e._s(e.source1PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Source 1 No Match")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.$store.state.totalAllNoMatch)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"yellow"}},[r("font",{attrs:{color:"white"}},[r("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Source 1 Flagged")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[r("font",{attrs:{color:"white"}},[r("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Source 2 Matched")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMapped,color:"green"}},[r("font",{attrs:{color:"white"}},[r("b",[e._v(e._s(e.source2PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Source 2 Flagged")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"yellow"}},[r("font",{attrs:{color:"white"}},[r("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Source 1 Matched")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.totalMapped)+"/"+e._s(e.totalRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMappedLevel,color:"yellow"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source1PercentMappedLevel)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Source 1 No Match")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.totalNoMatch)+"/"+e._s(e.totalRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatchLevel,color:"yellow"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source1PercentNoMatchLevel)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("b",[e._v("Source 1 Flagged")])]),e._v(" "),r("v-flex",{attrs:{xs1:"","align-center":""}},[r("center",[r("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.totalRecords))])])],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("center",[r("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[r("font",{attrs:{color:"black"}},[r("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs3:""}},[r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs2:""}},[e.$store.state.activePair.userID._id===e.$store.state.auth.userID||"Admin"==e.$store.state.auth.role?["Done"!==e.$store.state.recoStatus?r("v-btn",{attrs:{color:"success",round:""},on:{click:e.markRecoDone}},[r("v-icon",[e._v("lock")]),e._v("Mark Reconciliation As Done\n            ")],1):e._e(),e._v(" "),"Done"===e.$store.state.recoStatus&&"Admin"==e.$store.state.auth.role?r("v-btn",{attrs:{color:"success",round:""},on:{click:e.markRecoUnDone}},[r("v-icon",[e._v("lock_open")]),e._v("Mark Reconciliation As UnDone\n            ")],1):e._e()]:e._e()],2),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}},[r("v-select",{staticClass:"input-group--focused",attrs:{items:e.locationLevels,"item-value":e.locationLevels.value,"item-name":e.locationLevels.text,label:"Level",height:"1","full-width":"","single-line":""},on:{change:e.levelChanged},model:{value:e.recoLevel,callback:function(t){e.recoLevel=t},expression:"recoLevel"}})],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"",color:"cyan"}},[r("v-tabs-slider",{attrs:{color:"red"}}),e._v(" "),r("v-tab",{key:"match"},[e._v("\n          MATCHED ("+e._s(e.totalMapped)+")\n          "),r("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_up")])],1),e._v(" "),r("v-tab",{key:"notMapped"},[e._v("\n          Source 1 Not Mapped ("+e._s(e.totalNotMapped)+")\n          "),r("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_down")])],1),e._v(" "),r("v-tab",{key:"nomatch"},[e._v("\n          Source 1 NO MATCH ("+e._s(e.totalNoMatch)+")\n          "),r("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_down")])],1),e._v(" "),r("v-tab",{key:"ignore"},[e._v("\n          Source 1 IGNORED ("+e._s(e.totalIgnore)+")\n          "),r("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_down")])],1),e._v(" "),r("v-tab",{key:"flagged"},[e._v("\n          FLAGGED ("+e._s(e.totalFlagged)+")\n          "),r("v-icon",{attrs:{color:"white",right:""}},[e._v("notification_important")])],1),e._v(" "),r("v-tab-item",{key:"match"},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.mappingData.mapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),r("td",[e._v(e._s(t.item.source1Id))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Name))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Id))])]}}])})],1),e._v(" "),r("v-tab-item",{key:"notMapped"},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.notMappedHeaders,items:e.mappingData.notMapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),r("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),e._v(" "),r("v-tab-item",{key:"nomatch"},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.noMatch,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),r("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),e._v(" "),r("v-tab-item",{key:"ignore"},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.ignore,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),r("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),e._v(" "),r("v-tab-item",{key:"flagged"},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.mappingData.flagged,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),r("td",[e._v(e._s(t.item.source1Id))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Name))]),e._v(" "),r("td",[e._v(e._s(t.item.source2Id))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]},me=r("VU/8")(ge,fe,!1,null,null,null).exports,_e={data:function(){return{dialog:!1,restoreDialog:!1,alertTitle:"",alertText:"",archives:[],selectedArchive:"",header:[{sortable:!1},{text:"Archive Name",value:"archiveName"}]}},methods:{getArchives:function(){var e=this,t=this.$store.state.orgUnit;g.a.get("http://41.59.227.79:8083/getArchives/"+t.OrgId).then(function(t){e.archives=t.data,0===e.archives.length?e.$store.state.showArchives=!1:e.$store.state.showArchives=!0})},restoreArchive:function(){var e=this;if(""===this.selectedArchive)this.alertTitle="Error",this.alertText="Select an archive to restored",this.dialog=!0;else{this.restoreDialog=!0;var t=this.$store.state.orgUnit,r=new FormData;r.append("archive",this.selectedArchive),g.a.post("http://41.59.227.79:8083/restoreArchive/"+t.OrgId,r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.restoreDialog=!1,yr.$emit("refreshApp"),e.getArchives(),e.selectedArchive=""}).catch(function(t){e.restoreDialog=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error,console.log(t.response.data.error)})}}},created:function(){this.getArchives()}},ye={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[r("br"),r("br"),r("br"),e._v(" "),r("v-alert",{attrs:{type:"info",value:!0}},[r("b",[e._v("Wait for upload to finish ...")]),e._v(" "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),e._v(" "),0==e.archives.length?[r("br"),r("br"),r("br"),e._v(" "),r("v-alert",{attrs:{type:"info",value:!0}},[r("b",[e._v("No archived upload ...")])])]:e._e(),e._v(" "),[r("v-container",{attrs:{"grid-list-lg":""}},[r("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.restoreDialog,callback:function(t){e.restoreDialog=t},expression:"restoreDialog"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v("\n            Restoring\n            "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[e._v("\n            "+e._s(e.alertTitle)+"\n          ")]),e._v(" "),r("v-card-text",[e._v("\n            "+e._s(e.alertText)+"\n          ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"success"},on:{click:function(t){e.dialog=!1}}},[e._v("OK")])],1)],1)],1),e._v(" "),e.archives.length>0?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm12:"",md12:"","child-flex":""}},[r("v-card",{attrs:{color:"green lighten-4"}},[r("v-card-title",{staticStyle:{color:"black"},attrs:{"primary-title":""}},[e._v("\n              Archived Uploads\n            ")]),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",staticStyle:{color:"red"},attrs:{headers:e.header,items:e.archives,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[r("tr",[r("v-radio-group",{staticStyle:{height:"5px"},attrs:{color:"red"},model:{value:e.selectedArchive,callback:function(t){e.selectedArchive=t},expression:"selectedArchive"}},[r("td",[r("v-radio",{attrs:{value:t.item,color:"red"}})],1)]),e._v(" "),r("td",[e._v(e._s(t.item))])],1)]}}],null,!1,1011195848)})],1),e._v(" "),r("v-card-actions",{staticStyle:{float:"center"}},[r("v-btn",{attrs:{color:"error",dark:""},nativeOn:{click:function(t){return e.restoreArchive(t)}}},[r("v-icon",{attrs:{left:""}},[e._v("cached")]),e._v("Restore")],1)],1)],1)],1)],1):e._e()],1)]],2)},staticRenderFns:[]};var xe=r("VU/8")(_e,ye,!1,function(e){r("VPxq")},null,null).exports,be=r("gRE1"),$e=r.n(be),Se={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xs":""}},[r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.datasetLimit,callback:function(t){e.datasetLimit=t},expression:"datasetLimit"}},[r("v-card",[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" Datasets limit Warning\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.datasetLimit=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n        You cant add more datasets as you have reached the datasets limit, contact system administrator for help\n      ")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.datasetLimit=!1}}},[e._v("Ok")])],1)],1)],1)],1)},staticRenderFns:[]},we=r("VU/8")({props:["datasetLimitWarn"],computed:{datasetLimit:{get:function(){return this.datasetLimitWarn},set:function(e){this.$emit("limitWarnStateChange",e)}}}},Se,!1,null,null,null).exports,Ce={data:function(){return{name:"",host:"",username:"",password:"",sourceType:"",limitShareByOrgId:!1,shareWithAll:!1,shareToSameOrgid:!0,invalidCharacters:['"',"/","\\","."]}},methods:{sharingOptions:function(){this.shareWithAll&&(this.shareToSameOrgid=!1)},addDataSource:function(e){var t=this,r=new FormData,a=this.$store.state.clientId;r.append("host",this.host),r.append("sourceType",this.sourceType),r.append("source",e),r.append("orgId",this.$store.state.dhis.user.orgId),r.append("shareToSameOrgid",this.shareToSameOrgid),r.append("shareToAll",this.shareWithAll),r.append("limitByUserLocation",this.limitShareByOrgId),r.append("username",this.username),r.append("password",this.password),r.append("name",this.name),r.append("clientId",a),r.append("userID",this.$store.state.auth.userID);var s=this.$store.state.dataSources.find(function(e){return e.host===t.host});g.a.post("http://41.59.227.79:8083/addDataSource",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){yr.$emit("dataSourceSaved"),yr.$emit("dataSourceAddedSuccessfully"),yr.$emit("getDataSources"),s?(s.name=t.name,s.username=t.username,s.password=e.data.password,s.sourceType=t.sourceType):t.$store.state.dataSources.push({name:t.name,host:t.host,sourceType:t.sourceType,source:"syncServer",username:t.username,password:e.data.password})}).catch(function(e){console.log(e),yr.$emit("remoteServerFailedAdd")})}}},De={mixins:[Ce,M],data:function(){return{datasetLimitWarn:!1,errorDialog:!1,errorTitle:"",errorContent:"",dialog:!1,fileUploadPercentage:"",percentDialog:!1,uploadPrepaProgr:!1,UploadProgressTimer:"",uploadStatus:"1/3 Uploading CSV to the server",uploadPercent:null,uploadName:"",uploadNameErrors:[],confirmUpload:!1,confirmTitle:"",confirmMsg:"",file:"",uploadedFileName:"",e1:0,facility:null,code:null,lat:null,long:null,level1:null,level2:null,level3:null,level4:null,level5:null,level6:null,level7:null,showLevel3:!1,showLevel4:!1,showLevel5:!1,showLevel6:!1,showLevel7:!1,uploadedHeaders:[],mappedHeaders:[],invalidRowsHeader:[],invalidRowsContent:[],invalidRows:!1,valid:!1}},validations:{facility:{required:x.required},code:{required:x.required},uploadName:{required:x.required}},methods:{fileSelected:function(e){this.uploadedFileName=e.target.files[0].name,"text/csv"===e.target.files[0].type||"application/vnd.ms-excel"===e.target.files[0].type&&"csv"===e.target.files[0].name.slice(-3).toLowerCase()||(this.errorDialog=!0,this.errorTitle="Error",this.errorContent="Wrong file type uploaded,Only CSV format is supported",this.uploadedFileName=""),this.file=e.target.files[0];var t=new FileReader;t.addEventListener("load",function(){var e=t.result.split(/\r\n|\n/)[0];this.uploadedHeaders=e.split(",")}.bind(this),!1),t.readAsText(e.target.files[0],"utf-8")},ensureNameUnique:function(){if(this.uploadNameErrors=[],""===this.uploadName)return this.uploadNameErrors.push("Upload name is required");if(this.uploadName.length>35)return this.uploadNameErrors.push("Name must not exceed 35 characters");var e=!0,t=!1,r=void 0;try{for(var a,s=c()(this.invalidCharacters);!(e=(a=s.next()).done);e=!0){var i=a.value;if(-1!==this.uploadName.indexOf(i))return this.uploadNameErrors.push("Name is invalid")}}catch(e){t=!0,r=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw r}}var o=!0,n=!1,l=void 0;try{for(var u,d=c()(this.$store.state.dataSources);!(o=(u=d.next()).done);o=!0){if(u.value.name.toLowerCase()===this.uploadName.toLowerCase())return this.uploadNameErrors.push("This Name Exists"),!1}}catch(e){n=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(n)throw l}}},confirmSubmit:function(){this.confirmUpload=!0},checkUploadProgress:function(){var e=this,t=this.$store.state.clientId;g.a.get("http://41.59.227.79:8083/progress/uploadProgress/"+t).then(function(t){return t.data&&(t.data.status||t.data.percent||t.data.error)?null!==t.data.error?(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.data.error,void console.log(t.data.error)):(e.uploadStatus=t.data.status,t.data.percent&&(e.percentDialog||(e.uploadPrepaProgr=!1,e.percentDialog=!0),e.uploadPercent=t.data.percent),void("Done"===t.data.status||t.data.status>=100?(e.clearProgress("uploadProgress"),e.addDataSource("upload"),clearInterval(e.UploadProgressTimer),e.$store.state.recoLevel=2,e.percentDialog=!1,e.dialog=!0,e.$store.state.uploadRunning=!1):e.checkUploadProgress())):(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="You should delete this data source from view data source page then re-upload",e.$store.state.errorColor="error",void(e.$store.state.dialogError=!0))}).catch(function(t){console.log(t),e.checkUploadProgress()})},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig(function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.submitCSV():(e.confirmUpload=!1,e.datasetLimitWarn=!0)})},submitCSV:function(){var e=this,t=new FormData;t.append("file",this.file),t.append("csvName",this.uploadName),t.append("facility",this.facility),t.append("code",this.code),t.append("lat",this.lat),t.append("long",this.long),t.append("level1",this.level1),t.append("level2",this.level2),t.append("level3",this.level3),t.append("level4",this.level4),t.append("level5",this.level5),t.append("level6",this.level6),t.append("level7",this.level7),t.append("clientId",this.$store.state.clientId),t.append("userID",this.$store.state.auth.userID),this.confirmUpload=!1,this.$store.state.uploadRunning=!0,this.uploadPrepaProgr=!0,this.host="",this.sourceType="upload",this.username="",this.password="",this.name=this.uploadName,g.a.post("http://41.59.227.79:8083/uploadCSV",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.fileUploadPercentage=parseInt(Math.round(100*e.loaded/e.total)),100===this.fileUploadPercentage&&(this.fileUploadPercentage="",this.uploadStatus="2/3 Validating CSV Data")}.bind(this)}).then(function(t){e.checkUploadProgress()}).catch(function(t){if(Array.isArray(t.response.data.error)){e.invalidRows=!0;for(var r=0;r<t.response.data.error.length;r++){if(0===r){var a=p()(t.response.data.error[r].data),s=!0,i=!1,o=void 0;try{for(var n,l=c()(a);!(s=(n=l.next()).done);s=!0){var u=n.value;e.invalidRowsHeader.push({text:u,value:u})}}catch(t){i=!0,o=t}finally{try{!s&&l.return&&l.return()}finally{if(i)throw o}}e.invalidRowsHeader.push({text:"Reason",value:"reason"})}var d=$e()(t.response.data.error[r].data),v={};for(var h in d)v[e.invalidRowsHeader[h].value]=d[h];v.reason=t.response.data.error[r].reason,e.invalidRowsContent.push(v)}}else e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". Reload page and retry";e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,clearInterval(e.UploadProgressTimer)})},closeInvalidRows:function(){this.invalidRows=!1,this.invalidRowsHeader=[],this.invalidRowsContent=[],this.e1=1},closeDialog:function(e){this.$router.push({name:e}),this.dialog=!1},closeUploadWindow:function(){yr.$emit("dataSourceSaved")},showMoreLevel:function(){this.showLevel3?this.showLevel4?this.showLevel5?this.showLevel6?this.showLevel7||(this.showLevel7=!0):this.showLevel6=!0:this.showLevel5=!0:this.showLevel4=!0:this.showLevel3=!0}},components:{appDialogs:we},computed:{facilityErrors:function(){var e=[];return this.$v.facility.$dirty?(!this.$v.facility.required&&e.push("Facility is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},filteredItemFacility:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemCode:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLat:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLong:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel1:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel2:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel3:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel4:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel5:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level6&&t!==e.level7})},filteredItemLevel6:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level7})},filteredItemLevel7:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6})}},created:function(){this.$store.state.uploadProgressData.percentDialog&&(this.percentDialog=this.$store.state.uploadProgressData.percentDialog),this.$store.state.uploadProgressData.uploadPrepaProgr&&(this.uploadPrepaProgr=this.$store.state.uploadProgressData.uploadPrepaProgr),this.$store.state.uploadProgressData.UploadProgressTimer&&(this.UploadProgressTimer=this.$store.state.uploadProgressData.UploadProgressTimer),this.$store.state.uploadProgressData.uploadStatus&&(this.uploadStatus=this.$store.state.uploadProgressData.uploadStatus),this.$store.state.uploadProgressData.uploadPercent&&(this.uploadPercent=this.$store.state.uploadProgressData.uploadPercent)},destroyed:function(){this.$store.state.uploadProgressData.dialog=this.dialog,this.$store.state.uploadProgressData.percentDialog=this.percentDialog,this.$store.state.uploadProgressData.uploadPrepaProgr=this.uploadPrepaProgr,this.$store.state.uploadProgressData.UploadProgressTimer=this.UploadProgressTimer,this.$store.state.uploadProgressData.uploadStatus=this.uploadStatus,this.$store.state.uploadProgressData.uploadPercent=this.uploadPercent}},ke={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n          Information\n        ")])],1),e._v(" "),r("v-card-text",[e._v("\n        Data uploaded successfully\n      ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.closeDialog("FacilityReconView")}}},[r("v-icon",{attrs:{left:""}},[e._v("list")]),e._v("\n          View Data\n        ")],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"1050px"},model:{value:e.invalidRows,callback:function(t){e.invalidRows=t},expression:"invalidRows"}},[r("v-card",[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("error")]),e._v("Data Upload was not successful,review below invalid rows in your CSV\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeInvalidRows()}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.invalidRowsHeader,items:e.invalidRowsContent,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.invalidRowsHeader,function(a){return r("td",[e._v(e._s(t.item[a.value]))])})}}])})],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.confirmUpload,callback:function(t){e.confirmUpload=t},expression:"confirmUpload"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n          Warning\n        ")])],1),e._v(" "),r("v-card-text",[e._v("\n        You are about to upload CSV data into the app, click proceed to upload\n      ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirmUpload=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.performExtraCheck(t)}}},[e._v("Proceed")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[r("v-card",[r("v-card-title",[e._v("\n        "+e._s(e.errorTitle)+"\n      ")]),e._v(" "),r("v-card-text",[e._v("\n        "+e._s(e.errorContent)+"\n      ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.errorDialog=!1}}},[e._v("Ok")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"300"},model:{value:e.uploadPrepaProgr,callback:function(t){e.uploadPrepaProgr=t},expression:"uploadPrepaProgr"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v("\n        "+e._s(e.uploadStatus)+"\n        "),e.fileUploadPercentage?r("v-progress-linear",{staticClass:"mb-0",attrs:{color:"white"},model:{value:e.fileUploadPercentage,callback:function(t){e.fileUploadPercentage=t},expression:"fileUploadPercentage"}}):r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"270"},model:{value:e.percentDialog,callback:function(t){e.percentDialog=t},expression:"percentDialog"}},[r("v-card",{attrs:{color:"white",dark:""}},[r("v-card-text",[r("center",[r("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.uploadStatus))]),r("br"),e._v(" "),r("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.uploadPercent,color:"primary"}},[r("v-avatar",{attrs:{color:"indigo",size:"50px"}},[r("span",{staticClass:"white--text"},[r("b",[e._v(e._s(e.uploadPercent)+"%")])])])],1)],1)],1)],1)],1),e._v(" "),e.$store.state.denyAccess?e._e():r("v-slide-y-transition",{attrs:{mode:"out-in"}},[r("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[r("v-stepper-header",[r("v-stepper-step",{attrs:{step:"1",complete:e.e1>1}},[e._v("Upload CSV")]),e._v(" "),r("v-divider"),e._v(" "),r("v-stepper-step",{attrs:{step:"2",complete:e.e1>2}},[e._v("Map Headers")]),e._v(" "),r("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return e.closeUploadWindow()}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-stepper-items",[r("v-stepper-content",{attrs:{step:"1"}},[r("v-card",{staticClass:"mb-5"},[r("v-card-title",[e._v("Upload CSV (utf-8 only) - "),r("b",[e._v("Select a CSV file and upload")])]),e._v(" "),r("v-card-text",[r("v-text-field",{attrs:{label:"Enter Unique Name For Your Data","error-messages":e.uploadNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.uploadName,callback:function(t){e.uploadName=t},expression:"uploadName"}}),e._v(" "),r("input",{attrs:{type:"file"},on:{change:e.fileSelected}}),e._v(" "),r("br"),r("br"),e._v(" "),r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Advanced Options\n                ")]),e._v(" "),r("v-card-text",[r("v-tooltip",{attrs:{top:""}},[e.$store.state.dhis.user.orgId?r("v-checkbox",{attrs:{slot:"activator",disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},slot:"activator",model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}}):e._e(),e._v(" "),r("span",[e._v("\n                      Share this dataset with all other users that are on the same org unit as you\n                    ")])],1),e._v(" "),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?r("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),e._v(" "),r("v-tooltip",{attrs:{top:""}},[e.shareWithAll&&e.$store.state.dhis.user.orgId?r("v-checkbox",{attrs:{slot:"activator",color:"primary",label:"Limit orgs sharing by user orgid"},slot:"activator",model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}}):e._e(),e._v(" "),r("span",[e._v("\n                      if activated, other users will see locations (including location children) that has the same location id as their location id\n                    ")])],1)],1)],1)],1)],1),e._v(" "),e.uploadedFileName&&e.uploadName&&0===e.uploadNameErrors.length?r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.e1=2}}},[e._v("Continue")]):r("v-btn",{attrs:{color:"primary",disabled:""},nativeOn:{click:function(t){e.e1=2}}},[e._v("Continue")])],1),e._v(" "),r("v-stepper-content",{attrs:{step:"2"}},[r("b",[e._v("Map an appropriate CSV header against those on the app.")]),e._v(" "),r("v-container",{attrs:{fluid:""}},[r("v-layout",{ref:"form",attrs:{row:"",wrap:""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Facility*")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemFacility,"error-messages":e.facilityErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.facility.$touch()},change:function(t){return e.$v.facility.$touch()}},model:{value:e.facility,callback:function(t){e.facility=t},expression:"facility"}})],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Code*")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemCode,"error-messages":e.codeErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.code.$touch()},change:function(t){return e.$v.code.$touch()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Latitude")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLat,label:"Select","single-line":"",clearable:""},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Longitude")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLong,label:"Select","single-line":"",clearable:""},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1),e._v(" "),[r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Level 1")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLevel1,label:"Select","single-line":"",clearable:""},model:{value:e.level1,callback:function(t){e.level1=t},expression:"level1"}})],1)],e._v(" "),[r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Level 2")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLevel2,label:"Select","single-line":"",clearable:""},model:{value:e.level2,callback:function(t){e.level2=t},expression:"level2"}})],1)],e._v(" "),e.showLevel3?[r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Level 3")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLevel3,label:"Select","single-line":"",clearable:""},model:{value:e.level3,callback:function(t){e.level3=t},expression:"level3"}})],1)]:e._e(),e._v(" "),e.showLevel4?[r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Level 4")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLevel4,label:"Select","single-line":"",clearable:""},model:{value:e.level4,callback:function(t){e.level4=t},expression:"level4"}})],1)]:e._e(),e._v(" "),e.showLevel5?[r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Level 5")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLevel5,label:"Select","single-line":"",clearable:""},model:{value:e.level5,callback:function(t){e.level5=t},expression:"level5"}})],1)]:e._e(),e._v(" "),e.showLevel6?[r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Level 6")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLevel6,label:"Select","single-line":"",clearable:""},model:{value:e.level6,callback:function(t){e.level6=t},expression:"level6"}})],1)]:e._e(),e._v(" "),e.showLevel7?[r("v-flex",{attrs:{xs6:""}},[r("v-subheader",[e._v("Level 7")])],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-select",{attrs:{items:e.filteredItemLevel7,label:"Select","single-line":"",clearable:""},model:{value:e.level7,callback:function(t){e.level7=t},expression:"level7"}})],1)]:e._e(),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-tooltip",{attrs:{top:""}},[e.showLevel7?e._e():r("v-btn",{attrs:{slot:"activator",color:"success",icon:""},on:{click:e.showMoreLevel},slot:"activator"},[r("v-icon",[e._v("add")])],1),e._v(" "),r("span",[e._v("Add More Level")])],1)],1)],2)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs1:""}},[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.e1=1}}},[e._v("Go Back")])],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid},nativeOn:{click:function(t){e.confirmUpload=!0}}},[e._v("Upload")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Pe=r("VU/8")(De,ke,!1,function(e){r("ZVZp")},"data-v-1f05e6ac",null).exports,Te={mixins:[Ce,M],validations:{host:{required:x.required},name:{required:x.required},sourceType:{required:x.required}},data:function(){return{datasetLimitWarn:!1,nameErrors:[]}},methods:{close:function(){yr.$emit("dataSourceSaved")},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig(function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.addDataSource("syncServer"):e.datasetLimitWarn=!0})},ensureNameUnique:function(){if(this.nameErrors=[],""===this.name)return this.nameErrors.push("Name is required");if(this.name.length>35)return this.nameErrors.push("Name must not exceed 35 characters");var e=!0,t=!1,r=void 0;try{for(var a,s=c()(this.invalidCharacters);!(e=(a=s.next()).done);e=!0){var i=a.value;if(-1!==this.name.indexOf(i))return this.nameErrors.push("Name is invalid")}}catch(e){t=!0,r=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw r}}var o=!0,n=!1,l=void 0;try{for(var u,d=c()(this.$store.state.dataSources);!(o=(u=d.next()).done);o=!0){if(u.value.name===this.name)return this.nameErrors.push("This Name Exists"),!1}}catch(e){n=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(n)throw l}}}}},Fe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[r("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),e._v(" "),r("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[r("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New Remote Source")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.close()}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-select",{attrs:{items:e.$store.state.remoteDataSources,required:"",label:"Source Type"},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}}),e._v(" "),r("v-text-field",{attrs:{box:"",required:"","error-messages":e.nameErrors,color:"deep-purple",label:"Source Name"},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-text-field",{attrs:{box:"",required:"",color:"deep-purple",label:"Base URL"},model:{value:e.host,callback:function(t){e.host=t},expression:"host"}}),e._v(" "),r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),r("v-text-field",{staticStyle:{"min-height":"96px"},attrs:{box:"",color:"deep-purple",label:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),[r("v-tooltip",{attrs:{top:""}},[e.$store.state.dhis.user.orgId?r("v-checkbox",{attrs:{slot:"activator",disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},slot:"activator",model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}}):e._e(),e._v(" "),r("span",[e._v("\n                Share this dataset with all other users that are on the same org unit as you\n              ")])],1),e._v(" "),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?r("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),e._v(" "),r("v-tooltip",{attrs:{top:""}},[e.shareWithAll&&e.$store.state.dhis.user.orgId?r("v-checkbox",{attrs:{slot:"activator",color:"primary",label:"Limit orgs sharing by user orgid"},slot:"activator",model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}}):e._e(),e._v(" "),r("span",[e._v("\n                if activated, other users will see locations (including location children) that has the same location id as their location id\n              ")])],1)]],2),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:e.performExtraCheck}},[e._v("\n            Add\n          ")])],1)],1)],1),e._v(" "),r("v-spacer")],1)],1)},staticRenderFns:[]},Re=r("VU/8")(Te,Fe,!1,null,null,null).exports,Ae={mixins:[M],data:function(){return{helpDialog:!1,datasetLimitWarn:!1,selectedComponent:"",dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],dataSource:"",addDataSource:!0,alertSuccess:!1,alertError:!1,alertMsg:""}},methods:{limitWarnStateChange:function(e){this.datasetLimitWarn=e},sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e&&(this.selectedComponent="FacilityReconRemoteSources")}},computed:{canUseUploadWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("CSV Upload")},canUseRemoteWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("Remote Servers Sync")}},components:{FacilityReconUpload:Pe,FacilityReconRemoteSources:Re,appDialogs:we},created:function(){var e=this;yr.$on("dataSourceSaved",function(){e.addDataSource=!1,e.dataSource=""}),yr.$on("dataSourceAddedSuccessfully",function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout(function(){e.alertSuccess=!1},3e3)}),yr.$on("remoteServerFailedAdd",function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"})}},Ie={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" About this page\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n        This page let you load data from various sources into the app for reconciliation\n        "),r("v-list",[e._v("1. Select to add remote source if you have a DHIS2 or FHIR server that you want to use its data on this app")]),e._v(" "),r("v-list",[e._v("2. Select Upload CSV if you have a CSV file and want to upload its data on the app")]),e._v(" "),r("v-list",[e._v("3. The system requires CSV data to have atleast 2 levels above facility")]),e._v(" "),r("v-list",[e._v("4. Level 1 is the highest level on the hierarchy i.e Country")]),e._v(" "),r("v-list",[e._v("\n          5. Base URL under remote sources section refer to the URL i.e http://localhost:3447/fhir and not http://localhost:3447/fhir/Location.\n          Same applies to DHIS2 base URL\n        ")])],1)],1)],1),e._v(" "),r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),e._v(" "),r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[r("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n            Choose way to add data source\n          ")]),e._v(" "),r("v-spacer")],1),e._v(" "),r("v-card-text",[r("v-radio-group",{attrs:{row:""},on:{change:e.sourceSelected},model:{value:e.dataSource,callback:function(t){e.dataSource=t},expression:"dataSource"}},[e.canUseUploadWay?r("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Upload CSV",value:"upload"}}):e._e(),e._v(" "),e.canUseRemoteWay?r("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Remote Source",value:"remote"}}):e._e()],1)],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:"","text-xs-right":""}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[r("v-icon",[e._v("help")])],1),e._v(" "),r("span",[e._v("Help")])],1)],1)],1),e._v(" "),r("v-layout",{attrs:{column:""}},[r("v-flex",[e.addDataSource?r(e.selectedComponent,{tag:"component"}):e._e()],1)],1),e._v(" "),r("appDialogs",{attrs:{datasetLimitWarn:e.datasetLimitWarn},on:{limitWarnStateChange:e.limitWarnStateChange}})],1)},staticRenderFns:[]},Ue=r("VU/8")(Ae,Ie,!1,null,null,null).exports,qe={mixins:[M],data:function(){return{syncType:"",mode:"",loadingPairs:!1,pairs:[],pairsHeaders:[{text:"Pair Name",value:"name"},{text:"Owner",value:"owner"}],helpDialog:!1,deleteConfirm:!1,editDialog:!1,server:{name:"",userID:{}},shareDialog:!1,shareSource:{},users:[],sharedUsers:[],limitLocationId:"",limitLocationName:"No limit",locationTree:[],loadingLocationTree:!1,searchUsers:"",syncServersHeader:[{sortable:!1},{text:"Source Name",value:"name"},{text:"Base URL",value:"host"},{text:"Source Type",value:"sourceType"},{text:"User Name",value:"username"},{text:"Password",value:"password"},{text:"Last Sync",value:"lastsync"},{text:"Owner",value:"owner",sortable:!1},{text:"Shared To",value:"shareStatus"},{text:"Created Time",value:"createdTime"}],uploadSourcesHeader:[{sortable:!1},{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Shared To",value:"shareStatus"},{text:"Created Time",value:"createdTime"}],dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],usersHeader:[{sortable:!1},{text:"Username",value:"userName",sortable:!0},{text:"Firstname",value:"firstName",sortable:!0},{text:"Surname",value:"surname",sortable:!0}],dataSource:"",addDataSource:!0,syncProgrIndeter:!1,syncProgrPercent:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgressTimer:"",syncRunning:!1,alertSuccess:!1,alertError:!1,alertMsg:""}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t="",r=!0,a=!1,s=void 0;try{for(var i,o=c()(e);!(r=(i=o.next()).done);r=!0){var n=i.value;t?t+=", "+n.userName:t=n.userName}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return t}},methods:{sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e&&(this.selectedComponent="FacilityReconRemoteSources")},editDataSource:function(e){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to edit any details")):void("upload"!==this.server.source&&(this.editDialog=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},saveEdit:function(){var e=this,t=new FormData,r=this.$store.state.clientId;t.append("host",this.server.host),t.append("sourceType",this.server.sourceType),t.append("source",this.server.source),t.append("username",this.server.username),t.append("password",this.server.password),t.append("userID",this.server.userID._id),t.append("name",this.server.name),t.append("id",this.server._id),t.append("clientId",r),this.editDialog=!1,g.a.post("http://41.59.227.79:8083/addDataSource",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.server.password=t.data.password})},validateDelete:function(){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID&&"Admin"!==this.$store.state.auth.role?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to remove you from the share")):(this.getPairsToDelete(),void(this.deleteConfirm=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},deleteDataSource:function(){var e=this;this.deleteConfirm=!1;var t=this.$store.state.auth.userID,r=this.server.userID._id;g.a.get("http://41.59.227.79:8083/deleteDataSource/"+this.server._id+"/"+this.server.name+"/"+r+"/"+t).then(function(t){e.server={},yr.$emit("getDataSources")})},getPairsToDelete:function(){var e=this;this.loadingPairs=!0,g.a.get("/getPairForDatasource/"+this.server._id).then(function(t){e.loadingPairs=!1,e.pairs=t.data}).catch(function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)})},share:function(e,t){var r=this;if("showDialog"===t)this.limitLocationId="",this.limitLocationName="No limit",this.sharedUsers=[],this.shareSource=e,this.getLocationTree(),e.hasOwnProperty("shared")&&e.shared.users.length>0&&e.shared.users.forEach(function(e){r.sharedUsers.push(e._id)}),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var a=new FormData;a.append("shareSource",this.shareSource._id),a.append("users",s()(this.sharedUsers)),a.append("userID",this.$store.state.auth.userID),a.append("role",this.$store.state.auth.role),a.append("orgId",this.$store.state.dhis.user.orgId),a.append("limitLocationId",this.limitLocationId),this.$store.state.loadingServers=!0,this.shareDialog=!1,g.a.post("http://41.59.227.79:8083/shareDataSource",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){r.$store.state.loadingServers=!1,r.$store.state.dataSources=e.data}).catch(function(e){console.log(e),r.$store.state.loadingServers=!1})}},locationSelected:function(e){this.limitLocationId=e.id,"parent"!==e.id?this.limitLocationName=e.data.text:(this.limitLocationName="No limit",this.limitLocationId="")},getLocationTree:function(){var e=this,t=this.shareSource.userID._id;this.loadingLocationTree=!0;var r=this.toTitleCase(this.shareSource.name);g.a.get("http://41.59.227.79:8083/getTree/"+r+"/"+t).then(function(t){t.data&&(e.locationTree=[{text:"Select location to limit sharing",id:"parent",children:t.data}]),e.loadingLocationTree=!1})},getUsers:function(){var e=this;g.a.get("http://41.59.227.79:8083/getUsers").then(function(t){e.users=t.data})},exportCSV:function(){var e=this;if(!this.server.name)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");var t=this.server.userID._id;g.a.get("http://41.59.227.79:8083/getUploadedCSV/"+t+"/"+this.server.name).then(function(t){var r=new Blob([t.data]);if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e.server.name+".csv");else{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(r,{type:"text/plain"}),a.download=e.server.name+".csv",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}).catch(function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data})},sync:function(e){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Only data source owner can run the sync")):void("upload"!==this.server.source&&(this.mode=e,"DHIS2"===this.server.sourceType?this.syncType="dhisSync":"FHIR"===this.server.sourceType&&(this.syncType="fhirSync"),setTimeout(function(){yr.$emit("runRemoteSync")},100))):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))}},computed:{remoteServers:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var s,i=c()(this.$store.state.dataSources);!(t=(s=i.next()).done);t=!0){var o=s.value;"syncServer"===o.source&&e.push(o)}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}return e},uploadedSources:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var s,i=c()(this.$store.state.dataSources);!(t=(s=i.next()).done);t=!0){var o=s.value;"syncServer"!==o.source&&e.push(o)}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}return e}},components:{FacilityReconUpload:Pe,FacilityReconRemoteSources:Re,appRemoteSync:q,"liquor-tree":ae.a},created:function(){var e=this;this.getUsers(),yr.$on("dataSourceSaved",function(){e.addDataSource=!1,e.dataSource=""}),yr.$on("dataSourceAddedSuccessfully",function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout(function(){e.alertSuccess=!1},3e3)}),yr.$on("remoteServerFailedAdd",function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"})}},Me={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{width:"630px"},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}},[r("v-card",[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n          This will delete the datasource "+e._s(e.server.name)+" from the database\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteConfirm=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e.loadingPairs||e.pairs.length>0?r("label",[e._v("\n          Below data source pairs (mapping) will also be deleted\n          "),r("v-data-table",{attrs:{headers:e.pairsHeaders,items:e.pairs,"hide-actions":"",loading:e.loadingPairs},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1Name)+" - "+e._s(t.item.source2Name))]),e._v(" "),r("td",[e._v(e._s(t.item.owner))])]}}],null,!1,1184637600)})],1):r("label",[e._v("\n          There is no any data source pair (mapping) associated with this data source"),r("br")]),e._v(" "),r("br"),e._v(" "),r("b",[e._v("Do you want to proceed and delete?")])]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.deleteConfirm=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"success"},on:{click:e.deleteDataSource}},[e._v("Yes")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[r("v-card",{attrs:{width:"530px"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n          Editing "+e._s(e.server.host)+"\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.editDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs1:""}},[r("v-text-field",{attrs:{label:"Name",disabled:""},model:{value:e.server.name,callback:function(t){e.$set(e.server,"name",t)},expression:"server.name"}})],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-text-field",{attrs:{label:"Host"},model:{value:e.server.host,callback:function(t){e.$set(e.server,"host",t)},expression:"server.host"}})],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-select",{attrs:{items:e.$store.state.remoteDataSources,label:"Source Type"},model:{value:e.server.sourceType,callback:function(t){e.$set(e.server,"sourceType",t)},expression:"server.sourceType"}})],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-text-field",{attrs:{label:"User Name"},model:{value:e.server.username,callback:function(t){e.$set(e.server,"username",t)},expression:"server.username"}})],1),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.server.password,callback:function(t){e.$set(e.server,"password",t)},expression:"server.password"}})],1)],1)],1),e._v(" "),r("v-card-actions",{staticStyle:{float:"center"}},[r("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[r("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.saveEdit("match")}}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n        ")],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[r("v-card",{attrs:{width:"530px"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n          Sharing "+e._s(e.shareSource.name)+"\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e.loadingLocationTree?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:[r("v-card-text",[r("p",[r("liquor-tree",{ref:"locationTree",attrs:{data:e.locationTree,options:{}},on:{"node:selected":e.locationSelected}})],1)])],e._v(" "),r("v-icon",{attrs:{small:""}},[e._v("lock")]),e._v(" Limiting Sharing to: "),r("b",[e._v(e._s(e.limitLocationName))]),e._v(" "),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,"item-key":"firstName"},scopedSlots:e._u([{key:"items",fn:function(t){return[t.item.userName!==e.$store.state.auth.username?r("tr",[r("td",[r("v-checkbox",{attrs:{value:t.item._id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),e._v(" "),r("td",[e._v(e._s(t.item.userName))]),e._v(" "),r("td",[e._v(e._s(t.item.firstName))]),e._v(" "),r("td",[e._v(e._s(t.item.surname))])]):e._e()]}}])})],2),e._v(" "),r("v-card-actions",{staticStyle:{float:"center"}},[r("v-btn",{staticStyle:{color:"white"},attrs:{color:"error",disabled:e.loadingLocationTree},nativeOn:{click:function(t){e.shareDialog=!1}}},[r("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",disabled:e.loadingLocationTree},nativeOn:{click:function(t){return e.share("","saveShare")}}},[r("v-icon",{attrs:{left:""}},[e._v("share")]),e._v("Share\n        ")],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" About this page\n        ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n        This page let you visualize various data sets you have added into the app as well as synchronize remote servers with the app\n        "),r("v-list",[e._v("1. Use Force Full Sync to fetch all data from the remote server and update the app")]),e._v(" "),r("v-list",[e._v("2. Use Sync (Update) to pull updated records from the remote server and update the app")]),e._v(" "),r("v-list",[e._v("3. You may proceed to the 'Data Source Pair' page after you have added atleast two data sources")]),e._v(" "),r("v-list",[e._v("4. You may come back to this page and add more sources at any time")])],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:"","text-xs-right":""}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[r("v-icon",[e._v("help")])],1),e._v(" "),r("span",[e._v("Help")])],1)],1)],1),e._v(" "),r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),e._v(" "),r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")])],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",[r("v-card",{attrs:{color:"cyan lighten-5"}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n            Remote Sources\n          ")]),e._v(" "),r("v-spacer")],1),e._v(" "),r("v-card-actions",[e.remoteServers.length>0?r("v-btn",{attrs:{color:"primary",round:""},on:{click:function(t){return e.sync("full")}}},[r("v-icon",{attrs:{left:""}},[e._v("sync")]),e._v("Force Full Sync\n          ")],1):r("v-btn",{attrs:{color:"primary",round:"",disabled:""},on:{click:function(t){return e.sync("full")}}},[r("v-icon",{attrs:{left:""}},[e._v("sync")]),e._v("Force Full Sync\n          ")],1),e._v(" "),e.remoteServers.length>0?r("v-btn",{attrs:{color:"primary lighten-1",round:""},on:{click:function(t){return e.sync("update")}}},[r("v-icon",{attrs:{left:""}},[e._v("sync")]),e._v("Sync (Update)\n          ")],1):r("v-btn",{attrs:{color:"primary lighten-1",round:"",disabled:""},on:{click:function(t){return e.sync("update")}}},[r("v-icon",{attrs:{left:""}},[e._v("sync")]),e._v("Sync (Update)\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),e.remoteServers.length>0?r("v-btn",{attrs:{color:"success",round:""},on:{click:e.editDataSource}},[r("v-icon",{attrs:{left:""}},[e._v("edit")]),e._v("Edit\n          ")],1):r("v-btn",{attrs:{color:"success",round:"",disabled:""},on:{click:e.editDataSource}},[r("v-icon",{attrs:{left:""}},[e._v("edit")]),e._v("Edit\n          ")],1),e._v(" "),e.remoteServers.length>0?r("v-btn",{attrs:{color:"error",round:""},on:{click:e.validateDelete}},[r("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete\n          ")],1):r("v-btn",{attrs:{color:"error",round:"",disabled:""},on:{click:e.validateDelete}},[r("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete\n          ")],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.syncServersHeader,items:e.remoteServers,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"items",fn:function(t){return[r("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[r("td",[r("v-radio",{attrs:{value:t.item,color:"blue"}})],1)]),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.host))]),e._v(" "),r("td",[e._v(e._s(t.item.sourceType))]),e._v(" "),r("td",[e._v(e._s(t.item.username))]),e._v(" "),t.item.username?r("td",[e._v("*****")]):r("td"),e._v(" "),r("td",[e._v(e._s(t.item.lastUpdate))]),e._v(" "),r("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),r("td",[e._v("\n                "+e._s(e._f("mergeUsers")(t.item.shared.users))+"\n              ")]),e._v(" "),r("td",[e._v("\n                "+e._s(t.item.createdTime)+"\n              ")]),e._v(" "),t.item.userID._id===e.$store.state.auth.userID?r("td",[r("v-btn",{attrs:{color:"success",flat:""},on:{click:function(r){return e.share(t.item,"showDialog")}}},[r("v-icon",[e._v("share")]),e._v(" Share\n                ")],1)],1):e._e()]}}])},[r("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),e._v(" "),r("v-card-title",{attrs:{"primary-title":""}},[r("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n            Uploaded Sources\n          ")])],1),e._v(" "),r("v-card-actions",[r("v-tooltip",{attrs:{top:""}},[e.uploadedSources.length>0?r("v-btn",{attrs:{slot:"activator",color:"success",round:""},on:{click:e.exportCSV},slot:"activator"},[r("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("Export\n            ")],1):r("v-btn",{attrs:{slot:"activator",color:"success",round:"",disabled:""},on:{click:e.exportCSV},slot:"activator"},[r("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("Export\n            ")],1),e._v(" "),r("span",[e._v("Export Original CSV")])],1),e._v(" "),r("v-spacer"),e._v(" "),e.uploadedSources.length>0?r("v-btn",{attrs:{color:"error",round:""},on:{click:e.validateDelete}},[r("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete\n          ")],1):r("v-btn",{attrs:{color:"error",round:"",disabled:""},on:{click:e.validateDelete}},[r("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete\n          ")],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.uploadSourcesHeader,items:e.uploadedSources,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"items",fn:function(t){return[r("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[r("td",[r("v-radio",{attrs:{value:t.item,color:"blue"}})],1)]),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),r("td",[e._v("\n                "+e._s(e._f("mergeUsers")(t.item.shared.users))+"\n              ")]),e._v(" "),r("td",[e._v("\n                "+e._s(t.item.createdTime)+"\n              ")]),e._v(" "),t.item.userID._id===e.$store.state.auth.userID?r("td",[r("v-btn",{attrs:{color:"success",flat:""},on:{click:function(r){return e.share(t.item,"showDialog")}}},[r("v-icon",[e._v("share")]),e._v(" Share\n                ")],1)],1):e._e()]}}])},[r("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),e._v(" "),r("v-spacer")],1),e._v(" "),e.server.name?r("appRemoteSync",{attrs:{syncType:e.syncType,serverName:e.server.name,userID:e.$store.state.auth.userID,sourceOwner:e.server.userID._id,mode:e.mode}}):e._e()],1)},staticRenderFns:[]},Ee=r("VU/8")(qe,Me,!1,null,null,null).exports,Le={methods:{createDatasourcePair:function(e,t){var r=this;if(0===p()(e).length||0===p()(t).length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");if(e.name===t.name&&e.source===t.source)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Data source pair of the same data source is not allowed, change one of the source");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Data Source Pair";var a=null;this.$store.state.activePair.hasOwnProperty("shared")&&this.$store.state.activePair.shared.hasOwnProperty("activeUsers")&&-1!==this.$store.state.activePair.shared.activeUsers.indexOf(this.$store.state.auth.userID)&&(a=this.$store.state.activePair._id);var i=!1;this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair&&(i=!0),a||(a=!1);var o=new FormData;o.append("source1",s()(e)),o.append("source2",s()(t)),o.append("userID",this.$store.state.auth.userID),o.append("orgId",this.$store.state.dhis.user.orgId),o.append("singlePair",i),o.append("activePairID",a),g.a.post("http://41.59.227.79:8083/addDataSourcePair",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){r.$store.state.dynamicProgress=!1,yr.$emit("getDataSourcePair")}).catch(function(e){r.alertError=!0,r.$store.state.dialogError=!0,e.response.data.error?(r.$store.state.errorDescription=e.response.data.error,r.$store.state.errorTitle="Pair was not created",r.alertMsg=e.response.data.error):r.alertMsg="Something went wrong while saving data source pairs.",r.$store.state.dynamicProgress=!1,console.log(e)})},activateSharedPair:function(e){var t=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Activating Shared Data Source Pair";var r=new FormData;r.append("pairID",e),r.append("userID",this.$store.state.auth.userID),g.a.post("http://41.59.227.79:8083/activateSharedPair",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){yr.$emit("getDataSourcePair"),t.$store.state.dynamicProgress=!1}).catch(function(e){t.alertError=!0,t.alertMsg="Something went wrong while activating data source pair",t.$store.state.dynamicProgress=!1,console.log(e.response.data)})},activatePair:function(){var e=this;this.activeDataSourcePair.userID._id!==this.$store.state.auth.userID?this.activateSharedPair(this.activeDataSourcePair._id):(this.source1=this.$store.state.dataSources.find(function(t){return t._id===e.activeDataSourcePair.source1._id}),this.source2=this.$store.state.dataSources.find(function(t){return t._id===e.activeDataSourcePair.source2._id}),this.createDatasourcePair(this.source1,this.source2))}}},Ne={mixins:[M,Le],data:function(){return{confirmPairDeleteDialog:!1,helpDialog:!1,alertSuccess:!1,alertError:!1,alertMsg:"",pairLimitWarn:!1,shareDialog:!1,mapSourcePairLevels:!1,pairLevelsMapping:{},sharePair:{},source1:{},source2:{},searchPairs:"",searchSources:"",searchUsers:"",users:[],sharedUsers:[],activeDataSourcePair:{},pairLevelsMappingHeader:[{text:"Source 1 Levels",value:"headerSource1Levels",sortable:!1},{text:"Source 2 Levels",value:"headerSource1Levels",sortable:!1}],source1Headers:[{sortable:!1},{text:"Source 1",value:"headerSource1",sortable:!1}],source2Headers:[{sortable:!1},{text:"Source 2",value:"headerSource2",sortable:!1}],sourcePairHeaders:[{text:"Pair",value:"pair"},{text:"Owner",value:"owner",sortable:!1},{text:"Active",value:"active"},{text:"Shared To",value:"shareStatus"}],usersHeader:[{text:"Username",value:"username",sortable:!0},{text:"Firstname",value:"fname",sortable:!0},{text:"Surname",value:"sname",sortable:!0}],source1Levels:[],source2Levels:[]}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t="",r=!0,a=!1,s=void 0;try{for(var i,o=c()(e);!(r=(i=o.next()).done);r=!0){var n=i.value;t=t?","+n.userName:n.userName}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return t}},methods:{confirmDeletePair:function(){this.confirmPairDeleteDialog=!0},deletePair:function(){var e=this;this.confirmPairDeleteDialog=!1;var t="pairId="+this.activeDataSourcePair._id+"&userID="+this.activeDataSourcePair.owner.id+"&source1Name="+this.activeDataSourcePair.source1.name+"&source2Name="+this.activeDataSourcePair.source2.name;g.a.delete("http://41.59.227.79:8083/deleteSourcePair?"+t).then(function(t){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="Pair deleted successfully",e.$store.state.dialogError=!0,setTimeout(function(){yr.$emit("getDataSourcePair")},500)}).catch(function(t){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="An error occured while deleting pair, please retry",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,console.log(s()(t))})},reset:function(){var e=this;this.source1={},this.source2={},this.activeDataSourcePair={},this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Reseting Data Source Pairs";var t=this.$store.state.auth.userID;g.a.get("http://41.59.227.79:8083/resetDataSourcePair/"+t).then(function(t){yr.$emit("getDataSourcePair"),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Data Source Pair Reseted Successfully"}).catch(function(t){e.alertError=!0,e.alertMsg="Something went wrong while reseting data source pairs",console.log(t)})},checkLevels:function(){var e=this;this.pairLevelsMapping={};var t=this.source1.name,r=this.source2.name;t=this.toTitleCase(t),r=this.toTitleCase(r);var a=s()({source1LimitOrgId:this.getLimitOrgIdOnDataSource(this.source1),source2LimitOrgId:this.getLimitOrgIdOnDataSource(this.source2)}),i=s()({source1Owner:this.source1.userID._id,source2Owner:this.source2.userID._id});g.a.get("http://41.59.227.79:8083/countLevels/"+t+"/"+r+"/"+i+"/"+a).then(function(t){return 1===t.data.totalSource1Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source1.name+" has no data for you",void(e.$store.state.dialogError=!0)):1===t.data.totalSource2Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source2.name+" has no data for you",void(e.$store.state.dialogError=!0)):void(t.data.totalSource1Levels>t.data.totalSource2Levels?(e.$store.state.errorTitle="Levels mismatch",e.$store.state.errorDescription="Make sure source1 has the same or less levels as source2",e.$store.state.dialogError=!0):e.createDatasourcePair(e.source1,e.source2))})},mappingSelected:function(e){var t=this;this.source2Levels=this.source2Levels.filter(function(r){return r.value!==t.pairLevelsMapping[e]})},clearMappingSelection:function(e){this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});var t=p()(this.pairLevelsMapping).filter(function(t){return t!==e}),r={},a=!0,s=!1,i=void 0;try{for(var o,n=c()(t);!(a=(o=n.next()).done);a=!0){var l=o.value;r[l]=this.pairLevelsMapping[l]}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}this.pairLevelsMapping=r},closeLevelMappingDialog:function(){for(var e in this.pairLevelsMapping)this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});this.mapSourcePairLevels=!1},share:function(e,t){var r=this;if("showDialog"===t)this.sharedUsers=[],this.sharePair=e,e.hasOwnProperty("shared")&&e.shared.users.length>0&&e.shared.users.forEach(function(e){r.sharedUsers.push(e._id)}),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var a=new FormData;a.append("sharePair",this.sharePair._id),a.append("users",s()(this.sharedUsers)),a.append("userID",this.$store.state.auth.userID),a.append("orgId",this.$store.state.dhis.user.orgId),this.$store.state.loadingServers=!0,this.shareDialog=!1,g.a.post("http://41.59.227.79:8083/shareSourcePair",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){r.$store.state.loadingServers=!1,r.$store.state.dataSourcePairs=e.data}).catch(function(e){console.log(e),r.$store.state.loadingServers=!1})}},getUsers:function(){var e=this;g.a.get("http://41.59.227.79:8083/getUsers").then(function(t){e.users=t.data})}},computed:{dataSources2:function(){if(this.$store.state.config.generalConfig.reconciliation.fixSource2){var e="",t=!0,r=!1,a=void 0;try{for(var s,i=c()(this.$store.state.dataSources);!(t=(s=i.next()).done);t=!0){var o=s.value;o._id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(e=o)}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}return[e]}return this.$store.state.dataSources},canCreatePair:function(){return!this.$store.state.dhis.user.orgId||!this.$store.state.config.generalConfig.reconciliation.singlePair||0===this.$store.state.dataSourcePairs.length},canDeletePair:function(){return"{}"!==s()(this.activeDataSourcePair)&&this.activeDataSourcePair.owner.id===this.$store.state.auth.userID}},created:function(){var e=this;for(var t in this.canCreatePair||(this.pairLimitWarn=!0),this.getUsers(),this.source1=this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source1.id}),this.source2=this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source2.id}),this.activeDataSourcePair=this.getActiveDataSourcePair(),this.source1||(this.source1={}),this.source2||(this.source2={}),this.$store.state.levelMapping.source2)"code"!==t&&this.source2Levels.push({text:this.$store.state.levelMapping.source2[t],value:t});for(var r in this.$store.state.levelMapping.source1)"code"!==r&&this.source1Levels.push({text:this.$store.state.levelMapping.source1[r],value:r})}},Oe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("center",[r("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.confirmPairDeleteDialog,callback:function(t){e.confirmPairDeleteDialog=t},expression:"confirmPairDeleteDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n            Confirm deleting\n          ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n          Are you sure you want to delete this data source pair\n        ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deletePair(t)}}},[e._v("Ok")])],1)],1)],1),e._v(" "),r("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),e._v(" "),r("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),e._v(" "),r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.pairLimitWarn,callback:function(t){e.pairLimitWarn=t},expression:"pairLimitWarn"}},[r("v-card",[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" Pair creation limit\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n          You cant create more pairs as this account is limited to one pair only at a time.\n        ")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[e._v("Ok")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.mapSourcePairLevels,callback:function(t){e.mapSourcePairLevels=t},expression:"mapSourcePairLevels"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" Data sources has different level counts, please map Levels to proceed\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeLevelMappingDialog(t)}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{attrs:{headers:e.pairLevelsMappingHeader,items:e.source1Levels},scopedSlots:e._u([{key:"items",fn:function(t){return[r("tr",[r("td",[e._v(e._s(t.item.text))]),e._v(" "),r("td",[e.pairLevelsMapping[t.item.value]?[e._v("\n                    "+e._s(e.$store.state.levelMapping.source2[e.pairLevelsMapping[t.item.value]])+"\n                    "),r("v-icon",{attrs:{small:""},on:{click:function(r){return e.clearMappingSelection(t.item.value)}}},[e._v("close")])]:r("v-select",{attrs:{items:e.source2Levels,clearable:""},on:{change:function(r){return e.mappingSelected(t.item.value)}},model:{value:e.pairLevelsMapping[t.item.value],callback:function(r){e.$set(e.pairLevelsMapping,t.item.value,r)},expression:"pairLevelsMapping[props.item.value]"}})],2)])]}}])})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error",round:""},on:{click:e.closeLevelMappingDialog}},[r("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",round:""}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save Mapping\n          ")],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[r("v-icon",[e._v("info")]),e._v(" About this page\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n          This page let you choose a pair of data sources to use for reconciliation\n          "),r("v-list",[e._v("1. Source 1 is the source while source 2 is the target")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[r("v-card",{attrs:{width:"530px"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n            Sharing "),e.sharePair.hasOwnProperty("source1")?[e._v(e._s(e.sharePair.source1.name)+" - "+e._s(e.sharePair.source2.name))]:e._e()],2),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers},scopedSlots:e._u([{key:"items",fn:function(t){return[t.item.userName!==e.$store.state.auth.username?r("tr",[r("td",[r("v-checkbox",{attrs:{value:t.item._id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),r("td",[e._v(e._s(t.item.userName))]),e._v(" "),r("td",[e._v(e._s(t.item.firstName))]),e._v(" "),r("td",[e._v(e._s(t.item.surname))])]):e._e()]}}])})],1),e._v(" "),r("v-card-actions",{staticStyle:{float:"center"}},[r("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.shareDialog=!1}}},[r("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.share("","saveShare")}}},[r("v-icon",{attrs:{left:""}},[e._v("share")]),e._v("Share\n          ")],1)],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:"","text-xs-right":""}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[r("v-icon",[e._v("help")])],1),e._v(" "),r("span",[e._v("Help")])],1)],1)],1),e._v(" "),r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-4"}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v("\n              Existing Data Source Pairs\n              "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchPairs,callback:function(t){e.searchPairs=t},expression:"searchPairs"}})],1)],1),e._v(" "),r("v-card-text",{staticStyle:{float:"center"}},[r("v-data-table",{attrs:{headers:e.sourcePairHeaders,items:e.$store.state.dataSourcePairs,search:e.searchPairs,loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.source1.name)+" - "+e._s(t.item.source2.name))]),e._v(" "),r("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),r("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.activeDataSourcePair,callback:function(t){e.activeDataSourcePair=t},expression:"activeDataSourcePair"}},[r("td",[r("v-radio",{attrs:{value:t.item,color:"blue"}})],1)]),e._v(" "),r("td",[e._v("\n                  "+e._s(e._f("mergeUsers")(t.item.shared.users))+"\n                ")]),e._v(" "),t.item.userID._id===e.$store.state.auth.userID?r("td",[r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(r){return e.share(t.item,"showDialog")}}},[r("v-icon",[e._v("share")]),e._v("Share\n                  ")],1)],1):e._e()]}}])},[r("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",round:""},on:{click:e.activatePair}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Activate Pair\n            ")],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},He=r("VU/8")(Ne,Oe,!1,null,null,null).exports,je={mixins:[M],methods:{getDHIS2UserData:function(e){var t=this,r=this.$store.state.dhis.dev.auth;""===r.username&&(r=""),g.a.get(this.$store.state.dhis.host+"api/me",{auth:r}).then(function(a){var s=a.data.organisationUnits;s.length>0&&(t.$store.state.dhis.user.orgId=s.shift().id,g.a.get(t.$store.state.dhis.host+"api/organisationUnits/"+t.$store.state.dhis.user.orgId,{auth:r}).then(function(r){return t.$store.state.dhis.user.orgName=r.data.displayName,e(a)}))}).catch(function(e){t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",e.response&&e.response.data&&401===e.response.data.httpStatusCode?(t.$store.state.errorDescription="Unauthorized, ensure that your DHIS2 login is active",t.$router.push({name:"Logout"})):t.$store.state.errorDescription="Unauthorized, please reload the app"})}},created:function(){var e=this;this.setDHIS2Credentials(),this.getRoles(),this.getDHIS2UserData(function(t){var r=void 0,a=void 0;if(t.data.userCredentials.userRoles.find(function(t){return t.id===e.$store.state.config.generalConfig.externalAuth.adminRole})){var s=e.roles.find(function(e){return"Admin"===e.text});r=s.value,a=s.text}else{var i=e.roles.find(function(e){return"Data Manager"===e.text});r=i.value,a=i.text}g.a.get("http://41.59.227.79:8083/getUser/"+t.data.userCredentials.username).then(function(s){if(s.data.userID)e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=s.data.userID,e.$store.state.auth.role=a,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,yr.$emit("getConfig");else{var i=new FormData;i.append("firstName",t.data.firstName),i.append("otherName",""),i.append("password",t.data.surname),i.append("userName",t.data.userCredentials.username),i.append("surname",t.data.surname),i.append("role",r),g.a.post("http://41.59.227.79:8083/addUser",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(r){g.a.get("http://41.59.227.79:8083/getUser/"+t.data.userCredentials.username).then(function(r){r.data.userID&&(e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=r.data.userID,e.$store.state.auth.role=r.data.role,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,yr.$emit("getConfig"))})})}})})}},Ve={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},Je=r("VU/8")(je,Ve,!1,null,null,null).exports,Be={mixins:[M],validations:{name:{required:x.required}},data:function(){return{loadingTree:!1,alertFail:!1,alertSuccess:!1,alertMsg:"",searchJurisdiction:"",activeJurisdiction:{},jurisdictionHierarchy:[],name:"",code:"",treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}}}},methods:{selectedJurisdiction:function(e){this.activeJurisdiction=e},addLocation:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("code",this.code),this.activeJurisdiction.id&&t.append("parent",this.activeJurisdiction.id),console.log(this.activeJurisdiction),this.activeJurisdiction&&this.activeJurisdiction.data&&this.activeJurisdiction.data.level?t.append("level",this.activeJurisdiction.data.level):t.append("level",0),g.a.post("http://41.59.227.79:8083/FR/addJurisdiction",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.alertSuccess=!0,e.alertMsg="Jurisdiction added successfully!",e.$refs.form.reset(),e.getTree(!1,!1,function(t,r){t||(e.jurisdictionHierarchy=r),e.loadingTree=!1})}).catch(function(t){e.alertFail=!0,e.alertMsg="Failed to add Jurisdiction!",console.log(t)})}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e}},created:function(){var e=this;this.loadingTree=!0,this.jurisdictionHierarchy=[],this.getTree(!1,!1,function(t,r){t||(e.jurisdictionHierarchy=r),e.loadingTree=!1})},components:{"liquor-tree":ae.a}},We={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[[r("v-card",[r("v-card-title",{staticClass:"indigo white--text headline"},[e._v("\n        Jurisdiction Hierarchy\n      ")]),e._v(" "),r("v-layout",{attrs:{"justify-space-between":"","pa-4":""}},[r("v-flex",{attrs:{xs5:""}},[e.loadingTree?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?r("v-text-field",{attrs:{"append-icon":"search",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}):e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2),e._v(" "),r("v-divider",{attrs:{vertical:""}}),e._v(" "),r("v-flex",{attrs:{"d-flex":"","text-center":""}},[r("v-scroll-y-transition",{attrs:{mode:"out-in"}},[r("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:"","max-width":"500"}},[r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n                "+e._s(e.alertMsg)+"\n              ")]),e._v(" "),r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n                "+e._s(e.alertMsg)+"\n              ")]),e._v(" "),r("v-card-title",{attrs:{"primary-title":""}},[e.activeJurisdiction.id?[r("b",[e._v("Adding New Jurisdiction Under "+e._s(e.activeJurisdiction.text))])]:[r("b",[e._v("Adding New Jurisdiction On Top Level")])]],2),e._v(" "),r("v-card-text",[r("v-card",[r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[r("v-icon",[e._v("clear")]),e._v("Clear\n                    ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid||!this.activeJurisdiction||!this.activeJurisdiction.data,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addLocation()}}},[r("v-icon",{attrs:{left:""}},[e._v("language")]),e._v("Add\n                    ")],1)],1)],1)],1)],1)],1)],1)],1)],1)]],2)},staticRenderFns:[]},Ge=r("VU/8")(Be,We,!1,null,null,null).exports,ze={mixins:[M],data:function(){return{loadingTree:!1,treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}},jurisdictionHierarchy:[],activeJurisdiction:{},searchJurisdiction:"",approve:!1,acceptingItem:{},searchJurisdictions:"",loadingJurisdictions:!1,facilities:[],buildings:[],buildingsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"HFR Code",value:"code"},{text:"Parent",value:"parent"},{text:"Status",value:"status"}],tasksVerification:zt}},computed:{canAdd:function(){return!!this.activeJurisdiction.id}},methods:{canEditBuilding:function(e){return!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},canChangeRequestStatus:function(e,t){return!!("update"===this.requestType&&this.tasksVerification.canApprove("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canApprove("NewFacilitiesRequestsReport")||"update"===this.requestType&&this.tasksVerification.canReject("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canReject("NewFacilitiesRequestsReport"))},selectedJurisdiction:function(e){this.activeJurisdiction=e},getMissingFromHFR:function(){var e=this;this.facilities=[],this.buildings=[],this.loadingJurisdictions=!0,g.a.get("http://41.59.227.79:8083/FR/getJurisdictionsMissingFromHFR",{params:{action:"request",requestCategory:"requestsList"}}).then(function(t){e.loadingJurisdictions=!1,e.buildings=t.data}).catch(function(t){e.loadingJurisdictions=!1,console.log(t)})},accept:function(e){this.activeJurisdiction={},this.acceptingItem=e,this.approve=!0},addFromHFR:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving ...";var t=new FormData;t.append("id",this.acceptingItem.id),t.append("parent",this.activeJurisdiction.id),t.append("parentLevel",this.activeJurisdiction.data.level),g.a.post("http://41.59.227.79:8083/FR/addFromHFR",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Facility added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Failed to add Facility!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})}},created:function(){var e=this;this.getMissingFromHFR(),this.loadingTree=!0,this.getTree(!1,!1,function(t,r){t||(e.jurisdictionHierarchy=r),e.loadingTree=!1})},components:{"liquor-tree":ae.a}},Ye={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{width:"630px"},model:{value:e.approve,callback:function(t){e.approve=t},expression:"approve"}},[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n        Accepting HFR Admin Area - "+e._s(e.acceptingItem.name)+"\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.approve=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card",[r("v-card-text",[e._v("\n        Selected Parent: "+e._s(e.activeJurisdiction.text)+"\n        "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}),e._v("\n        Parent In HFR "+e._s(e.acceptingItem.parent)+"\n      ")],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.approve=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{disabled:!e.canAdd,color:"error"},on:{click:e.addFromHFR}},[e._v("Add")])],1)],1)],1),e._v(" "),r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[e._v("\n          HFR Admin Area Missing Inside Admin Area App\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchJurisdictions,callback:function(t){e.searchJurisdictions=t},expression:"searchJurisdictions"}})],1)],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingJurisdictions,headers:e.buildingsHeaders,items:e.buildings,search:e.searchJurisdictions},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",icon:"",color:"success"},on:{click:function(r){return e.accept(t.item)}},slot:"activator"},[r("v-icon",[e._v("check_circle")])],1),e._v(" "),r("span",[e._v("Accept")])],1)],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.code))]),e._v(" "),r("td",[e._v(e._s(t.item.parent))]),e._v(" "),r("td",[e._v(e._s(t.item.status.text))])]}}])})],1)],1)],1)},staticRenderFns:[]},Ke=r("VU/8")(ze,Ye,!1,null,null,null).exports,Xe={mixins:[M],data:function(){return{loadingTree:!1,treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}},keepParent:!1,jurisdictionHierarchy:[],activeJurisdiction:{},originalFacility:{},searchJurisdiction:"",approve:!1,acceptingItem:{},searchJurisdictions:"",loadingJurisdictions:!1,facilities:[],buildings:[],buildingsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"HFR Code",value:"code"},{text:"Parent",value:"parent"},{text:"Status",value:"status"}],tasksVerification:zt}},computed:{canAdd:function(){return!(!this.activeJurisdiction.id&&!this.keepParent)}},methods:{canEditBuilding:function(e){return!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},canChangeRequestStatus:function(e,t){return!!("update"===this.requestType&&this.tasksVerification.canApprove("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canApprove("NewFacilitiesRequestsReport")||"update"===this.requestType&&this.tasksVerification.canReject("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canReject("NewFacilitiesRequestsReport"))},selectedJurisdiction:function(e){this.activeJurisdiction=e},getUpdatedFromHFR:function(){var e=this;this.facilities=[],this.buildings=[],this.loadingJurisdictions=!0,g.a.get("http://41.59.227.79:8083/FR/getJurisdictionsUpdatedFromHFR",{params:{action:"request",requestCategory:"requestsList"}}).then(function(t){e.loadingJurisdictions=!1,e.buildings=t.data}).catch(function(t){e.loadingJurisdictions=!1,console.log(t)})},accept:function(e){var t=this;g.a.get("/FR/getLocationByID/"+e.ouuid).then(function(r){t.activeJurisdiction={},t.acceptingItem=e,t.approve=!0,t.originalFacility=r.data})},updateFromHFR:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving ...";var t=new FormData;t.append("id",this.acceptingItem.id),t.append("ouuid",this.acceptingItem.ouuid),this.keepParent||(t.append("parent",this.activeJurisdiction.id),t.append("parentLevel",this.activeJurisdiction.data.level)),g.a.post("http://41.59.227.79:8083/FR/updateFromHFR",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Facility added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Failed to add Facility!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})}},created:function(){var e=this;this.getUpdatedFromHFR(),this.loadingTree=!0,this.getTree(!1,!1,function(t,r){t||(e.jurisdictionHierarchy=r),e.loadingTree=!1})},components:{"liquor-tree":ae.a}},Ze={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{width:"630px"},model:{value:e.approve,callback:function(t){e.approve=t},expression:"approve"}},[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n        Accepting Updated HFR Admin Area\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.approve=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card",[r("v-card-text",[e._v("\n        Selected Parent: "),e.keepParent?e._e():[e._v(e._s(e.activeJurisdiction.text))],e._v(" "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}),e._v(" "),r("v-checkbox",{attrs:{label:"Keep Existing Parent"},model:{value:e.keepParent,callback:function(t){e.keepParent=t},expression:"keepParent"}}),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("b",[e._v("Current State")])]),e._v(" "),r("v-flex",[e._v("\n                Name: "+e._s(e.originalFacility.name)+"\n              ")]),e._v(" "),e.originalFacility.status?r("v-flex",[e._v("\n                Status: "+e._s(e.originalFacility.status.text)+"\n              ")]):e._e(),e._v(" "),r("v-flex",[e._v("\n                Parent: "+e._s(e.originalFacility.parent)+"\n              ")])],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("b",[e._v("HFR Values")])]),e._v(" "),r("v-flex",[e._v("\n                Name: "+e._s(e.acceptingItem.name)+"\n              ")]),e._v(" "),e.acceptingItem.status?r("v-flex",[e._v("\n                Status: "+e._s(e.acceptingItem.status.text)+"\n              ")]):e._e(),e._v(" "),r("v-flex",[e._v("\n                Parent: "+e._s(e.acceptingItem.parent)+"\n              ")])],1)],1)],1)],2),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.approve=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{disabled:!e.canAdd,color:"error"},on:{click:e.updateFromHFR}},[e._v("Update")])],1)],1)],1),e._v(" "),r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[e._v("\n          Updated HFR Administrative Areas\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchJurisdictions,callback:function(t){e.searchJurisdictions=t},expression:"searchJurisdictions"}})],1)],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingJurisdictions,headers:e.buildingsHeaders,items:e.buildings,search:e.searchJurisdictions},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",icon:"",color:"success"},on:{click:function(r){return e.accept(t.item)}},slot:"activator"},[r("v-icon",[e._v("check_circle")])],1),e._v(" "),r("span",[e._v("Accept")])],1)],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.code))]),e._v(" "),r("td",[e._v(e._s(t.item.parent))]),e._v(" "),r("td",[e._v(e._s(t.item.status.text))])]}}])})],1)],1)],1)},staticRenderFns:[]},Qe=r("VU/8")(Xe,Ze,!1,null,null,null).exports,et={mixins:[M],validations:{name:{required:x.required}},props:["action","requestType"],data:function(){return{loadingTree:!1,searchJurisdiction:"",activeJurisdiction:{},jurisdictionHierarchy:[],treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}},name:"",alt_name:"",code:"",description:"",facilityType:"",ownerships:[{text:"Concesion",value:"CNCS"},{text:"Public",value:"PBLC"},{text:"Private",value:"PRVT"},{text:"Private Faith Based",value:"PFBO"},{text:"Private Not Profit",value:"PNPR"}],facilityOwnership:"",status:[{text:"Functional",value:"active"},{text:"Not Functional",value:"inactive"},{text:"Suspended",value:"suspended"}],facilityStatus:"",lat:"",long:"",contact:{email:"",phone:"",fax:"",website:""}}},methods:{selectedJurisdiction:function(e){this.activeJurisdiction=e},addLocation:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("alt_name",this.alt_name),t.append("code",this.code),t.append("action",this.action),t.append("requestType",this.requestType),t.append("username",this.$store.state.auth.username),this.facilityType&&t.append("type",this.facilityType),this.facilityStatus&&t.append("status",this.facilityStatus),this.facilityOwnership&&t.append("ownership",this.facilityOwnership),this.lat&&t.append("lat",this.lat),this.long&&t.append("long",this.long),t.append("contact",s()(this.contact)),this.description&&t.append("description",this.description),t.append("parent",this.activeJurisdiction.id),g.a.post("http://41.59.227.79:8083/FR/addBuilding",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Facility added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Failed to add Facility!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e}},created:function(){var e=this;this.loadingTree=!0,this.jurisdictionHierarchy=[],this.getTree(!1,!1,function(t,r){t||(e.jurisdictionHierarchy=r),e.loadingTree=!1})},components:{"liquor-tree":ae.a}},tt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[[r("v-card",[r("v-card-title",{staticClass:"indigo white--text headline"},["request"===e.action?[e._v("\n          Fill Details Below About A New Facility And Submit For Approval\n        ")]:e._e(),e._v(" "),"add"===e.action?[e._v("\n          Fill Details Below To Add A New Facility\n        ")]:e._e()],2),e._v(" "),r("v-layout",{attrs:{"justify-space-between":"","pa-4":""}},[r("v-scroll-y-transition",[r("v-flex",{attrs:{xs5:""}},[e.loadingTree?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?r("v-text-field",{attrs:{"append-icon":"search",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}):e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2)],1),e._v(" "),r("v-divider",{attrs:{vertical:""}}),e._v(" "),r("v-flex",{attrs:{"d-flex":"","text-center":""}},[r("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.activeJurisdiction.id?r("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("b",["request"===e.action?[e._v("\n                    Requesting New Facility Under "+e._s(e.activeJurisdiction.text)+"\n                  ")]:"add"===e.action?[e._v("\n                    Adding New Facility Under "+e._s(e.activeJurisdiction.text)+"\n                  ")]:e._e()],2)]),e._v(" "),r("v-card-text",[r("v-card",[r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Alternative Name"},model:{value:e.alt_name,callback:function(t){e.alt_name=t},expression:"alt_name"}})],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-select",{attrs:{clearable:"","item-text":"display","item-value":"code",items:e.$store.state.facilityTypes,label:"Facility Type"},model:{value:e.facilityType,callback:function(t){e.facilityType=t},expression:"facilityType"}})],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-select",{attrs:{clearable:"",items:e.status,label:"Status"},model:{value:e.facilityStatus,callback:function(t){e.facilityStatus=t},expression:"facilityStatus"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-select",{attrs:{clearable:"",items:e.ownerships,label:"Facility Ownership"},model:{value:e.facilityOwnership,callback:function(t){e.facilityOwnership=t},expression:"facilityOwnership"}})],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Latitude"},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Longitude"},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                            Contacts Informations\n                          ")]),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-textarea",{attrs:{outline:"",label:"Facility Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[r("v-icon",[e._v("clear")]),e._v("Clear\n                    ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addLocation()}}},[r("v-icon",{attrs:{left:""}},[e._v("language")]),e._v(" "),"request"===e.action?[e._v("\n                        Send Request\n                      ")]:"add"===e.action?[e._v("\n                        Add\n                      ")]:e._e()],2)],1)],1)],1)],1):["request"===e.action?[r("b",[e._v("Select a location on the left to request a new facility")])]:"add"===e.action?[r("b",[e._v("Select a location on the left to add a facility")])]:e._e()]],2)],1)],1)],1)]],2)},staticRenderFns:[]},rt=r("VU/8")(et,tt,!1,null,null,null).exports,at={components:{CreateFacility:rt}},st={render:function(){var e=this.$createElement;return(this._self._c||e)("CreateFacility",{attrs:{action:"add"}})},staticRenderFns:[]},it=r("VU/8")(at,st,!1,null,null,null).exports,ot={mixins:[M],data:function(){return{loadingTree:!1,treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}},jurisdictionHierarchy:[],activeJurisdiction:{},searchJurisdiction:"",approve:!1,acceptingItem:{},searchBuildings:"",loadingBuildings:!1,facilities:[],buildings:[],buildingsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"HFR Code",value:"hfrcode"},{text:"HFR ID",value:"hfrid"},{text:"Parent",value:"parent"},{text:"Facility Type",value:"type"},{text:"Facility Ownership",value:"ownership"},{text:"Status",value:"status"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],tasksVerification:zt}},computed:{canAdd:function(){return!!this.activeJurisdiction.id}},methods:{canEditBuilding:function(e){return!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},canChangeRequestStatus:function(e,t){return!!("update"===this.requestType&&this.tasksVerification.canApprove("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canApprove("NewFacilitiesRequestsReport")||"update"===this.requestType&&this.tasksVerification.canReject("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canReject("NewFacilitiesRequestsReport"))},selectedJurisdiction:function(e){this.activeJurisdiction=e},getMissingFromHFR:function(){var e=this;this.facilities=[],this.buildings=[],this.loadingBuildings=!0,g.a.get("http://41.59.227.79:8083/FR/getFacilityMissingFromHFR",{params:{action:"request",requestCategory:"requestsList"}}).then(function(t){e.loadingBuildings=!1,e.buildings=t.data}).catch(function(t){e.loadingBuildings=!1,console.log(t)})},accept:function(e){this.activeJurisdiction={},this.acceptingItem=e,this.approve=!0},addFromHFR:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving ...";var t=new FormData;t.append("id",this.acceptingItem.id),t.append("parent",this.activeJurisdiction.id),g.a.post("http://41.59.227.79:8083/FR/addFromHFR",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Facility added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Failed to add Facility!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})}},created:function(){var e=this;this.getMissingFromHFR(),this.loadingTree=!0,this.getTree(!1,!1,function(t,r){t||(e.jurisdictionHierarchy=r),e.loadingTree=!1})},components:{"liquor-tree":ae.a}},nt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{width:"630px"},model:{value:e.approve,callback:function(t){e.approve=t},expression:"approve"}},[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n        Accepting HFR Facility - "+e._s(e.acceptingItem.name)+"\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.approve=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card",[r("v-card-text",[e._v("\n        Selected Parent: "+e._s(e.activeJurisdiction.text)+"\n        "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}),e._v("\n        Parent In HFR "+e._s(e.acceptingItem.parent)+"\n      ")],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.approve=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{disabled:!e.canAdd,color:"error"},on:{click:e.addFromHFR}},[e._v("Add")])],1)],1)],1),e._v(" "),r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[e._v("\n          HFR Facilities Missing Inside Admin Area App\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchBuildings,callback:function(t){e.searchBuildings=t},expression:"searchBuildings"}})],1)],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingBuildings,headers:e.buildingsHeaders,items:e.buildings,search:e.searchBuildings},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",icon:"",color:"success"},on:{click:function(r){return e.accept(t.item)}},slot:"activator"},[r("v-icon",[e._v("check_circle")])],1),e._v(" "),r("span",[e._v("Accept")])],1)],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.hfrcode))]),e._v(" "),r("td",[e._v(e._s(t.item.hfrid))]),e._v(" "),r("td",[e._v(e._s(t.item.parent))]),e._v(" "),r("td",[e._v(e._s(t.item.type.text))]),e._v(" "),r("td",[e._v(e._s(t.item.ownership.text))]),e._v(" "),r("td",[e._v(e._s(t.item.status.text))]),e._v(" "),r("td",[e._v(e._s(t.item.lat))]),e._v(" "),r("td",[e._v(e._s(t.item.long))])]}}])})],1)],1)],1)},staticRenderFns:[]},lt=r("VU/8")(ot,nt,!1,null,null,null).exports,ct={mixins:[M],data:function(){return{loadingTree:!1,treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}},originalFacility:{},jurisdictionHierarchy:[],activeJurisdiction:{},searchJurisdiction:"",keepParent:!1,approve:!1,acceptingItem:{},searchBuildings:"",loadingBuildings:!1,facilities:[],buildings:[],buildingsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"HFR Code",value:"hfrcode"},{text:"HFR ID",value:"hfrid"},{text:"Parent",value:"parent"},{text:"Facility Type",value:"type"},{text:"Facility Ownership",value:"ownership"},{text:"Status",value:"status"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],tasksVerification:zt}},computed:{canAdd:function(){return!(!this.activeJurisdiction.id&&!this.keepParent)}},methods:{canEditBuilding:function(e){return!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},canChangeRequestStatus:function(e,t){return!!("update"===this.requestType&&this.tasksVerification.canApprove("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canApprove("NewFacilitiesRequestsReport")||"update"===this.requestType&&this.tasksVerification.canReject("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canReject("NewFacilitiesRequestsReport"))},selectedJurisdiction:function(e){this.activeJurisdiction=e},getUpdatedFromHFR:function(){var e=this;this.facilities=[],this.buildings=[],this.loadingBuildings=!0,g.a.get("http://41.59.227.79:8083/FR/getFacilityUpdatedFromHFR",{params:{action:"request",requestCategory:"requestsList"}}).then(function(t){e.loadingBuildings=!1,e.buildings=t.data}).catch(function(t){e.loadingBuildings=!1,console.log(t)})},accept:function(e){var t=this;g.a.get("/FR/getLocationByID/"+e.ouuid).then(function(r){t.activeJurisdiction={},t.acceptingItem=e,t.approve=!0,t.originalFacility=r.data})},updateFromHFR:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving ...";var t=new FormData;t.append("id",this.acceptingItem.id),t.append("ouuid",this.acceptingItem.ouuid),this.keepParent||t.append("parent",this.activeJurisdiction.id),g.a.post("http://41.59.227.79:8083/FR/updateFromHFR",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Facility added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Failed to add Facility!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})}},created:function(){var e=this;this.getUpdatedFromHFR(),this.loadingTree=!0,this.getTree(!1,!1,function(t,r){t||(e.jurisdictionHierarchy=r),e.loadingTree=!1})},components:{"liquor-tree":ae.a}},ut={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{width:"1000px"},model:{value:e.approve,callback:function(t){e.approve=t},expression:"approve"}},[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n        Accepting HFR Facility Updates\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.approve=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card",{directives:[{name:"show",rawName:"v-show",value:e.approve,expression:"approve"}]},[r("v-card-text",[e._v("\n        Selected Parent: "),e.keepParent?e._e():[e._v(e._s(e.activeJurisdiction.text))],e._v(" "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}),e._v(" "),r("v-checkbox",{attrs:{label:"Keep Existing Parent"},model:{value:e.keepParent,callback:function(t){e.keepParent=t},expression:"keepParent"}}),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("b",[e._v("Current State")])]),e._v(" "),r("v-flex",[e._v("\n                Name: "+e._s(e.originalFacility.name)+"\n              ")]),e._v(" "),r("v-flex",[e._v("\n                Facility Code: "+e._s(e.originalFacility.code)+"\n              ")]),e._v(" "),e.originalFacility.type?r("v-flex",[e._v("\n                Type: "),e.originalFacility.type.text?[e._v(e._s(e.originalFacility.type.text))]:e.originalFacility.type.code?[e._v(e._s(e.originalFacility.type.code))]:e._e()],2):e._e(),e._v(" "),e.originalFacility.status?r("v-flex",[e._v("\n                Status: "+e._s(e.originalFacility.status.text)+"\n              ")]):e._e(),e._v(" "),r("v-flex",[e._v("\n                Parent: "+e._s(e.originalFacility.parent)+"\n              ")])],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("b",[e._v("HFR Values")])]),e._v(" "),r("v-flex",[e._v("\n                Name: "+e._s(e.acceptingItem.name)+"\n              ")]),e._v(" "),r("v-flex",[e._v("\n                Facility Code: "+e._s(e.acceptingItem.code)+"\n              ")]),e._v(" "),e.acceptingItem.type?r("v-flex",[e._v("\n                Type: "+e._s(e.acceptingItem.type.text)+"\n              ")]):e._e(),e._v(" "),e.acceptingItem.status?r("v-flex",[e._v("\n                Status: "+e._s(e.acceptingItem.status.text)+"\n              ")]):e._e(),e._v(" "),r("v-flex",[e._v("\n                Parent: "+e._s(e.acceptingItem.parent)+"\n              ")])],1)],1)],1)],2),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.approve=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{disabled:!e.canAdd,color:"error"},on:{click:e.updateFromHFR}},[e._v("Update")])],1)],1)],1),e._v(" "),r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[e._v("\n          Updated HFR Facilities\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchBuildings,callback:function(t){e.searchBuildings=t},expression:"searchBuildings"}})],1)],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingBuildings,headers:e.buildingsHeaders,items:e.buildings,search:e.searchBuildings},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",icon:"",color:"success"},on:{click:function(r){return e.accept(t.item)}},slot:"activator"},[r("v-icon",[e._v("check_circle")])],1),e._v(" "),r("span",[e._v("Accept")])],1)],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.hfrcode))]),e._v(" "),r("td",[e._v(e._s(t.item.hfrid))]),e._v(" "),r("td",[e._v(e._s(t.item.parent))]),e._v(" "),r("td",[e._v(e._s(t.item.type.text))]),e._v(" "),r("td",[e._v(e._s(t.item.ownership.text))]),e._v(" "),r("td",[e._v(e._s(t.item.status.text))]),e._v(" "),r("td",[e._v(e._s(t.item.lat))]),e._v(" "),r("td",[e._v(e._s(t.item.long))])]}}])})],1)],1)],1)},staticRenderFns:[]},dt=r("VU/8")(ct,ut,!1,null,null,null).exports,vt={components:{CreateFacility:rt}},pt={render:function(){var e=this.$createElement;return(this._self._c||e)("CreateFacility",{attrs:{action:"request",requestType:"add"}})},staticRenderFns:[]},ht=r("VU/8")(vt,pt,!1,null,null,null).exports,gt={mixins:[M],validations:{name:{required:x.required}},props:["action","requestType","requestCategory"],data:function(){return{facilityId:"",editDialog:!1,loadingTree:!1,loadingBuildings:!1,buildingsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Parent",value:"parent"},{text:"Facility Type",value:"type"},{text:"Facility Ownership",value:"ownership"},{text:"Status",value:"status"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],searchJurisdiction:"",searchBuildings:"",activeJurisdiction:{},jurisdictionHierarchy:[],treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}},buildings:[],name:"",alt_name:"",code:"",description:"",facilityType:"",types:[{text:"Clinic",value:"CLNC"},{text:"Dispensary",value:"DSPN"},{text:"Health Center",value:"HCNT"},{text:"Health Post",value:"HPST"},{text:"Hospital",value:"HOSP"}],ownerships:[{text:"Concesion",value:"CNCS"},{text:"Public",value:"PBLC"},{text:"Private",value:"PRVT"},{text:"Private Faith Based",value:"PFBO"},{text:"Private Not Profit",value:"PNPR"}],facilityOwnership:"",status:[{text:"Functional",value:"active"},{text:"Not Functional",value:"inactive"},{text:"Suspended",value:"suspended"}],facilityStatus:"",facilityParent:{},lat:"",long:"",contact:{email:"",phone:"",fax:"",website:""},requestStatus:"",confirm:!1,confirmTitle:"",tasksVerification:zt}},methods:{changeRequestStatus:function(e,t,r){var a=this;if(r){this.requestStatus=t;var s=void 0;"approved"===t?s="approved":"rejected"===t&&(s="rejected"),this.confirm=!0,this.confirmTitle="Are you sure that you want to mark facility "+e.name+" as "+s,this.facilityId=e.id}else{this.$store.state.progressTitle="Saving new status",this.confirm=!1,this.$store.state.dynamicProgress=!0;var i=new FormData;i.append("id",this.facilityId),i.append("status",this.requestStatus),i.append("requestType",this.requestType),g.a.post("http://41.59.227.79:8083/FR/changeBuildingRequestStatus",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){a.$store.state.dynamicProgress=!1,a.$store.state.errorTitle="Info",a.$store.state.errorDescription="Request status changed successfully",a.$store.state.dialogError=!0,a.getBuildings()}).catch(function(e){a.$store.state.errorTitle="Error",a.$store.state.errorDescription="This request was not successfully processed",a.$store.state.dialogError=!0,console.log(e)})}},canChangeRequestStatus:function(e,t){if("request"!==this.action||"request"===this.action&&"requestsList"!==this.requestCategory)return!1;if("approve"===t){if("Approved"===e.requestStatus)return!1}else if("reject"===t&&("Approved"===e.requestStatus||"Rejected"===e.requestStatus))return!1;return!!("update"===this.requestType&&this.tasksVerification.canApprove("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canApprove("NewFacilitiesRequestsReport")||"update"===this.requestType&&this.tasksVerification.canReject("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canReject("NewFacilitiesRequestsReport"))},canEditBuilding:function(e){return("Approved"!==e.requestStatus||"requestsList"!==this.requestCategory)&&!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},getBuildings:function(){var e=this;this.facilities=[],this.buildings=[],this.loadingBuildings=!0,g.a.get("http://41.59.227.79:8083/FR/getBuildings",{params:{jurisdiction:this.activeJurisdiction.id,action:this.action,requestType:this.requestType,requestCategory:this.requestCategory}}).then(function(t){e.loadingBuildings=!1,e.buildings=t.data}).catch(function(t){e.loadingBuildings=!1,console.log(t)})},selectedJurisdiction:function(e){this.activeJurisdiction=e,this.getBuildings()},selectedEditJurisdiction:function(e){this.facilityParent=e},edit:function(e){this.facilityId=e.id,this.facilityType=e.type.code,this.facilityStatus=e.status.code,this.facilityParent.id=e.parent.id,this.facilityParent.text=e.parent.name,this.facilityOwnership=e.ownership.code,this.name=e.name,this.alt_name=e.alt_name,this.code=e.code,this.lat=e.lat,this.long=e.long,this.contact.phone=e.phone,this.contact.email=e.email,this.contact.website=e.website,this.contact.fax=e.fax,this.description=e.description,this.editDialog=!0},saveEdit:function(){var e=this,t=new FormData;t.append("id",this.facilityId),t.append("name",this.name),t.append("alt_name",this.alt_name),t.append("code",this.code),t.append("action",this.action),t.append("requestType",this.requestType),t.append("username",this.$store.state.auth.username),this.facilityType&&t.append("type",this.facilityType),this.facilityStatus&&t.append("status",this.facilityStatus),this.facilityOwnership&&t.append("ownership",this.facilityOwnership),this.lat&&t.append("lat",this.lat),this.long&&t.append("long",this.long),t.append("contact",s()(this.contact)),this.description&&t.append("description",this.description),t.append("parent",this.facilityParent.id),this.$store.state.progressTitle="Saving Changes",this.editDialog=!1,this.$store.state.dynamicProgress=!0,g.a.post("http://41.59.227.79:8083/FR/addBuilding",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.errorTitle="Changes Saved",e.$store.state.errorDescription="Changes saved successfully",e.$store.state.dialogError=!0,e.getBuildings()}).catch(function(t){e.$store.state.errorTitle="Failed To Save Changes",e.$store.state.errorDescription="Failed To Save Changes",e.$store.state.dialogError=!0,console.log(t)})}},created:function(){var e=this;this.loadingTree=!0,this.getTree(!1,!1,function(t,r){t?e.loadingTree=!1:(e.loadingTree=!1,e.jurisdictionHierarchy=r)}),"request"===this.action&&"requestsList"===this.requestCategory&&this.buildingsHeaders.push({text:"Request Status",value:"requestStatus"})},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e}},components:{"liquor-tree":ae.a}},ft={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{width:"630px"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n        Confirmation\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirm=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card",[r("v-card-text",[e._v("\n        "+e._s(e.confirmTitle)+"\n      ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirm=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.changeRequestStatus}},[e._v("Proceed")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"800px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n        Editing "+e._s(e.name)+"\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("close")])],1),e._v(" "),r("v-card",[r("v-card-text",[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",{attrs:{xs1:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Alternative Name"},model:{value:e.alt_name,callback:function(t){e.alt_name=t},expression:"alt_name"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-select",{attrs:{clearable:"","item-text":"display","item-value":"code",items:e.$store.state.facilityTypes,label:"Facility Type"},model:{value:e.facilityType,callback:function(t){e.facilityType=t},expression:"facilityType"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-select",{attrs:{clearable:"",items:e.status,label:"Status"},model:{value:e.facilityStatus,callback:function(t){e.facilityStatus=t},expression:"facilityStatus"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-select",{attrs:{clearable:"",items:e.ownerships,label:"Facility Ownership"},model:{value:e.facilityOwnership,callback:function(t){e.facilityOwnership=t},expression:"facilityOwnership"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Latitude"},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Longitude"},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                Contacts Informations\n              ")]),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-textarea",{attrs:{outline:"",label:"Facility Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),r("v-flex",{attrs:{color:"white"}},[e._v("\n            Selected Parent: "),r("b",[e._v(e._s(e.facilityParent.text))]),r("br"),r("br"),e._v("\n            Choose Different Parent\n            "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedEditJurisdiction},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node;return r("div",{staticClass:"node-container"},[r("div",{staticClass:"node-text"},[e._v(e._s(a.text))])])}}],null,!1,893252766)}):e._e()],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-toolbar",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:"","text-sm-left":""}},[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[r("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel\n                  ")],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:"","text-sm-right":""}},[r("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" "),"updateRequest"===e.requestCategory?[e._v("\n                      Send Request\n                    ")]:[e._v("\n                      Save\n                    ")]],2)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-card",[r("v-card-title",{staticClass:"indigo white--text headline"},["updateRequest"===e.requestCategory?[e._v("\n        Choose Facility To Request Change Of Information\n      ")]:[e._v("\n        Facilities List\n      ")]],2),e._v(" "),r("v-layout",{attrs:{"justify-space-between":""}},[r("v-scroll-y-transition",[r("v-flex",{attrs:{xs2:""}},[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}),e._v(" "),e.loadingTree?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2)],1),e._v(" "),r("v-divider",{attrs:{vertical:""}}),e._v(" "),r("v-flex",{attrs:{"d-flex":"","text-center":""}},[r("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.activeJurisdiction.id?r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[r("b",[r("center",[e._v("Facilities Under "+e._s(e.activeJurisdiction.text))])],1)]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchBuildings,callback:function(t){e.searchBuildings=t},expression:"searchBuildings"}})],1)],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingBuildings,headers:e.buildingsHeaders,items:e.buildings,search:e.searchBuildings},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-tooltip",{attrs:{top:""}},[e.canEditBuilding(t.item)?r("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:function(r){return e.edit(t.item)}},slot:"activator"},[r("v-icon",[e._v("edit")])],1):e._e(),e._v(" "),r("span",[e._v("Edit")])],1),e._v(" "),"request"===e.action?r("v-tooltip",{attrs:{top:""}},[e.canChangeRequestStatus(t.item,"approve")?r("v-btn",{attrs:{slot:"activator",icon:"",color:"success"},on:{click:function(r){return e.changeRequestStatus(t.item,"approved",!0)}},slot:"activator"},[r("v-icon",[e._v("check_circle")])],1):e._e(),e._v(" "),r("span",[e._v("Approve")])],1):e._e(),e._v(" "),"request"===e.action?r("v-tooltip",{attrs:{top:""}},[e.canChangeRequestStatus(t.item,"reject")?r("v-btn",{attrs:{slot:"activator",icon:"",color:"error"},on:{click:function(r){return e.changeRequestStatus(t.item,"rejected",!0)}},slot:"activator"},[r("v-icon",[e._v("cancel")])],1):e._e(),e._v(" "),r("span",[e._v("Reject")])],1):e._e()],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.code))]),e._v(" "),r("td",[e._v(e._s(t.item.parent.name))]),e._v(" "),r("td",[e._v(e._s(t.item.type.text))]),e._v(" "),r("td",[e._v(e._s(t.item.ownership.text))]),e._v(" "),r("td",[e._v(e._s(t.item.status.text))]),e._v(" "),r("td",[e._v(e._s(t.item.lat))]),e._v(" "),r("td",[e._v(e._s(t.item.long))]),e._v(" "),"request"===e.action&&"requestsList"===e.requestCategory?r("td",[e._v("\n                    "+e._s(t.item.requestStatus)+"\n                  ")]):e._e()]}}],null,!1,2362305556)})],1)],1):e.loadingBuildings?e._e():[r("b",[e._v("Select a jurisdiction on the left to display its facilities")])]],2)],1)],1)],1)],1)},staticRenderFns:[]},mt=r("VU/8")(gt,ft,!1,null,null,null).exports,_t={mixins:[M],validations:{name:{required:x.required}},props:["action","requestType","requestCategory"],data:function(){return{facilityId:"",editDialog:!1,loadingTree:!1,loadingBuildings:!1,buildingsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"Parent",value:"parent"},{text:"Status",value:"status"}],searchJurisdiction:"",searchBuildings:"",activeJurisdiction:{},jurisdictionHierarchy:[],treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}},buildings:[],name:"",code:"",description:"",status:[{text:"Functional",value:"active"},{text:"Not Functional",value:"inactive"},{text:"Suspended",value:"suspended"}],facilityStatus:"",facilityParent:{},requestStatus:"",confirm:!1,confirmTitle:"",tasksVerification:zt}},methods:{changeRequestStatus:function(e,t,r){var a=this;if(r){this.requestStatus=t;var s=void 0;"approved"===t?s="approved":"rejected"===t&&(s="rejected"),this.confirm=!0,this.confirmTitle="Are you sure that you want to mark facility "+e.name+" as "+s,this.facilityId=e.id}else{this.$store.state.progressTitle="Saving new status",this.confirm=!1,this.$store.state.dynamicProgress=!0;var i=new FormData;i.append("id",this.facilityId),i.append("status",this.requestStatus),i.append("requestType",this.requestType),g.a.post("http://41.59.227.79:8083/FR/changeBuildingRequestStatus",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){a.$store.state.dynamicProgress=!1,a.$store.state.errorTitle="Info",a.$store.state.errorDescription="Request status changed successfully",a.$store.state.dialogError=!0,a.getBuildings()}).catch(function(e){a.$store.state.errorTitle="Error",a.$store.state.errorDescription="This request was not successfully processed",a.$store.state.dialogError=!0,console.log(e)})}},canChangeRequestStatus:function(e,t){if("request"!==this.action||"request"===this.action&&"requestsList"!==this.requestCategory)return!1;if("approve"===t){if("Approved"===e.requestStatus)return!1}else if("reject"===t&&("Approved"===e.requestStatus||"Rejected"===e.requestStatus))return!1;return!!("update"===this.requestType&&this.tasksVerification.canApprove("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canApprove("NewFacilitiesRequestsReport")||"update"===this.requestType&&this.tasksVerification.canReject("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canReject("NewFacilitiesRequestsReport"))},canEditBuilding:function(e){return("Approved"!==e.requestStatus||"requestsList"!==this.requestCategory)&&!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},getBuildings:function(){var e=this;this.facilities=[],this.buildings=[],this.loadingBuildings=!0,g.a.get("http://41.59.227.79:8083/FR/getBuildings",{params:{jurisdiction:this.activeJurisdiction.id,action:this.action,requestType:this.requestType,requestCategory:this.requestCategory,onlyDVS:!0}}).then(function(t){e.loadingBuildings=!1,e.buildings=t.data}).catch(function(t){e.loadingBuildings=!1,console.log(t)})},selectedJurisdiction:function(e){this.activeJurisdiction=e,this.getBuildings()},selectedEditJurisdiction:function(e){this.facilityParent=e},edit:function(e){this.facilityId=e.id,this.facilityStatus=e.status.code,this.facilityParent.id=e.parent.id,this.facilityParent.text=e.parent.name,this.name=e.name,this.editDialog=!0},saveEdit:function(){var e=this,t=new FormData;t.append("id",this.facilityId),t.append("name",this.name),t.append("action",this.action),t.append("requestType",this.requestType),t.append("username",this.$store.state.auth.username),this.facilityStatus&&t.append("status",this.facilityStatus),t.append("parent",this.facilityParent.id),this.$store.state.progressTitle="Saving Changes",this.editDialog=!1,this.$store.state.dynamicProgress=!0,g.a.post("http://41.59.227.79:8083/FR/addBuilding",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.errorTitle="Changes Saved",e.$store.state.errorDescription="Changes saved successfully",e.$store.state.dialogError=!0,e.getBuildings()}).catch(function(t){e.$store.state.errorTitle="Failed To Save Changes",e.$store.state.errorDescription="Failed To Save Changes",e.$store.state.dialogError=!0,console.log(t)})}},created:function(){var e=this;this.loadingTree=!0,this.getTree(!1,!1,function(t,r){t?e.loadingTree=!1:(e.loadingTree=!1,e.jurisdictionHierarchy=r)}),"request"===this.action&&"requestsList"===this.requestCategory&&this.buildingsHeaders.push({text:"Request Status",value:"requestStatus"})},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e}},components:{"liquor-tree":ae.a}},yt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{width:"630px"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[r("v-toolbar",{attrs:{color:"error",dark:""}},[r("v-toolbar-title",[e._v("\n        Confirmation\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirm=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card",[r("v-card-text",[e._v("\n        "+e._s(e.confirmTitle)+"\n      ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirm=!1}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.changeRequestStatus}},[e._v("Proceed")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"800px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n        Editing "+e._s(e.name)+"\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("close")])],1),e._v(" "),r("v-card",[r("v-card-text",[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",{attrs:{xs1:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),r("v-flex",[r("v-select",{attrs:{clearable:"",items:e.status,label:"Status"},model:{value:e.facilityStatus,callback:function(t){e.facilityStatus=t},expression:"facilityStatus"}})],1),e._v(" "),r("v-flex",{attrs:{color:"white"}},[e._v("\n            Selected Parent: "),r("b",[e._v(e._s(e.facilityParent.text))]),r("br"),r("br"),e._v("\n            Choose Different Parent\n            "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedEditJurisdiction},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node;return r("div",{staticClass:"node-container"},[r("div",{staticClass:"node-text"},[e._v(e._s(a.text))])])}}],null,!1,893252766)}):e._e()],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-toolbar",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:"","text-sm-left":""}},[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[r("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel\n                  ")],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:"","text-sm-right":""}},[r("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("\n                    Save\n                  ")],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-card",[r("v-card-title",{staticClass:"indigo white--text headline"},[e._v("\n      List of District Vaccine Stores\n    ")]),e._v(" "),r("v-layout",{attrs:{"justify-space-between":""}},[r("v-scroll-y-transition",[r("v-flex",{attrs:{xs2:""}},[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}),e._v(" "),e.loadingTree?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2)],1),e._v(" "),r("v-divider",{attrs:{vertical:""}}),e._v(" "),r("v-flex",{attrs:{"d-flex":"","text-center":""}},[r("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.activeJurisdiction.id?r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[r("b",[r("center",[e._v("DVS Under "+e._s(e.activeJurisdiction.text))])],1)]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchBuildings,callback:function(t){e.searchBuildings=t},expression:"searchBuildings"}})],1)],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingBuildings,headers:e.buildingsHeaders,items:e.buildings,search:e.searchBuildings},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-tooltip",{attrs:{top:""}},[e.canEditBuilding(t.item)?r("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:function(r){return e.edit(t.item)}},slot:"activator"},[r("v-icon",[e._v("edit")])],1):e._e(),e._v(" "),r("span",[e._v("Edit")])],1)],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.parent.name))]),e._v(" "),r("td",[e._v(e._s(t.item.status.text))])]}}],null,!1,3306551382)})],1)],1):e.loadingBuildings?e._e():[r("b",[e._v("Select a jurisdiction on the left to display its facilities")])]],2)],1)],1)],1)],1)},staticRenderFns:[]},xt=r("VU/8")(_t,yt,!1,null,null,null).exports,bt={mixins:[M],validations:{name:{required:x.required},code:{required:x.required,isValidCode:function(e,t){if(!e)return!1;var r=e.split(".").length;return!!e.split(".")[r-1]&&((!t.jurisdictionParent.data||parseInt(t.jurisdictionParent.data.level)+2===r)&&(!t.jurisdictionParent.code||t.jurisdictionParent.code.split(".").length+1===r))}}},props:["action","requestType","requestCategory"],data:function(){return{jurisdictionId:"",editDialog:!1,loadingTree:!1,loadingJurisdictions:!1,jurisdictionsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Parent",value:"parent"}],searchJurisdiction:"",searchJurisdictions:"",activeJurisdiction:{},jurisdictionHierarchy:[],treeOpts:{fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}},jurisdictions:[],name:"",code:"",parentPath:"",jurisdictionParent:{},confirm:!1,confirmTitle:"",tasksVerification:zt}},methods:{canEditJurisdiction:function(e){return("Approved"!==e.requestStatus||"requestsList"!==this.requestCategory)&&!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},getJurisdictions:function(){var e=this;this.facilities=[],this.jurisdictions=[],this.loadingJurisdictions=!0,g.a.get("http://41.59.227.79:8083/FR/getJurisdictions",{params:{jurisdiction:this.activeJurisdiction.id,action:this.action,requestType:this.requestType,requestCategory:this.requestCategory}}).then(function(t){e.loadingJurisdictions=!1,e.jurisdictions=t.data}).catch(function(t){e.loadingJurisdictions=!1,console.log(t)})},selectedJurisdiction:function(e){this.activeJurisdiction=e,this.getJurisdictions()},selectedEditJurisdiction:function(e){this.jurisdictionParent=e},edit:function(e){this.jurisdictionId=e.id,this.jurisdictionParent.id=e.immediateParent.id,this.jurisdictionParent.text=e.immediateParent.name,this.jurisdictionParent.code=e.immediateParent.code,this.parentPath=e.parent,this.name=e.name,this.code=e.code,this.editDialog=!0},saveEdit:function(){var e=this,t=new FormData;t.append("id",this.jurisdictionId),t.append("name",this.name),t.append("code",this.code),t.append("parent",this.jurisdictionParent.id),t.append("username",this.$store.state.auth.username),this.$store.state.progressTitle="Saving Changes",this.editDialog=!1,this.$store.state.dynamicProgress=!0,g.a.post("http://41.59.227.79:8083/FR/updateJurisdiction",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.errorColor="primary",e.$store.state.errorTitle="Changes Saved",e.$store.state.errorDescription="Changes saved successfully",e.$store.state.dialogError=!0,e.getJurisdictions()}).catch(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.errorTitle="Failed To Save Changes",e.$store.state.errorDescription="Failed To Save Changes",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,console.log(t)})}},created:function(){var e=this;this.loadingTree=!0,this.getTree(!1,!1,function(t,r){t?e.loadingTree=!1:(e.loadingTree=!1,e.jurisdictionHierarchy=r)}),"request"===this.action&&"requestsList"===this.requestCategory&&this.jurisdictionsHeaders.push({text:"Request Status",value:"requestStatus"})},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),!this.$v.code.isValidCode&&e.push("Invalid code"),e):e}},components:{"liquor-tree":ae.a}},$t={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"800px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("\n        Editing "+e._s(e.name)+"\n      ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("close")])],1),e._v(" "),r("v-card",[r("v-card-text",[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",{attrs:{xs1:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name*"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{required:"","error-messages":e.codeErrors,box:"",color:"deep-purple",label:"Code*"},on:{blur:function(t){return e.$v.code.$touch()},change:function(t){return e.$v.code.$touch()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),r("v-flex",{attrs:{color:"white"}},[e._v("\n            Current Parent: "),r("b",[e._v(e._s(e.parentPath))]),r("br"),e._v("\n            New Parent: "),r("b",[e._v(e._s(e.jurisdictionParent.text))]),r("br"),r("br"),e._v("\n            Choose Different Parent\n            "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts,filter:e.searchJurisdiction},on:{"node:selected":e.selectedEditJurisdiction},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node;return r("div",{staticClass:"node-container"},[r("div",{staticClass:"node-text"},[e._v(e._s(a.text))])])}}],null,!1,893252766)}):e._e()],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-toolbar",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:"","text-sm-left":""}},[r("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[r("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel\n                  ")],1)],1),e._v(" "),r("v-flex",{attrs:{xs6:"","text-sm-right":""}},[r("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" "),[e._v("\n                      Save\n                    ")]],2)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-card",[r("v-card-title",{staticClass:"indigo white--text headline"},["updateRequest"===e.requestCategory?[e._v("\n        Choose Facility To Request Change Of Information\n      ")]:[e._v("\n        Administrative Areas List\n      ")]],2),e._v(" "),r("v-layout",{attrs:{"justify-space-between":""}},[r("v-scroll-y-transition",[r("v-flex",{attrs:{xs2:""}},[e.loadingTree?[r("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?r("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,options:e.treeOpts},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2)],1),e._v(" "),r("v-divider",{attrs:{vertical:""}}),e._v(" "),r("v-flex",{attrs:{"d-flex":"","text-center":""}},[r("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.activeJurisdiction.id?r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[r("b",[r("center",[e._v("Administrative Areas Under "+e._s(e.activeJurisdiction.text))])],1)]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchJurisdictions,callback:function(t){e.searchJurisdictions=t},expression:"searchJurisdictions"}})],1)],1)],1),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingJurisdictions,headers:e.jurisdictionsHeaders,items:e.jurisdictions,search:e.searchJurisdictions},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-tooltip",{attrs:{top:""}},[e.canEditJurisdiction(t.item)?r("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:function(r){return e.edit(t.item)}},slot:"activator"},[r("v-icon",[e._v("edit")])],1):e._e(),e._v(" "),r("span",[e._v("Edit")])],1)],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.code))]),e._v(" "),r("td",[e._v(e._s(t.item.parent))])]}}],null,!1,3374448550)})],1)],1):e.loadingJurisdictions?e._e():[r("b",[e._v("Select a jurisdiction on the left to display its children")])]],2)],1)],1)],1)],1)},staticRenderFns:[]},St=r("VU/8")(bt,$t,!1,null,null,null).exports,wt={components:{FacilitiesReport:mt}},Ct={render:function(){var e=this.$createElement;return(this._self._c||e)("FacilitiesReport",{attrs:{action:"request",requestType:"update",requestCategory:"updateRequest"}})},staticRenderFns:[]},Dt=r("VU/8")(wt,Ct,!1,null,null,null).exports,kt={props:["action","requestType","requestCategory"],components:{FacilitiesReport:mt}},Pt={render:function(){var e=this.$createElement;return(this._self._c||e)("FacilitiesReport",{attrs:{action:"request",requestType:"add",requestCategory:"requestsList"}})},staticRenderFns:[]},Tt=r("VU/8")(kt,Pt,!1,null,null,null).exports,Ft={props:["action","requestType","requestCategory"],components:{FacilitiesReport:mt}},Rt={render:function(){var e=this.$createElement;return(this._self._c||e)("FacilitiesReport",{attrs:{action:"request",requestType:"update",requestCategory:"requestsList"}})},staticRenderFns:[]},At=r("VU/8")(Ft,Rt,!1,null,null,null).exports,It=r("PJh5"),Ut=r.n(It),qt={data:function(){return{panel:[],expand:!1,viewDialog:!1,searchServices:"",services:[],service:{},loadingServices:!1,servicesHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Service Types",value:"type"},{text:"Facilities Offering Service",value:"locations"},{text:"Active",value:"active"}],serviceHeader:[{name:"Name",value:"name"},{name:"Code",value:"code"},{name:"Facilities Offering Service",value:"facility"},{name:"Active",value:"active"},{name:"Appointment Required",value:"appointment"},{name:"Service Types",value:"type"},{name:"Service Categories",value:"category"},{name:"Required Specialty",value:"specialty"},{name:"Service Time Availability",value:"availableTime"},{name:"Service Unavailability",value:"notAvailable"},{name:"Contacts",value:"telecom"},{name:"Service Provision Conditions",value:"serviceProvisionCode"},{name:"Eligibility",value:"eligibility"},{name:"Referral Methods",value:"referralMethod"},{name:"Communication Language",value:"communication"},{name:"Program",value:"program"},{name:"Characteristics",value:"characteristics"},{name:"Comments",value:"comments"},{name:"Extra Details",value:"details"},{name:"Photo",value:"photo"}]}},filters:{limitCharacters:function(e){return e.substring(0,40)},displayId:function(e){if(e){var t=void 0,r=!0,a=!1,s=void 0;try{for(var i,o=c()(e);!(r=(i=o.next()).done);r=!0){var n=i.value;t?t+=", "+n.value:t=n.value}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return t}},translateDays:function(e){var t=[],r=!0,a=!1,s=void 0;try{for(var i,o=c()(e);!(r=(i=o.next()).done);r=!0){var n=i.value;"mon"===n&&t.push("Monday"),"tue"===n&&t.push("Tuesday"),"wed"===n&&t.push("Wednesday"),"thu"===n&&t.push("Thursday"),"fri"===n&&t.push("Friday"),"sat"===n&&t.push("Saturday"),"sun"===n&&t.push("Sunday")}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return t.join(", ")},formatDate:function(e){return Ut()(e).format("Do MMMM YYYY")}},methods:{expandAll:function(e){this.expand?this.panel=[].concat(R()(Array(20).keys())).map(function(e){return!0}):this.panel=[]},formatCodeableConcept:function(e){if(!e||!Array.isArray(e))return"";var t=void 0,r=!0,a=!1,s=void 0;try{for(var i,o=c()(e);!(r=(i=o.next()).done);r=!0){var n=i.value,l=void 0;l=n.hasOwnProperty("code")?n.code.text:n.text,t?t+="<br>"+l:t=l}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return t},getServices:function(e,t){var r={getResource:e.getResource,id:e.id};g.a.get("http://41.59.227.79:8083/FR/getServices",{params:r}).then(function(e){return t(e)}).catch(function(e){console.log(e)})},view:function(e){var t=this;this.getServices({id:e,getResource:!0},function(e){e.data&&e.data.entry&&e.data.entry.length>0&&(t.service=e.data.entry[0].resource),t.viewDialog=!0})},closeViewDialog:function(){this.viewDialog=!1,this.expand=!1}},created:function(){var e=this;this.loadingServices=!0,this.getServices({},function(t){e.loadingServices=!1,e.services=t.data})}},Mt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[e.viewDialog?r("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"950px"},model:{value:e.viewDialog,callback:function(t){e.viewDialog=t},expression:"viewDialog"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-spacer"),e._v(" "),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:e.closeViewDialog}},[e._v("close")])],1),e._v(" "),r("v-card",[r("v-card-text",[r("v-switch",{attrs:{label:"Expand All"},on:{change:e.expandAll},model:{value:e.expand,callback:function(t){e.expand=t},expression:"expand"}}),e._v(" "),r("v-expansion-panel",{attrs:{expand:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Name")])]},proxy:!0}],null,!1,4004223849)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e._v(e._s(e.service.name))])],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Code")])]},proxy:!0}],null,!1,896836835)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e._v(e._s(e._f("displayId")(e.service.identifier)))])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Active")])]},proxy:!0}],null,!1,1023682178)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e.service.active?[e._v("\n                          Yes\n                        ")]:[e._v("\n                          No\n                        ")]],2)],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Appointment Required")])]},proxy:!0}],null,!1,2098729288)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e.service.appointment?[e._v("\n                          Yes\n                        ")]:[e._v("\n                          No\n                        ")]],2)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Service Time Availability")])]},proxy:!0}],null,!1,130211255)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e._l(e.service.availableTime,function(t,a){return[e._v("\n                          Days of the week: "+e._s(e._f("translateDays")(t.daysOfWeek))+" "),r("br"),e._v("\n                          Available All Day:\n                          "),t.allDay?r("label",{key:"allDayYes"+a},[e._v("\n                            Yes\n                          ")]):r("label",{key:"allDayNo"+a},[e._v("\n                            No\n                          ")]),r("br"),e._v(" "),t.availableStartTime?r("label",{key:"startTime"+a},[e._v("\n                            Available Start Time: "+e._s(t.availableStartTime)+" "),r("br")]):e._e(),e._v(" "),t.availableEndTime?r("label",{key:"endTime"+a},[e._v("\n                            Available End Time: "+e._s(t.availableEndTime)+" "),r("br")]):e._e(),e._v(" "),r("v-divider")]})],2)],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Service Unavailability")])]},proxy:!0}],null,!1,913906681)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e._l(e.service.notAvailable,function(t,a){return[e._v("\n                          Description: "+e._s(t.description)+" "),r("br"),e._v(" "),t.during&&(t.during.start||t.during.end)?r("label",{key:"unavailable"+a},[e._v("\n                            Dates Unavailable: "+e._s(e._f("formatDate")(t.during.start))+" to "+e._s(e._f("formatDate")(t.during.end))+"\n                          ")]):e._e(),e._v(" "),r("v-divider",{key:"unAvDivider"+a})]})],2)],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Service Types")])]},proxy:!0}],null,!1,2068889432)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.type))}})])],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Service Category")])]},proxy:!0}],null,!1,1665262723)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.category))}})])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Facilities Offering Service")])]},proxy:!0}],null,!1,2224861096)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e._l(e.service.location,function(t){return[e._v("\n                      "+e._s(t.name)),r("br")]})],2)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Required Specialty")])]},proxy:!0}],null,!1,1169077963)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.specialty))}})])],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Eligibility")])]},proxy:!0}],null,!1,1814976707)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.eligibility))}})])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Contacts")])]},proxy:!0}],null,!1,4171370397)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e._l(e.service.telecom,function(t,a){return["url"===t.system?r("label",{key:a},[e._v("website")]):r("label",{key:a},[e._v(e._s(t.system))]),e._v("\n                          : "+e._s(t.value)+" "),r("br")]})],2)],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Communication Language")])]},proxy:!0}],null,!1,2765979932)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.communication))}})])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Service Provision Conditions")])]},proxy:!0}],null,!1,2942230810)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.serviceProvisionCode))}})])],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Referral Methods")])]},proxy:!0}],null,!1,751530875)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.referralMethod))}})])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Characteristics")])]},proxy:!0}],null,!1,874600544)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.characteristic))}})])],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Programs")])]},proxy:!0}],null,!1,3542767689)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[r("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.program))}})])],1)],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Comments")])]},proxy:!0}],null,!1,1180182606)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e._v("\n                    "+e._s(e.service.comment)+"\n                  ")])],1)],1)],1),e._v(" "),r("v-flex",[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Extra Details")])]},proxy:!0}],null,!1,3274642518)},[e._v(" "),r("v-card",{staticClass:"grey lighten-3"},[r("v-card-text",[e._v("\n                    "+e._s(e.service.extraDetails)+"\n                  ")])],1)],1)],1),e._v(" "),r("v-flex",[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[r("div",[e._v("Photo")])]},proxy:!0}],null,!1,4281668386)},[e._v(" "),r("v-card",[r("v-card-text",[r("img",{attrs:{src:e.service.photo}})])],1)],1)],1)],1)],1)],1)],1)],1):e._e(),e._v(" "),r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1200px"}},[r("v-card-title",{staticClass:"indigo white--text headline"},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[e._v("\n          Services List\n        ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",[r("v-text-field",{attrs:{"append-icon":"search",label:"Search Service","single-line":"","hide-details":""},model:{value:e.searchServices,callback:function(t){e.searchServices=t},expression:"searchServices"}})],1)],1)],1),e._v(" "),r("v-scroll-y-transition",{attrs:{mode:"out-in"}},[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingServices,headers:e.servicesHeaders,items:e.services,search:e.searchServices},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(r){return e.view(t.item.id)}}},[r("v-icon",[e._v("list")])],1)],1),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.code))]),e._v(" "),r("td",[e._v(e._s(e._f("limitCharacters")(t.item.type.join(","))))]),e._v(" "),r("td",[e._v(e._s(t.item.locations))]),e._v(" "),r("td",[e._v(e._s(t.item.active))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]},Et=r("VU/8")(qt,Mt,!1,null,null,null).exports,Lt={validations:{name:{required:x.required},code:{required:x.required}},props:["codeSystemType","displayText"],data:function(){return{name:"",code:""}},methods:{addServiceType:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("code",this.code),t.append("codeSystemType",this.codeSystemType),g.a.post("http://41.59.227.79:8083/FR/addCodeSystem",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Code system added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Failed to add code system!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e}}},Nt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:"","max-width":"500"}},[r("v-card-title",{attrs:{"primary-title":""}},[r("b",[e._v("Adding New "+e._s(e.displayText))])]),e._v(" "),r("v-card-text",[r("v-card",[r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-text-field",{attrs:{required:"","error-messages":e.codeErrors,box:"",color:"deep-purple",label:"Code"},on:{blur:function(t){return e.$v.code.$touch()},change:function(t){return e.$v.code.$touch()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[r("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addServiceType()}}},[r("v-icon",{attrs:{left:""}},[e._v("add")]),e._v("Add\n          ")],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},Ot=r("VU/8")(Lt,Nt,!1,null,null,null).exports,Ht={mixins:[M],validations:{name:{required:x.required}},data:function(){return{dateRangeErrors:[],timeRangeErrors:[],unavailabilityDescrErr:[],name:"",code:"",comment:"",extraDetails:"",serviceTypes:[],serviceCharacteristics:[],serviceProvisionConditions:[],programs:[],languages:[],serviceCategories:[],specialties:[],referralMethods:[],serviceEligibilities:[],serviceTypesConcept:[],serviceCategoriesConcept:[],specialtiesConcept:[],referralMethodsConcept:[],serviceEligibilitiesConcept:[],languagesConcept:[],serviceCharacteristicsConcept:[],serviceProvisionConditionsConcept:[],programsConcept:[],locations:[],contact:{email:"",phone:"",fax:"",website:""},availableTime:[{mainFields:{daysOfWeek:[],allDay:!1,availableStartTime:"",availableEndTime:""},otherFields:{timeMenuStart:!1,timeMenuEnd:!1}}],notAvailable:[{mainFields:{description:"",during:{start:"",end:"",startDisplay:"",endDisplay:""}},otherFields:{dateMenuStart:!1,dateMenuEnd:!1}}],active:!0,appointmentRequired:!1,locationHierarchy:[],searchLocation:"",days:[{text:"Monday",value:"mon"},{text:"Tuesday",value:"tue"},{text:"Wednesday",value:"wed"},{text:"Thursday",value:"thu"},{text:"Friday",value:"fri"},{text:"Saturday",value:"sat"},{text:"Sunday",value:"sun"}],imageData:"",treeOpts:{checkbox:!0,fetchData:function(e){return g.a.get("http://41.59.227.79:8083/FR/getTree",{params:{includeBuilding:!1,sourceLimitOrgId:e.id,recursive:!1}}).then(function(e){return e.data})}}}},methods:{addAvailableTime:function(){this.availableTime.push({mainFields:{daysOfWeek:[],allDay:!1,availableStartTime:"",availableEndTime:""},otherFields:{timeMenuStart:!1,timeMenuEnd:!1}})},addUnavailableTime:function(){this.notAvailable.push({mainFields:{description:"",during:{start:"",end:"",startDisplay:"",endDisplay:""}},otherFields:{dateMenuStart:!1,dateMenuEnd:!1}})},clearEndTime:function(e){this.availableTime[e].mainFields.availableEndTime="",this.validateStartTime(e)},clearStartTime:function(e){this.availableTime[e].mainFields.availableStartTime="",this.validateEndTime(e)},clearEndDate:function(e){this.notAvailable[e].mainFields.during.end="",this.notAvailable[e].mainFields.during.endDisplay="",this.validateStartDate(e)},clearStartDate:function(e){this.notAvailable[e].mainFields.during.start="",this.notAvailable[e].mainFields.during.startDisplay="",this.validateEndDate(e)},previewImage:function(e){var t=this,r=e.target;if(r.files&&r.files[0]){var a=new FileReader;a.onload=function(e){t.imageData=e.target.result},a.readAsDataURL(r.files[0])}},locationSelected:function(e){"bu"===e.data.locType&&this.locations.push(e.id)},locationUnSelected:function(e){-1!==this.locations.indexOf(e.id)&&this.locations.splice(this.locations.indexOf(e.id),1)},addService:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("code",this.code),t.append("category",s()(this.serviceCategories)),t.append("type",s()(this.serviceTypes)),t.append("referralMethod",s()(this.referralMethods)),t.append("specialty",s()(this.specialties)),t.append("eligibility",s()(this.serviceEligibilities)),t.append("communication",s()(this.languages)),t.append("program",s()(this.programs)),t.append("characteristic",s()(this.serviceCharacteristics)),t.append("serviceProvisionCode",s()(this.serviceProvisionConditions)),t.append("location",s()(this.locations)),t.append("comment",this.comment),t.append("extraDetails",this.extraDetails),t.append("photo",this.imageData),t.append("availableTime",s()(this.availableTime)),t.append("notAvailable",s()(this.notAvailable)),t.append("telecom",s()(this.contact)),t.append("appointmentRequired",this.appointmentRequired),t.append("active",this.active),g.a.post("http://41.59.227.79:8083/FR/addService",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="800px",e.$store.state.alert.msg="Service added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="800px",e.$store.state.alert.msg="Failed to add service!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})},validateEndTime:function(e){if(this.$refs.timeMenuEnd[e].save(this.availableTime[e].mainFields.availableEndTime+":00"),this.timeRangeErrors.splice(e,1,""),!this.availableTime[e].mainFields.availableStartTime&&this.availableTime[e].mainFields.availableEndTime)return this.timeRangeErrors.splice(e,1,"Start time is missing"),!1;if(this.availableTime[e].mainFields.availableStartTime||this.availableTime[e].mainFields.availableEndTime){var t=this.availableTime[e].mainFields.availableStartTime.split(":");(new Date).setHours(t[0],t[1],"00");var r=this.availableTime[e].mainFields.availableEndTime.split(":");(new Date).setHours(r[0],r[1],"00"),r<=t&&this.timeRangeErrors.splice(e,1,"End time must be after start time")}},validateStartTime:function(e){if(this.$refs.timeMenuStart[e].save(this.availableTime[e].mainFields.availableStartTime+":00"),this.timeRangeErrors.splice(e,1,""),!this.availableTime[e].mainFields.availableEndTime&&this.availableTime[e].mainFields.availableStartTime)return this.timeRangeErrors.splice(e,1,"End time is missing"),!1;if(this.availableTime[e].mainFields.availableStartTime||this.availableTime[e].mainFields.availableEndTime){var t=this.availableTime[e].mainFields.availableStartTime.split(":");(new Date).setHours(t[0],t[1],"00");var r=this.availableTime[e].mainFields.availableEndTime.split(":");(new Date).setHours(r[0],r[1],"00"),r<=t&&this.timeRangeErrors.splice(e,1,"End time must be after start time")}},validateStartDate:function(e){this.dateRangeErrors.splice(e,1,"");var t=Ut()(this.notAvailable[e].mainFields.during.start).format("Do MMMM YYYY");if(this.$refs.dateMenuStart[e].save(t),this.validateUnavailabilityDescr(e),!this.notAvailable[e].mainFields.during.end&&this.notAvailable[e].mainFields.during.start)return this.dateRangeErrors.splice(e,1,"End date is missing"),!1;this.notAvailable[e].mainFields.during.end<this.notAvailable[e].mainFields.during.start&&this.dateRangeErrors.splice(e,1,"End date must be after start date")},validateEndDate:function(e){this.dateRangeErrors.splice(e,1,"");var t=Ut()(this.notAvailable[e].mainFields.during.end).format("Do MMMM YYYY");if(this.$refs.dateMenuEnd[e].save(t),this.validateUnavailabilityDescr(e),!this.notAvailable[e].mainFields.during.start&&this.notAvailable[e].mainFields.during.end)return this.dateRangeErrors.splice(e,1,"Start date is missing"),!1;this.notAvailable[e].mainFields.during.end<this.notAvailable[e].mainFields.during.start&&this.dateRangeErrors.splice(e,1,"End date must be after start date")},validateUnavailabilityDescr:function(e){if(this.unavailabilityDescrErr.splice(e,1,""),(this.notAvailable[e].mainFields.during.start||this.notAvailable[e].mainFields.during.end)&&!this.notAvailable[e].mainFields.description)return this.unavailabilityDescrErr.splice(e,1,"Description is missing")}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},hasTimeRangeErrors:function(){if(0===this.timeRangeErrors.length)return!1;var e=!0,t=!1,r=void 0;try{for(var a,s=c()(this.timeRangeErrors);!(e=(a=s.next()).done);e=!0){if(a.value)return!0}}catch(e){t=!0,r=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw r}}return!1},hasDateRangeErrors:function(){if(0===this.dateRangeErrors.length)return!1;var e=!0,t=!1,r=void 0;try{for(var a,s=c()(this.dateRangeErrors);!(e=(a=s.next()).done);e=!0){if(a.value)return!0}}catch(e){t=!0,r=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw r}}return!1},hasUnAvDescrErrors:function(){if(0===this.unavailabilityDescrErr.length)return!1;var e=!0,t=!1,r=void 0;try{for(var a,s=c()(this.unavailabilityDescrErr);!(e=(a=s.next()).done);e=!0){if(a.value)return!0}}catch(e){t=!0,r=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw r}}return!1}},created:function(){var e=this;this.getTree(!0,!1,function(t,r){t||(e.locationHierarchy=r)}),this.getCodeSystem("serviceTypes",function(t,r){t||(e.serviceTypesConcept=r)}),this.getCodeSystem("serviceCategories",function(t,r){t||(e.serviceCategoriesConcept=r)}),this.getCodeSystem("specialties",function(t,r){t||(e.specialtiesConcept=r)}),this.getCodeSystem("serviceEligibilities",function(t,r){t||(e.serviceEligibilitiesConcept=r)}),this.getCodeSystem("languages",function(t,r){t||(e.languagesConcept=r)}),this.getCodeSystem("referralMethods",function(t,r){t||(e.referralMethodsConcept=r)}),this.getCodeSystem("programs",function(t,r){t||(e.programsConcept=r)}),this.getCodeSystem("serviceCharacteristics",function(t,r){t||(e.serviceCharacteristicsConcept=r)}),this.getCodeSystem("serviceProvisionConditions",function(t,r){t||(e.serviceProvisionConditionsConcept=r)})},components:{"liquor-tree":ae.a}},jt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:"","max-width":"1000"}},[r("v-card-title",{attrs:{"primary-title":""}},[r("b",[e._v("Adding New Service")])]),e._v(" "),r("v-card-text",[r("v-card",[r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name *"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceCategoriesConcept,label:"Service Category"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceCategories.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceCategories,callback:function(t){e.serviceCategories=t},expression:"serviceCategories"}}),e._v(" "),r("span",[e._v("Broad category of service being performed or delivered")])],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceTypesConcept,label:"Service Type"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceTypes.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceTypes,callback:function(t){e.serviceTypes=t},expression:"serviceTypes"}}),e._v(" "),r("span",[e._v("Type of service that may be delivered or performed")])],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.referralMethodsConcept,label:"Referral Methods"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.referralMethods.length-2)+" others)")]):e._e()]}}]),model:{value:e.referralMethods,callback:function(t){e.referralMethods=t},expression:"referralMethods"}}),e._v(" "),r("span",[e._v("Ways that the service accepts referrals")])],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.specialtiesConcept,label:"Specialties"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.specialties.length-2)+" others)")]):e._e()]}}]),model:{value:e.specialties,callback:function(t){e.specialties=t},expression:"specialties"}}),e._v(" "),r("span",[e._v("Specialties handled by the HealthcareService")])],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceEligibilitiesConcept,label:"Service Eligibility"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceEligibilities.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceEligibilities,callback:function(t){e.serviceEligibilities=t},expression:"serviceEligibilities"}}),e._v(" "),r("span",[e._v("Specific eligibility requirements required to use the service")])],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.languagesConcept,label:"Communication Language"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.languages.length-2)+" others)")]):e._e()]}}]),model:{value:e.languages,callback:function(t){e.languages=t},expression:"languages"}}),e._v(" "),r("span",[e._v("The language that this service is offered in")])],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.programsConcept,label:"Programs"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.programs.length-2)+" others)")]):e._e()]}}]),model:{value:e.programs,callback:function(t){e.programs=t},expression:"programs"}}),e._v(" "),r("span",[e._v("Programs that this service is applicable to")])],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceCharacteristicsConcept,label:"Characteristics"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceCharacteristics.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceCharacteristics,callback:function(t){e.serviceCharacteristics=t},expression:"serviceCharacteristics"}}),e._v(" "),r("span",[e._v("Collection of characteristics (attributes)")])],1)],1)],1)],1),e._v(" "),r("v-flex",[r("v-tooltip",{attrs:{top:""}},[r("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceProvisionConditionsConcept,label:"Service Provision Conditions"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[s<2?r("v-chip",[r("span",[e._v(e._s(a.display))])]):e._e(),e._v(" "),2===s?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceProvisionConditions.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceProvisionConditions,callback:function(t){e.serviceProvisionConditions=t},expression:"serviceProvisionConditions"}}),e._v(" "),r("span",[e._v("Conditions under which service is available/offered")])],1)],1),e._v(" "),r("v-flex",[e._v("\n              Facility where service is provided\n              "),e.locationHierarchy.length>0?r("liquor-tree",{ref:"locationHierarchyRef",attrs:{data:e.locationHierarchy,filter:e.searchLocation,options:e.treeOpts},on:{"node:checked":e.locationSelected,"node:unchecked":e.locationUnSelected},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node;return r("div",{staticClass:"node-container"},[r("div",{staticClass:"node-text"},[e._v(e._s(a.text))])])}}],null,!1,893252766)}):e._e()],1),e._v(" "),r("v-flex",[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Service time availability\n                ")]),e._v(" "),r("v-card-text",[e._l(e.availableTime,function(t,a){return r("div",{key:a},[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-select",{attrs:{multiple:"","multi-line":"","item-text":"text","item-value":"value",items:e.days,label:"Available days of the week"},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item;return t.index,[r("v-chip",[r("span",[e._v(e._s(a.text))])])]}}],null,!0),model:{value:e.availableTime[a].mainFields.daysOfWeek,callback:function(t){e.$set(e.availableTime[a].mainFields,"daysOfWeek",t)},expression:"availableTime[key].mainFields.daysOfWeek"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-switch",{attrs:{label:"Always available (24 hr service)"},model:{value:e.availableTime[a].mainFields.allDay,callback:function(t){e.$set(e.availableTime[a].mainFields,"allDay",t)},expression:"availableTime[key].mainFields.allDay"}})],1)],1)],1),e._v(" "),e.availableTime[a].mainFields.allDay?e._e():r("v-flex",[r("div",{staticStyle:{color:"red"}},[e._v("\n                          "+e._s(e.timeRangeErrors[a])+"\n                        ")])]),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-menu",{ref:"timeMenuStart",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.availableTime[a].mainFields.availableStartTime,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.availableTime[a].mainFields,"availableStartTime",t)},"update:return-value":function(t){return e.$set(e.availableTime[a].mainFields,"availableStartTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[r("v-text-field",e._g({attrs:{disabled:e.availableTime[a].mainFields.allDay,label:"Available start time","prepend-icon":"access_time",clearable:"",readonly:""},on:{"click:clear":function(t){return e.clearStartTime(a)}},model:{value:e.availableTime[a].mainFields.availableStartTime,callback:function(t){e.$set(e.availableTime[a].mainFields,"availableStartTime",t)},expression:"availableTime[key].mainFields.availableStartTime"}},s))]}}],null,!0),model:{value:e.availableTime[a].otherFields.timeMenuStart,callback:function(t){e.$set(e.availableTime[a].otherFields,"timeMenuStart",t)},expression:"availableTime[key].otherFields.timeMenuStart"}},[e._v(" "),e.availableTime[a].otherFields.timeMenuStart?r("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":function(t){return e.validateStartTime(a)}},model:{value:e.availableTime[a].mainFields.availableStartTime,callback:function(t){e.$set(e.availableTime[a].mainFields,"availableStartTime",t)},expression:"availableTime[key].mainFields.availableStartTime"}}):e._e()],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-menu",{ref:"timeMenuEnd",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.availableTime[a].mainFields.availableEndTime,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.availableTime[a].mainFields,"availableEndTime",t)},"update:return-value":function(t){return e.$set(e.availableTime[a].mainFields,"availableEndTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[r("v-text-field",e._g({attrs:{disabled:e.availableTime[a].mainFields.allDay,label:"Available end time","prepend-icon":"access_time",clearable:"",readonly:""},on:{"click:clear":function(t){return e.clearEndTime(a)}},model:{value:e.availableTime[a].mainFields.availableEndTime,callback:function(t){e.$set(e.availableTime[a].mainFields,"availableEndTime",t)},expression:"availableTime[key].mainFields.availableEndTime"}},s))]}}],null,!0),model:{value:e.availableTime[a].otherFields.timeMenuEnd,callback:function(t){e.$set(e.availableTime[a].otherFields,"timeMenuEnd",t)},expression:"availableTime[key].otherFields.timeMenuEnd"}},[e._v(" "),e.availableTime[a].otherFields.timeMenuEnd?r("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":function(t){return e.validateEndTime(a)}},model:{value:e.availableTime[a].mainFields.availableEndTime,callback:function(t){e.$set(e.availableTime[a].mainFields,"availableEndTime",t)},expression:"availableTime[key].mainFields.availableEndTime"}}):e._e()],1)],1)],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-divider")],1)}),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:e.addAvailableTime},slot:"activator"},[r("v-icon",[e._v("add")])],1),e._v(" "),r("span",[e._v("Add more availability for this service")])],1)],1)],1)],2)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-divider"),e._v(" "),r("v-flex",[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Service un availability\n                ")]),e._v(" "),r("v-card-text",[e._l(e.notAvailable,function(t,a){return r("div",{key:a},[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",[r("div",{staticStyle:{color:"red"}},[e._v("\n                          "+e._s(e.unavailabilityDescrErr[a])+"\n                        ")])]),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",[r("v-tooltip",{attrs:{top:""}},[r("v-text-field",{attrs:{slot:"activator",label:"Description",id:"id"},on:{input:function(t){return e.validateUnavailabilityDescr(a)}},slot:"activator",model:{value:e.notAvailable[a].mainFields.description,callback:function(t){e.$set(e.notAvailable[a].mainFields,"description",t)},expression:"notAvailable[key].mainFields.description"}}),e._v(" "),r("span",[e._v("Reason presented to the user explaining why time not available")])],1)],1)],1)],1),e._v(" "),r("v-flex",[r("div",{staticStyle:{color:"red"}},[e._v("\n                          "+e._s(e.dateRangeErrors[a])+"\n                        ")])]),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-menu",{ref:"dateMenuStart",refInFor:!0,attrs:{"return-value":e.notAvailable[a].mainFields.during.startDisplay,"close-on-content-click":!1,"full-width":"","max-width":"290"},on:{"update:returnValue":function(t){return e.$set(e.notAvailable[a].mainFields.during,"startDisplay",t)},"update:return-value":function(t){return e.$set(e.notAvailable[a].mainFields.during,"startDisplay",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[r("v-text-field",e._g({attrs:{value:e.notAvailable[a].mainFields.during.startDisplay,clearable:"",label:"Start Date",readonly:""},on:{"click:clear":function(t){return e.clearStartDate(a)}}},s))]}}],null,!0),model:{value:e.notAvailable[a].otherFields.dateMenuStart,callback:function(t){e.$set(e.notAvailable[a].otherFields,"dateMenuStart",t)},expression:"notAvailable[key].otherFields.dateMenuStart"}},[e._v(" "),r("v-date-picker",{on:{change:function(t){e.notAvailable[a].otherFields.dateMenuStart=!1},input:function(t){return e.validateStartDate(a)}},model:{value:e.notAvailable[a].mainFields.during.start,callback:function(t){e.$set(e.notAvailable[a].mainFields.during,"start",t)},expression:"notAvailable[key].mainFields.during.start"}})],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-menu",{ref:"dateMenuEnd",refInFor:!0,attrs:{"return-value":e.notAvailable[a].mainFields.during.endDisplay,"close-on-content-click":!1,"full-width":"","max-width":"290"},on:{"update:returnValue":function(t){return e.$set(e.notAvailable[a].mainFields.during,"endDisplay",t)},"update:return-value":function(t){return e.$set(e.notAvailable[a].mainFields.during,"endDisplay",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[r("v-text-field",e._g({attrs:{value:e.notAvailable[a].mainFields.during.endDisplay,clearable:"",label:"End Date",readonly:""},on:{"click:clear":function(t){return e.clearEndDate(a)}}},s))]}}],null,!0),model:{value:e.notAvailable[a].otherFields.dateMenuEnd,callback:function(t){e.$set(e.notAvailable[a].otherFields,"dateMenuEnd",t)},expression:"notAvailable[key].otherFields.dateMenuEnd"}},[e._v(" "),r("v-date-picker",{on:{change:function(t){e.notAvailable[a].otherFields.dateMenuEnd=!1},input:function(t){return e.validateEndDate(a)}},model:{value:e.notAvailable[a].mainFields.during.end,callback:function(t){e.$set(e.notAvailable[a].mainFields.during,"end",t)},expression:"notAvailable[key].mainFields.during.end"}})],1)],1)],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-divider")],1)}),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:e.addUnavailableTime},slot:"activator"},[r("v-icon",[e._v("add")])],1),e._v(" "),r("span",[e._v("Add more service un availability")])],1)],1)],1)],2)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-divider"),e._v(" "),r("v-flex",[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Contacts Informations\n                ")]),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:"",wrap:""}},[r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs5:""}},[r("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-divider"),e._v(" "),r("v-divider"),e._v(" "),r("v-flex",[r("v-tooltip",{attrs:{top:""}},[r("v-textarea",{attrs:{slot:"activator",outline:"",label:"Comment about this service"},slot:"activator",model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),e._v(" "),r("span",[e._v("Additional description and/or any specific issues not covered elsewhere")])],1)],1),e._v(" "),r("v-flex",[r("v-tooltip",{attrs:{top:""}},[r("v-textarea",{attrs:{slot:"activator",outline:"",label:"Extra details about this service"},slot:"activator",model:{value:e.extraDetails,callback:function(t){e.extraDetails=t},expression:"extraDetails"}}),e._v(" "),r("span",[e._v("Extra details about the service that can't be placed in the other fields")])],1)],1),e._v(" "),r("v-flex",[r("v-tooltip",{attrs:{top:""}},[r("label",{attrs:{slot:"activator"},slot:"activator"},[e._v("Photo for a service")]),e._v(" "),r("input",{attrs:{slot:"activator",type:"file",accept:"image/*"},on:{change:e.previewImage},slot:"activator"}),e._v(" "),r("span",[e._v("Facilitates quick identification of the service")])]),e._v(" "),e.imageData.length>0?r("div",{staticClass:"image-preview"},[r("img",{staticClass:"preview",attrs:{src:e.imageData}})]):e._e()],1),e._v(" "),r("v-flex",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs5:""}},[r("v-tooltip",{attrs:{top:""}},[r("v-switch",{attrs:{slot:"activator",label:"Appointment Required"},slot:"activator",model:{value:e.appointmentRequired,callback:function(t){e.appointmentRequired=t},expression:"appointmentRequired"}}),e._v(" "),r("span",[e._v("If an appointment is required for access to this service")])],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs2:""}},[r("v-switch",{attrs:{label:"Active"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}})],1)],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[r("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid||(e.hasTimeRangeErrors||e.hasDateRangeErrors||e.hasUnAvDescrErrors)&&!e.availableTime.allDay,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addService()}}},[r("v-icon",{attrs:{left:""}},[e._v("add")]),e._v("Add\n          ")],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Vt=r("VU/8")(Ht,jt,!1,function(e){r("HJ5/")},"data-v-343c2c8d",null).exports;i.default.use(y.a);var Jt=new y.a({routes:[{path:"/",name:"FacilityReconHome",component:he},{path:"/addUser",name:"AddUser",component:z},{path:"/UsersList",name:"UsersList",component:B},{path:"/RolesManagement",name:"RolesManagement",component:X},{path:"/ChangePassword",name:"ChangePassword",component:ee},{path:"/login",name:"Login",component:D},{path:"dhis2Auth",name:"DHIS2Auth",component:Je},{path:"/Signup",name:"Signup",component:T},{path:"/Configure",name:"Configure",component:N},{path:"/logout",name:"Logout",component:j},{path:"/ViewDataSources",name:"ViewDataSources",component:Ee},{path:"/AddDataSources",name:"AddDataSources",component:Ue},{path:"/dataSourcesPair",name:"DataSourcesPair",component:He},{path:"/view",name:"FacilityReconView",component:le},{path:"/scores",name:"FacilityReconScores",component:he},{path:"/recoStatus",name:"FacilityRecoStatus",component:me},{path:"/dbAdmin",name:"FacilityReconDbAdmin",component:xe},{path:"/RequestBuildingAddition",name:"RequestBuildingAddition",component:ht,beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/RequestUpdateBuildingDetails",name:"RequestUpdateBuildingDetails",component:Dt,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/FacilitiesUpdateRequestsReport",name:"FacilitiesUpdateRequestsReport",component:At,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,r){if(zt.canView(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/AddJurisdiction",name:"AddJurisdiction",component:Ge,beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/AddFacility",name:"AddFacility",component:it,beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/AddFacilityHFR",name:"AddFacilityHFR",component:lt,beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/UpdateFacilityHFR",name:"UpdateFacilityHFR",component:dt,beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/AddJurisdictionHFR",name:"AddJurisdictionHFR",component:Ke,beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/UpdateJurisdictionHFR",name:"UpdateJurisdictionHFR",component:Qe,beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/FacilitiesReport",name:"FacilitiesReport",component:mt,beforeEnter:function(e,t,r){if(zt.canView(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/DVSReport",name:"DVSReport",component:xt,beforeEnter:function(e,t,r){if(zt.canView(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/JurisdictionsReport",name:"JurisdictionsReport",component:St,beforeEnter:function(e,t,r){if(zt.canView(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/NewFacilitiesRequestsReport",name:"NewFacilitiesRequestsReport",component:Tt,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,r){if(zt.canView(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/ServicesReport",name:"ServicesReport",component:Et,beforeEnter:function(e,t,r){if(zt.canView(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/AddCodeSystem",name:"AddCodeSystem",component:Ot,props:function(e){return{codeSystemType:e.query.type,displayText:e.query.displayText}},beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}},{path:"/AddService",name:"AddService",component:Vt,beforeEnter:function(e,t,r){if(zt.canAdd(e.name))return r();Wt.state.dialogError=!0,Wt.state.errorTitle="Info",Wt.state.errorColor="error",Wt.state.errorDescription="You dont have permission to access this page",r({path:t.path})}}]});Jt.beforeEach(function(e,t,r){if(Wt.state.alert.show=!1,Wt.state.auth.token||$.a.get("token")&&"null"!==$.a.get("token")&&$.a.get("userID")&&"null"!==$.a.get("userID"))r();else{if("/Login"===e.path||"/Signup"===e.path||Wt.state.config.generalConfig.authDisabled)return r();r({path:"/Login"})}});var Bt=Jt;i.default.use(_.a);var Wt=new _.a.Store({state:{baseRouterViewKey:0,alert:{width:"800px",show:!1,msg:"",type:"success",dismisible:!0,transition:"scale-transition"},auth:{username:"",userID:"",role:"",token:""},levelMapping:{source1:{},source2:{}},config:{userConfig:{reconciliation:{useCSVHeader:!0}},generalConfig:{reconciliation:{parentConstraint:{enabled:!0,idAutoMatch:!0,nameAutoMatch:!1},singlePair:!1,singleDataSource:!1,fixSource2To:null,fixSource2:!1},recoProgressNotification:{enabled:!1},allowShareToAllForNonAdmin:!1,selfRegistration:{enabled:!1,requiresApproval:!1},datasetsAdditionWays:["CSV Upload","Remote Servers Sync"],datasetsAutosyncTime:"*/15 * * * *",authDisabled:!1,authMethod:"dhis2",externalAuth:{pullOrgUnits:!0,shareOrgUnits:!0,shareByOrgId:!0,datasetName:null,adminRole:null}}},signupFields:{},customSignupFields:{},recoStatus:{status:"in-progress"},recalculateScores:!1,dialogError:!1,errorTitle:"",errorDescription:"",errorColor:"primary",clientId:null,denyAccess:!0,source2Hierarchy:"",source1Hierarchy:"",uploadRunning:!1,dhis:{user:{orgId:"",orgName:""},host:"",dev:{auth:{username:"",password:""}}},dataSourcePairs:[],activePair:{source1:{},source2:{}},source1TotalAllRecords:0,source2TotalAllRecords:0,totalAllMapped:0,totalAllFlagged:0,totalAllNoMatch:0,totalAllIgnore:0,source1TotalAllNotMapped:0,source2TotalRecords:0,recoLevel:2,totalSource1Levels:"",totalSource2Levels:"",matchedContent:[],multipleMatch:[],noMatchContent:[],ignoreContent:[],flagged:[],source1Parents:[],source2UnMatched:[],source1UnMatched:[],scoreResults:[],levelArray:[],scoresProgressData:{scoreDialog:!1,scoreProgressTitle:"Waiting for progress status",stage:"not final",scoreProgressPercent:null,progressType:"",scoreProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},scoreSavingProgressData:{percent:null,savingMatches:!1,savingProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},uploadProgressData:{},dataSources:[],remoteDataSources:["DHIS2","FHIR"],loadingServers:!1,dynamicProgress:!1,initializingApp:!1}});g.a.interceptors.request.use(function(e){var t=Wt.state.auth.token;return t&&(e.headers.Authorization="Bearer "+t),e},function(e){return m.a.reject(e)}),g.a.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status&&(Wt.state.auth.token="",$.a.remove("token"),Bt.push("login")),m.a.reject(e)});var Gt=[{component:"AddService",addTasks:["facility_registry_can_add_service"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddFacility",addTasks:["facility_registry_can_add_facility"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddJurisdiction",addTasks:["facility_registry_can_add_jurisdiction"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddCodeSystem",addTasks:["facility_registry_can_add_terminologies"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"ServicesReport",addTasks:[],viewTasks:["facility_registry_can_view_service"],editTasks:["facility_registry_can_edit_service"],deleteTasks:["facility_registry_can_delete_service"],approveTasks:[],rejectTasks:[]},{component:"FacilitiesReport",addTasks:[],viewTasks:["facility_registry_can_view_facility"],editTasks:["facility_registry_can_edit_facility"],deleteTasks:["facility_registry_can_delete_facility"],approveTasks:[],rejectTasks:[]},{component:"NewFacilitiesRequestsReport",addTasks:[],viewTasks:["facility_registry_can_view_new_facility_requests_report"],editTasks:["facility_registry_can_edit_new_facility_request"],deleteTasks:["facility_registry_can_delete_new_facility_request"],approveTasks:["facility_registry_can_approve_new_facility_request"],rejectTasks:["facility_registry_can_reject_new_facility_request"]},{component:"FacilitiesUpdateRequestsReport",addTasks:[],viewTasks:["facility_registry_can_view_update_facility_details_requests_report"],editTasks:["facility_registry_can_edit_update_facility_details_request"],deleteTasks:["facility_registry_can_delete_update_facility_details_request"],approveTasks:["facility_registry_can_approve_update_facility_details_requests"],rejectTasks:["facility_registry_can_reject_update_facility_details_requests"]},{component:"RequestUpdateBuildingDetails",addTasks:["facility_registry_can_request_update_of_facility_details"],viewTasks:["facility_registry_can_request_update_of_facility_details"],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"RequestBuildingAddition",addTasks:["facility_registry_can_request_new_facility"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]}],zt={canAdd:function(e){if("Admin"===Wt.state.auth.role)return!0;var t=Wt.state.auth.tasks,r=[],a=!0,s=!1,i=void 0;try{for(var o,n=c()(Gt);!(a=(o=n.next()).done);a=!0){var l=o.value;if(l.component===e){r=l.addTasks;break}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}if(0===r.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(r);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canView:function(e){if("Admin"===Wt.state.auth.role)return!0;var t=Wt.state.auth.tasks,r=[],a=!0,s=!1,i=void 0;try{for(var o,n=c()(Gt);!(a=(o=n.next()).done);a=!0){var l=o.value;if(l.component===e){r=l.viewTasks;break}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}if(0===r.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(r);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canEdit:function(e){if("Admin"===Wt.state.auth.role)return!0;var t=Wt.state.auth.tasks,r=[],a=!0,s=!1,i=void 0;try{for(var o,n=c()(Gt);!(a=(o=n.next()).done);a=!0){var l=o.value;if(l.component===e){r=l.editTasks;break}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}if(0===r.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(r);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canDelete:function(e){if("Admin"===Wt.state.auth.role)return!0;var t=Wt.state.auth.tasks,r=[],a=!0,s=!1,i=void 0;try{for(var o,n=c()(Gt);!(a=(o=n.next()).done);a=!0){var l=o.value;if(l.component===e){r=l.deleteTasks;break}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}if(0===r.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(r);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canApprove:function(e){if("Admin"===Wt.state.auth.role)return!0;var t=Wt.state.auth.tasks,r=[],a=!0,s=!1,i=void 0;try{for(var o,n=c()(Gt);!(a=(o=n.next()).done);a=!0){var l=o.value;if(l.component===e){r=l.approveTasks;break}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}if(0===r.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(r);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canReject:function(e){if("Admin"===Wt.state.auth.role)return!0;var t=Wt.state.auth.tasks,r=[],a=!0,s=!1,i=void 0;try{for(var o,n=c()(Gt);!(a=(o=n.next()).done);a=!0){var l=o.value;if(l.component===e){r=l.rejectTasks;break}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}if(0===r.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(r);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u}},Yt={data:function(){return{tasksVerification:zt}}},Kt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{attrs:{id:"menu"}},[r("li",{staticClass:"parent"},[r("a",{attrs:{href:"#"}},[r("v-icon",[e._v("spellcheck")]),e._v(" "+e._s(e.$t("App.menu.facilityRecon.msg"))+"\n    ")],1),e._v(" "),r("ul",{staticClass:"child"},[r("li",{staticClass:"parent"},[r("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[r("v-icon",{attrs:{color:"black",left:""}},[e._v("sync")]),e._v(e._s(e.$t("App.menu.dataSourcesParent.msg"))+" "),r("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),r("ul",{staticClass:"child"},[r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"AddDataSources"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("cloud_upload")]),e._v("\n                  "+e._s(e.$t("App.menu.addDataSources.msg"))+"\n                ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.addDataSources.tooltip")))])],1)],1),e._v(" "),r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"ViewDataSources"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.viewDataSources.msg"))+"\n                ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.viewDataSources.tooltip")))])],1)],1)],1)]),e._v(" "),r("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"view",color:"white",disabled:0===Object.keys(e.$store.state.activePair.source1).length},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.view.msg"))+"\n            ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.view.tooltip")))])],1)],1),e._v(" "),r("li",{staticClass:"parent"},[r("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("compare_arrows")]),e._v(e._s(e.$t("App.menu.reconcile.msg"))+" "),r("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),r("ul",{staticClass:"child"},[r("v-list",{class:{disabledMenu:e.$store.state.dataSources.length<=1||e.$store.state.dataSourcePairs.length<=0,lastMenu:!0}},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"dataSourcesPair",disabled:e.$store.state.dataSources.length<=1||e.$store.state.dataSourcePairs.length<=0},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("filter_2")]),e._v(e._s(e.$t("App.menu.createPair.msg"))+"\n                ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.createPair.tooltip")))])],1)],1),e._v(" "),r("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"scores",disabled:0===Object.keys(e.$store.state.activePair.source1).length},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("find_in_page")]),e._v(e._s(e.$t("App.menu.reconcile.msg"))+"\n                ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.reconcile.tooltip")))])],1)],1)],1)])],1)]),e._v(" "),r("li",{staticClass:"parent"},[r("a",{attrs:{href:"#"}},[r("v-icon",[e._v("location_on")]),e._v(e._s(e.$t("App.menu.facilityRegistry.msg"))+"\n    ")],1),e._v(" "),r("ul",{staticClass:"child"},[e.tasksVerification.canAdd("AddJurisdiction")?r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"AddJurisdiction"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("home_work")]),e._v(e._s(e.$t("App.menu.addJurisdiction.msg"))+"\n            ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.addJurisdiction.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canAdd("AddFacility")?r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"AddFacility"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("house")]),e._v(e._s(e.$t("App.menu.addFacility.msg"))+"\n            ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.addFacility.tooltip")))])],1)],1):e._e(),e._v(" "),r("li",{staticClass:"parent"},[r("a",{attrs:{href:"#"}},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v("\n          "+e._s(e.$t("App.menu.HFR.msg"))+"\n          "),r("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),r("ul",{staticClass:"child"},[e.tasksVerification.canAdd("AddFacility")?r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"AddJurisdictionHFR"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("home_work")]),e._v(e._s(e.$t("App.menu.addJurisdictionHFR.msg"))+"\n                ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.addJurisdictionHFR.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canAdd("AddFacility")?r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"UpdateJurisdictionHFR"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("home_work")]),e._v(e._s(e.$t("App.menu.updateJurisdictionHFR.msg"))+"\n                ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.updateJurisdictionHFR.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canAdd("AddFacility")?r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"AddFacilityHFR"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("house")]),e._v(e._s(e.$t("App.menu.addFacilityHFR.msg"))+"\n                ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.addFacilityHFR.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canAdd("AddFacility")?r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},[r("v-list-tile",{attrs:{slot:"activator",to:"updateFacilityHFR"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("house")]),e._v(e._s(e.$t("App.menu.updateFacilityHFR.msg"))+"\n                ")],1)],1),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.updateFacilityHFR.tooltip")))])],1)],1):e._e()],1)]),e._v(" "),r("li",{staticClass:"parent"},[r("a",{attrs:{href:"#"}},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v("\n          "+e._s(e.$t("App.menu.facilityRegReports.msg"))+"\n          "),r("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),r("ul",{staticClass:"child"},[e.tasksVerification.canView("FacilitiesReport")?r("v-list",{staticClass:"lastMenu"},[r("v-list-tile",{attrs:{to:"FacilitiesReport"}},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.facilitiesReport.msg"))+"\n              ")],1)],1)],1):e._e(),e._v(" "),e.tasksVerification.canView("FacilitiesReport")?r("v-list",{staticClass:"lastMenu"},[r("v-list-tile",{attrs:{to:"DVSReport"}},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.dvsReport.msg"))+"\n              ")],1)],1)],1):e._e(),e._v(" "),e.tasksVerification.canView("JurisdictionsReport")?r("v-list",{staticClass:"lastMenu"},[r("v-list-tile",{attrs:{to:"JurisdictionsReport"}},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.jurisdictionsReport.msg"))+"\n              ")],1)],1)],1):e._e()],1)])],1)]),e._v(" "),r("li",{staticClass:"parent"},[r("a",{attrs:{href:"#"}},[r("v-icon",[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.account.msg"))+"\n    ")],1),e._v(" "),r("ul",{staticClass:"child"},[r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},["Admin"===e.$store.state.auth.role?r("v-list-tile",{attrs:{slot:"activator",to:"addUser"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.addUser.msg"))+"\n            ")],1)],1):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.addUser.tooltip")))])],1)],1),e._v(" "),r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},["Admin"===e.$store.state.auth.role?r("v-list-tile",{attrs:{slot:"activator",to:"usersList"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.usersList.msg"))+"\n            ")],1)],1):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.usersList.tooltip")))])],1)],1),e._v(" "),r("v-list",{staticClass:"lastMenu"},[r("v-tooltip",{attrs:{right:""}},["Admin"===e.$store.state.auth.role?r("v-list-tile",{attrs:{slot:"activator",to:"rolesManagement"},slot:"activator"},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.rolesManagement.msg"))+"\n            ")],1)],1):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("App.menu.rolesManagement.tooltip")))])],1)],1),e._v(" "),r("v-list",{staticClass:"lastMenu"},[r("v-list-tile",{attrs:{to:"changePassword"}},[r("v-list-tile-title",{staticClass:"menuText"},[r("v-icon",{attrs:{left:"",color:"black"}},[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.changePassword.msg"))+"\n          ")],1)],1)],1)],1)]),e._v(" "),r("li",{staticClass:"parent"},[e.$store.state.denyAccess?e._e():r("v-list-tile",{staticClass:"newClass",attrs:{slot:"activator",to:"configure"},slot:"activator"},[r("v-icon",[e._v("settings")]),e._v(" "+e._s(e.$t("App.menu.configure.msg"))+"\n    ")],1)],1),e._v(" "),r("li",{staticClass:"parent"},[e.$store.state.denyAccess||e.$store.state.config.generalConfig.authDisabled?e._e():r("v-list-tile",{staticClass:"newClass",attrs:{slot:"activator",to:"logout"},slot:"activator"},[r("v-list-tile-title",[r("v-icon",[e._v("logout")]),e._v(" "+e._s(e.$t("App.menu.logout.msg"))+"\n      ")],1)],1)],1)])},staticRenderFns:[]};var Xt="http://41.59.227.79:8083",Zt={mixins:[Le,ie,M],props:["generalConfig"],data:function(){return{items:[{title:"Click Me"},{title:"Click Me"},{title:"Click Me"},{title:"Click Me 2"}],fixed:!1,title:this.$t("App.title"),locale:"en",locales:[{text:"English",value:"en"},{text:"French",value:"fr"}],activeDataSourcePair:{},tasksVerification:zt}},watch:{locale:function(e){this.$i18n.locale=e}},methods:{closeDialogError:function(){this.$store.state.errorColor="primary",this.$store.state.dialogError=!1},renderInitialPage:function(){var e=this,t=this.$store.state.activePair.source1.name,r=this.$store.state.activePair.source2.name;if(t&&r||!(this.$store.state.dataSources.length>1||this.$store.state.dataSourcePairs.length>0))if(t&&r){t=this.toTitleCase(t),r=this.toTitleCase(r);var a=this.getDatasourceOwner();g.a.get(Xt+"/uploadAvailable/"+t+"/"+r+"/"+a.source1Owner+"/"+a.source2Owner).then(function(t){e.$store.state.initializingApp=!1,t.data.dataUploaded?(e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})):e.$router.push({name:"AddDataSources"})}).catch(function(t){console.log(t),e.$router.push({name:"AddDataSources"})})}else this.$router.push({name:"AddDataSources"});else this.$router.push({name:"DataSourcesPair"})},getTotalLevels:function(){var e=this,t=this.$store.state.activePair.source1.name,r=this.$store.state.activePair.source2.name;if(!t||!r)return this.$store.state.totalSource1Levels=5,this.$store.state.totalSource2Levels=5,this.$store.state.initializingApp=!1,this.renderInitialPage(),this.$store.state.recoLevel=2,void this.getRecoStatus();t=this.toTitleCase(t),r=this.toTitleCase(r);var a=s()(this.getDatasourceOwner()),i=s()(this.getLimitOrgIdOnActivePair());g.a.get(Xt+"/countLevels/"+t+"/"+r+"/"+a+"/"+i).then(function(t){e.$store.state.levelMapping.source1=t.data.levelMapping.levelMapping1,e.$store.state.levelMapping.source2=t.data.levelMapping.levelMapping2,e.$store.state.totalSource1Levels=t.data.totalSource1Levels,e.$store.state.totalSource2Levels=t.data.totalSource2Levels,e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()}).catch(function(t){console.log(t),e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()})},getFacilityTypes:function(){var e=this;g.a.get(Xt+"/FR/getCodeSystem?id=hfr-facility-types").then(function(t){e.$store.state.facilityTypes=t.data})},getRecoStatus:function(){var e=this;if(0!==p()(this.$store.state.activePair.source1).length&&0!==p()(this.$store.state.activePair.source2).length){var t=this.toTitleCase(this.$store.state.activePair.source1.name),r=this.toTitleCase(this.$store.state.activePair.source2.name),a=this.$store.state.activePair.userID._id;g.a.get(Xt+"/recoStatus/"+t+"/"+r+"/"+a).then(function(s){s.data.status?e.$store.state.recoStatus=s.data.status:g.a.get(Xt+"/markRecoUnDone/"+t+"/"+r+"/"+a).then(function(t){t.data.status&&(e.$store.state.recoStatus=t.data.status)}).catch(function(e){console.log(e.response.data.error)})}).catch(function(e){console.log(e.response.data.error)})}},getDataSources:function(){var e=this;this.$store.state.loadingServers=!0,this.$store.state.dataSources=[];var t=this.$store.state.auth.userID,r=this.$store.state.auth.role,a=this.$store.state.dhis.user.orgId;g.a.get(Xt+"/getDataSources/"+t+"/"+r+"/"+a).then(function(t){e.$store.state.loadingServers=!1,e.$store.state.dataSources=t.data.servers,e.getDataSourcePair()}).catch(function(t){e.$store.state.loadingServers=!1,console.log(s()(t))})},getUserConfig:function(){var e=this,t=this.$store.state.auth.userID;g.a.get(Xt+"/getUserConfig/"+t).then(function(t){t.data&&(e.$store.state.config.userConfig=d()({},e.$store.state.config.userConfig,t.data)),e.getGeneralConfig(function(){e.getDataSources()})}).catch(function(){e.getGeneralConfig(function(){e.getDataSources()})})},getDataSourcePair:function(){var e=this;this.$store.state.activePair.source1={},this.$store.state.activePair.source2={};var t=this.$store.state.auth.userID;this.$store.state.initializingApp||(this.$store.state.initializingApp=!0),g.a.get(Xt+"/getDataSourcePair/"+t+"/"+this.$store.state.dhis.user.orgId).then(function(t){e.$store.state.dataSourcePairs=t.data;var r=e.getActiveDataSourcePair();p()(r).length>0&&(e.$store.state.activePair.source1.id=r.source1._id,e.$store.state.activePair.source1.name=r.source1.name,e.$store.state.activePair.source1.userID=r.source1.userID,e.$store.state.activePair.source2.id=r.source2._id,e.$store.state.activePair.source2.name=r.source2.name,e.$store.state.activePair.source2.userID=r.source2.userID,e.$store.state.activePair._id=r._id,e.$store.state.activePair.shared=r.shared,e.$store.state.activePair.userID=r.userID),e.autoActivateDatasourcePair(function(t){t||e.autoCreateDatasourcePair()}),e.getTotalLevels()}).catch(function(t){console.log(s()(t)),e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting data source pairs, reload the app to retry",e.getTotalLevels()})},autoCreateDatasourcePair:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t=function(){if(p()(e.$store.state.activePair.source1).length>0)return{v:!1};var t=e.$store.state.config.generalConfig.reconciliation.fixSource2To,r={},a={},s=e.$store.state.auth.userID,i=e.$store.state.dhis.user.orgId,o=[],n=!0,l=!1,u=void 0;try{for(var d,v=c()(e.$store.state.dataSources);!(n=(d=v.next()).done);n=!0){var h=d.value,g=h.shared.users.find(function(e){return e._id===s}),f=h.owner.id===s,m=!0===h.shareToAll.activated,_=!1;h.owner.orgId&&h.owner.orgId===i&&(_=!0),(f||g||m||_)&&(h._id===t?a=h:r=h,o.push(h))}}catch(e){l=!0,u=e}finally{try{!n&&v.return&&v.return()}finally{if(l)throw u}}if(o.length>2||0===p()(r).length||0===p()(a).length)return{v:!1};e.createDatasourcePair(r,a)}();if("object"===(void 0===t?"undefined":n()(t)))return t.v}},autoActivateDatasourcePair:function(e){if(p()(this.$store.state.activePair.source1).length>0){return e(!1)}if(this.$store.state.dataSourcePairs.length>1||0===this.$store.state.dataSourcePairs.length){return e(!1)}if(this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair){this.$store.state.dataSourcePairs.status="active",this.activeDataSourcePair=this.$store.state.dataSourcePairs[0];e(!0),this.activatePair()}else{e(!1)}}},computed:{dhisLink:function(){return!!this.$store.state.dhis.user.orgId&&window.location.protocol+"//"+window.location.hostname}},components:{appMenu:r("VU/8")(Yt,Kt,!1,function(e){r("ZjLU")},"data-v-1c303b8e",null).exports},created:function(){var e=this;this.getFacilityTypes(),this.$router.push({name:"AddDataSources"}),this.$store.state.config.generalConfig=this.generalConfig,$.a.get("token")&&$.a.get("userID")&&(this.$store.state.auth.token=$.a.get("token"),this.$store.state.auth.userID=$.a.get("userID"),this.$store.state.auth.username=$.a.get("username"),this.$store.state.auth.role=$.a.get("role"),this.$store.state.auth.tasks=JSON.parse($.a.get("tasks")),this.$store.state.signupFields=$.a.get("signupFields"),this.$store.state.customSignupFields=$.a.get("customSignupFields"),this.$store.state.config.generalConfig.authDisabled?this.$router.push("login"):g.a.get(Xt+"/isTokenActive/").then(function(t){e.$store.state.clientId=S.a.v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,e.getUserConfig()})),yr.$on("refreshApp",function(){e.getDataSources()}),yr.$on("recalculateScores",function(){e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})}),yr.$on("getDataSources",function(){e.getDataSources()}),yr.$on("getFacilityTypes",function(){e.getFacilityTypes()}),yr.$on("getConfig",function(){e.getUserConfig()}),yr.$on("getGeneralConfig",function(){e.getGeneralConfig()}),yr.$on("getDataSourcePair",function(){e.getDataSourcePair()})},name:"App"},Qt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",{domProps:{textContent:e._s(e.title)}}),e._v(" "),a("v-spacer"),e._v(" "),e.$store.state.auth.token||e.$store.state.config.generalConfig.authDisabled?a("v-toolbar-items",[e.dhisLink?a("v-btn",{attrs:{flat:"",href:e.dhisLink}},[a("img",{attrs:{src:r("wxqd")}})]):e._e(),e._v(" "),a("appMenu")],1):e._e(),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-items")],1),e._v(" "),a("v-content",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.dynamicProgress,callback:function(t){e.$set(e.$store.state,"dynamicProgress",t)},expression:"$store.state.dynamicProgress"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n          "+e._s(e.$store.state.progressTitle)+"\n          "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.$store.state.dialogError,callback:function(t){e.$set(e.$store.state,"dialogError",t)},expression:"$store.state.dialogError"}},[a("v-card",[a("v-toolbar",{attrs:{color:e.$store.state.errorColor,dark:""}},[a("v-toolbar-title",[e._v("\n            "+e._s(e.$store.state.errorTitle)+"\n          ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.$store.state.dialogError=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n          "+e._s(e.$store.state.errorDescription)+"\n        ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.closeDialogError(t)}}},[e._v("Ok")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.initializingApp,callback:function(t){e.$set(e.$store.state,"initializingApp",t)},expression:"$store.state.initializingApp"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n          "+e._s(e.$t("App.initApp"))+"\n          "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[Object.keys(e.$store.state.activePair.source1).length>0&&!e.$store.state.denyAccess?[e._v("\n          "+e._s(e.$t("App.source"))+" 1: "),a("b",[e._v(e._s(e.$store.state.activePair.source1.name.toUpperCase()))]),e._v(",     "+e._s(e.$t("App.source"))+" 2: "),a("b",[e._v(e._s(e.$store.state.activePair.source2.name.toUpperCase()))]),e._v(",\n              Recon Status: "),"in-progress"===e.$store.state.recoStatus?a("v-icon",{attrs:{small:""}},[e._v("lock_open")]):a("v-icon",{attrs:{small:""}},[e._v("lock")]),e._v(" "),a("b",[e._v(e._s(e.$store.state.recoStatus))])]:e._e()],2)],1),e._v(" "),a("v-alert",{style:{width:e.$store.state.alert.width},attrs:{type:e.$store.state.alert.type,dismissible:e.$store.state.alert.dismisible,transition:e.$store.state.alert.transition},model:{value:e.$store.state.alert.show,callback:function(t){e.$set(e.$store.state.alert,"show",t)},expression:"$store.state.alert.show"}},[e._v("\n      "+e._s(e.$store.state.alert.msg)+"\n    ")]),e._v(" "),a("router-view",{key:"baseRouterViewKey"+e.$store.state.baseRouterViewKey})],1),e._v(" "),a("v-footer",{attrs:{dark:"",color:"primary",fixed:e.fixed,app:""}})],1)},staticRenderFns:[]},er=r("VU/8")(Zt,Qt,!1,null,null,null).exports,tr=r("3EgV"),rr=r.n(tr),ar=r("ESwS"),sr=r.n(ar),ir=(r("7zck"),r("J/Fn"),r("d7EF")),or=r.n(ir),nr=r("W3Iv"),lr=r.n(nr),cr=r("Zrlr"),ur=r.n(cr),dr=r("wxAW"),vr=r.n(dr),pr=function(){function e(t,r,a,s){ur()(this,e),this.items=t,this.filter=a,this.headers=s,this.filters=r,this.filterCallbacks={}}return vr()(e,[{key:"registerFilter",value:function(e,t){this.filterCallbacks[e]=t}},{key:"runFilters",value:function(){var e=this,t=e.items;return lr()(this.filterCallbacks).forEach(function(r){var a=or()(r,2),s=a[0],i=a[1];t=i.call(e,e.filters[s],t)}),t}}],[{key:"updateFilters",value:function(e,t){return re()({},e,t)}}]),e}(),hr={install:function(e,t){e.prototype.$MultiFilters=pr}},gr=r("TXmL");i.default.use(gr.a);var fr,mr,_r=new gr.a({locale:Object({NODE_ENV:"production",BACKEND_SERVER:"http://41.59.227.79:8083"}).VUE_APP_I18N_LOCALE||"en",fallbackLocale:Object({NODE_ENV:"production",BACKEND_SERVER:"http://41.59.227.79:8083"}).VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:(fr=r("hFeb"),mr={},fr.keys().forEach(function(e){var t=e.match(/([A-Za-z0-9-_]+)\./i);if(t&&t.length>1){var r=t[1];mr[r]=fr(e)}}),mr)});r.d(t,"eventBus",function(){return yr}),i.default.use(sr.a),i.default.use(hr),i.default.use(rr.a,{theme:{primary:"#3F51B5",secondary:"#7986CB",accent:"#9c27b0",error:"#f44336",warning:"#ffeb3b",info:"#2196f3",success:"#4caf50"}}),i.default.config.productionTip=!1;var yr=new i.default;function xr(e){var t=location.href.split("api").shift();g.a.post(t+"api/dataStore/GOFR/config",e)}!function(e){if(!(location.href.split("api").length>=2))return e(!1);var t=location.href.split("api").shift();g.a.get(t+"api/dataStore/GOFR/config").then(function(t){e(t.data),t.data.BACKEND_SERVER||xr({BACKEND_SERVER:"http://41.59.227.79:8083"})}).catch(function(t){return console.log(s()(t)),xr({BACKEND_SERVER:"http://41.59.227.79:8083"}),e(!1)})}(function(e){e&&e.BACKEND_SERVER,g.a.defaults.baseURL="http://41.59.227.79:8083",g()({url:"/getGeneralConfig",method:"post",data:Wt.state.config.generalConfig}).then(function(e){e||(e.data={}),new i.default({el:"#app",router:Bt,store:Wt,components:{App:er},data:function(){return{config:e.data}},i18n:_r,template:'<App :generalConfig="config" />'})})})},NuBg:function(e,t){e.exports={App:{title:"BID Facility Registry",initApp:"Initializing App",source:"Source",menu:{facilityRecon:{msg:"Facility Reconciliation",tooltip:"Facility Reconciliation"},createPair:{msg:"Create and Manage Data Source Pair",tooltip:"Select data sources to start mathing"},reconcile:{msg:"Reconcile",tooltip:"Perform location matching of your selected data sources"},recoStatus:{msg:"Reconciliation Status",tooltip:"Matching Status"},facilityRegistry:{msg:"Facility Registry",tooltip:"Facility Registry"},createOrgHier:{msg:"Create Hierarchy",tooltip:"Add Facility And Jurisdition"},healthService:{msg:"Healthcare Services",tooltip:"Add services and define service terminologies"},healthServiceTerminologies:{msg:"Add Terminologies",tooltip:"Add service based terminologies"},facilityRegReports:{msg:"Reports",tooltip:"View Reports"},HFR:{msg:"Sync With HFR",tooltip:"Sync With HFR"},historyReport:{msg:"History",tooltip:"Track history of facilities and services"},addJurisdiction:{msg:"Add Administrative Area",tooltip:"Add Counties/Districts"},addFacility:{msg:"Add Facility",tooltip:"Add Facility"},addFacilityHFR:{msg:"Add Facility From HFR",tooltip:"Add Facility From HFR"},updateFacilityHFR:{msg:"Update Facility From HFR",tooltip:"Update Facility From HFR"},addJurisdictionHFR:{msg:"Add Administrative Area From HFR",tooltip:"Add Administrative Area From HFR"},updateJurisdictionHFR:{msg:"Update Administrative Area From HFR",tooltip:"Update Administrative Area From HFR"},facilitiesReport:{msg:"Facilities",tooltip:"Facilities"},dvsReport:{msg:"District Vaccine Store (DVS)",tooltip:"District Vaccine Store (DVS)"},jurisdictionsReport:{msg:"Administrative Areas",tooltip:"Administrative Areas"},servicesReport:{msg:"Services",tooltip:"Services"},newFacilitiesRequestsReport:{msg:"New Facilities Requests",tooltip:"Report on requests made to create new facilities"},facilitiesUpdateRequestsReport:{msg:"Requested Facilities Updates",tooltip:"Report about requests to update details of facilities"},facilityRequests:{msg:"Requests",tooltip:"Send requests about addition of new facilities or update of facility details"},requestNewFacility:{msg:"Request Addition of New Facility",tooltip:"Request Addition of New Facility"},requestUpdateFacility:{msg:"Request Update of Facility Details",tooltip:"Request Update of Facility Details"},addServiceType:{msg:"Add Service Type",tooltip:"Add Service Type"},addServiceCategory:{msg:"Add Service Category",tooltip:"Add Service Category"},addServiceSpecialty:{msg:"Add Service Specialty",tooltip:"Add Service Specialty"},addServiceEligibility:{msg:"Add Service Eligibility",tooltip:"Add Service Eligibility"},addLanguage:{msg:"Add Language",tooltip:"Add Language"},addReferralMethod:{msg:"Add Referral Methods",tooltip:"Add Referral Methods"},addProgram:{msg:"Add Programs",tooltip:"Add Programs"},addCharacteristic:{msg:"Add Characteristics",tooltip:"Add Characteristics"},addServiceProvisionCondition:{msg:"Add Service Provision Condition",tooltip:"Add Service Provision Condition"},addService:{msg:"Add Service",tooltip:"Add Service offered by health facilities"},services:{msg:"Services",tooltip:"Services"},archive:{msg:"Archived Uploads",tooltip:"Access to backup data"},account:{msg:"Account"},addUser:{msg:"Add User",tooltip:"Create new user account"},usersList:{msg:"Users List",tooltip:"Manage user accounts"},rolesManagement:{msg:"Roles Management",tooltip:"Add or remove specific tasks on roles"},changePassword:{msg:"Change Password"},logout:{msg:"Logout"},configure:{msg:"configure System"},dataSourcesParent:{msg:"Data Sources",tooltip:"Upload CSV data and add remote DHIS2 or FHIR servers"},viewDataSources:{msg:"View Data Sources",tooltip:"View datasets that can be used for reconciliation"},addDataSources:{msg:"Add Data Sources",tooltip:"Add a new dataset that you want to reconcile"},view:{msg:"View",tooltip:"Explore data sources contents"},recoParent:{msg:"Reconcile"}}}}},VPxq:function(e,t){},ZVZp:function(e,t){},ZjLU:function(e,t){},hFeb:function(e,t,r){var a={"./en.json":"NuBg","./fr.json":"oBab"};function s(e){return r(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(a)},s.resolve=i,e.exports=s,s.id="hFeb"},oBab:function(e,t){e.exports={App:{title:"Facility Reconciliation",initApp:"Initialisation de l'App",source:"la source",menu:{facilityRecon:{msg:"rapprochement des installations",tooltip:"rapprochement des installations"},createPair:{msg:"Créer et gérer une paire de sources de données",tooltip:"Select data sources to start mathing"},reconcile:{msg:"Réconcilier",tooltip:"Effectuer une correspondance d'emplacement de vos sources de données sélectionnées"},recoStatus:{msg:"État de rapprochement",tooltip:"Statut de correspondance"},facilityRegistry:{msg:"registre des installations",tooltip:"registre des installations"},createOrgHier:{msg:"Créer une hiérarchie",tooltip:"Ajouter une installation et une édition"},healthService:{msg:"Services de santé",tooltip:"Ajouter des services et définir des terminologies de service"},healthServiceTerminologies:{msg:"Ajouter des terminologies",tooltip:"Ajouter des terminologies basées sur le service"},facilityRegReports:{msg:"Rapports",tooltip:"Voir les rapports"},HFR:{msg:"Sync With HFR",tooltip:"Sync With HFR"},historyReport:{msg:"Histoire",tooltip:"Suivre l'historique des installations et des services"},addJurisdiction:{msg:"Ajouter une juridiction",tooltip:"Ajouter des comtés / districts"},addFacility:{msg:"Add Facility",tooltip:"Add Facility"},addFacilityHFR:{msg:"Add Facility From HFR",tooltip:"Add Facility From HFR"},updateFacilityHFR:{msg:"Update Facility From HFR",tooltip:"Update Facility From HFR"},addJurisdictionHFR:{msg:"Add Administrative Area From HFR",tooltip:"Add Administrative Area From HFR"},updateJurisdictionHFR:{msg:"Update Administrative Area From HFR",tooltip:"Update Administrative Area From HFR"},facilitiesReport:{msg:"Facilities Report",tooltip:"Facilities Report"},dvsReport:{msg:"District Vaccine Store (DVS)",tooltip:"District Vaccine Store (DVS)"},jurisdictionsReport:{msg:"Administrative Areas",tooltip:"Administrative Areas"},servicesReport:{msg:"Services Report",tooltip:"Services Report"},facilitiesRequestsReport:{msg:"Facilities Requests Report",tooltip:"Report on requests made to create new facilities"},facilitiesUpdateRequestsReport:{msg:"Facilities Updates Requests Report",tooltip:"Report about requests to update details of facilities"},requestNewFacility:{msg:"Request Addition of New Facility",tooltip:"Request Addition of New Facility"},requestUpdateFacility:{msg:"Request Update of Facility Details",tooltip:"Request Update of Facility Details"},addServiceType:{msg:"Add Service Type",tooltip:"Add Service Type"},addServiceCategory:{msg:"Add Service Category",tooltip:"Add Service Category"},addServiceSpecialty:{msg:"Add Service Specialty",tooltip:"Add Service Specialty"},addServiceEligibility:{msg:"Add Service Eligibility",tooltip:"Add Service Eligibility"},addLanguage:{msg:"Add Language",tooltip:"Add Language"},addReferralMethod:{msg:"Add Referral Methods",tooltip:"Add Referral Methods"},addProgram:{msg:"Add Programs",tooltip:"Add Programs"},addCharacteristic:{msg:"Add Characteristics",tooltip:"Add Characteristics"},addServiceProvisionCondition:{msg:"Add Service Provision Condition",tooltip:"Add Service Provision Condition"},addService:{msg:"Ajouter un service",tooltip:"Ajouter le service offert par les établissements de santé"},services:{msg:"Prestations de service",tooltip:"Prestations de service"},archive:{msg:"Téléchargements archivés",tooltip:"Accès aux données de sauvegarde"},account:{msg:"Compte"},addUser:{msg:"Ajouter un utilisateur",tooltip:"Créer un nouveau compte d'utilisateur"},usersList:{msg:"Liste des utilisateurs",tooltip:"Gérer les comptes d'utilisateurs"},rolesManagement:{msg:"Gestion des rôles",tooltip:"Ajouter ou supprimer des tâches spécifiques sur les rôles"},changePassword:{msg:"Changer le mot de passe"},logout:{msg:"Connectez - Out"},configure:{msg:"configurer le système"},dataSourcesParent:{msg:"Les sources de données",tooltip:"Télécharger des données CSV et ajouter des serveurs DHIS2 ou FHIR distants"},viewDataSources:{msg:"Afficher les sources de données",tooltip:"Afficher les jeux de données pouvant être utilisés pour la réconciliation"},addDataSources:{msg:"Ajouter des sources de données",tooltip:"Ajouter un nouveau jeu de données que vous souhaitez réconcilier"},view:{msg:"Vue",tooltip:"Explorer le contenu des sources de données"},recoParent:{msg:"Réconcilier"}}}}},sds8:function(e,t){},uslO:function(e,t,r){var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tk":"+WRH","./tk.js":"+WRH","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(e){return r(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(a)},s.resolve=i,e.exports=s,s.id="uslO"},wxqd:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAbCAYAAAAnFzLpAAAGGklEQVRYR+1YaVCTVxQ9BBLWEBYRGhAjFPetVRRoQVnFZRQtYq1Tl6kzij/q2k7dZtTSxW3sVGeqVtHOuLXQYnFBFscNFwqIYikKRRkpq2GRGJCEJJ37RV6SJhBQ63Qs59/7ct9795137vJi4bNktwa94Biw6CVDp4ReMvSiopeMXjJMJ8leZTyPMoQ2AhxePoNNzbx9H3vP5bPxByHD8V7gEDb++MA5VNbLelSnlkaPgf+bYtyrrMfe9Hw0t7T1aP6LGndbGc72NsjbuZjt92N2EdYducDGa2ICER89ho2jNh1FWU1jt/0LGOiJo6tmMvsvk7NxMOtWt+ebMrQSCOAt8YWnxAcOIhFsbe2gULShqaEeTVIp7v1+G0qFjvD/DBmerkJcTJgPnoUFd66l350Fqe954SXxwdtBwbC2sel0CfkTGa5lZaCpQdqzPuPfVgZ5493HEWO4MJHijwqtg88De6EQkTFx4POt2HSNRoMnzY9hLxSBx9MSTmh72obUYz8A0Jhuuuhy+rs5QWRnzcXvU2U7BFaWKN4T3+0wCV57GFWNT7ib9vVwhoOtAA8fPUa9rNXk+cjO3oavc1LZDkW72sjWVmAFD2cHuDnaQdGuwqPmFtQ2ytGuNrR18xAjZNJUtLbIUZh3AzUVFWhvV4LPFyAwLBLunl5s7Utpp1FXXWlMBsX9ssljYWetdUyl1iCnpBKrEjNwZuNcuAptue/mcsa4Tw6C8siMcYNgzbdkG9/9S4otP13h1tSHv58YJ1bPYp8SkrJx6LwuZ0j6irByegCiRvtwF6MPeZsSV4oeYn/GTdwur2U/iVxcIWtqglqtMrAXe0vwTsQk9u1WznWUFhUakrF1QThi9SqC/gq1TXLwrSzh4qCNQXNkFJbXYaSkr0kV0I1OSzhhkGC7IoMuIHX9+/Bwsu80ajQaYMrnx1BS1WA2siR+A+EfHMrsLpxNhbSmWkfGiP59cXJtHDMg2R2/XISymgYM8eqD2KChsNSLNXNk0EJ0S2fySiGys0Hcu0M5aXfgdF4plh9IZ+OuyKALoovqwL70m0i7+SccbARcCIaPHIBWhRLL9qWZJYJnyUPE9FiInJ052xa5HGnJx6FWqXRk7FwUiZjxg9hiaw5nIeXGXTaODRqCrfN1DpkjI7+sGnN3/sKFGYGcztg0j61HZZfKbwe6ImNR2ChsiAtmtt9nFmBHynWjPGGWCVhg/IRQePv6aU01wKX006ir0oYsK60pn8UxWVOSC/g0EWrS3jNY8Xi48+0SFq/myFh9KBMnc+4Z+Hf5iwWgEkqQPVVg9Ir93SKDVEv+Pau63BxpcwuSrhXjyMVC1DTJzfJgYUFEhKOfjy+zvZP3G+4WFrAxIyN3x2KWD0jes75OMtpA/zDmyIjb/jNIHfo4sjIGgYO0WbwnZJD9/NCR2DA72CBU6btSpcap3BJ8cyqn046Xx+MhYGIEPCUDtILQaJB/9TIelOiUb6AM6i6plyAU3K9B7LZkIzLOb/kQlNUJ5siI3nwMpdWGyexFyKA9vVwdsTjyLVDIUonVR1WDDLO3JRuphM/nIzA8Gu5iMWeuUqlw40IWqh6WG52PKSN1/RwM6+fGGVDtpjDRByXPot3x4FvyukWGqXb8Rcno8EdoK+CqXvzksazU02+7UnOw52wuc9va1g4hUVPg5OrKfWtrbUV25jk0SOuMiDBQxq6PojDdfyAzWnEwHadyS9l4ZsBg7FgYwcbmlPEyyXC0szb5aHN3skf2VwtZC085inIVwcHRESGTpoG6UQK9R65mpnHVozMwZQz3dsOv6+YwOyqtSVeL8aC2EX5vuCAmYDBTRXfC5GWSsXpGALd/RkEZiiukqGzQvoYnDu/PhU0HtqVcA5VdepSFTY0xeJfIZTIolYpOicg8mWzYdCXMC8Xc4GEmJ+SVVUPsIoTY2eGVhwmRQV1xVyive4y47clcu0+JMigsqkv7f/6YlLjPuB2nmq4fi7JWBahB2nziEuZNGIGNz+r9qwyT0BESjoxREnejakKHp34o8fwtUJdMeGlk9IjO18y42/9nvGbn7rqa/B8Oa+6MvcrQY+hvaNExIn99uskAAAAASUVORK5CYII="}},["NHnr"]);
//# sourceMappingURL=app.6ff529b463abd498860f.js.map